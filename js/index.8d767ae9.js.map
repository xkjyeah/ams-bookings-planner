{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/chart/TripBar.vue?8b28","webpack:///./src/dialogs/teams/VehicleLabel.vue?b2a8","webpack:///./src/dialogs/ImportTeams.vue?4545","webpack:///./src/dialogs/Teams.vue?d822","webpack:///./src/components/chart/PlannerChart.vue?b281","webpack:///./src/App.vue?97f0","webpack:///./src/components/Manifest.vue?1dda","webpack:///./src/dialogs/teams/EditingDropdown.vue?8a54","webpack:///./src/components/MessageHistory.vue?cf0a","webpack:///./src/App.vue?26d5","webpack:///./src/components/chart/TeamList.vue?b514","webpack:///./src/dialogs/teams/EditingTextField.vue?dc4b","webpack:///./src/dialogs/teams/EditingCell.vue?89ae","webpack:///./src/dialogs/DraftMessage.vue?13f9","webpack:///./src/dialogs/messages/MessageStatusChecker.vue?f536","webpack:///./src/RequiresLogin.vue?13ca","webpack:///./src/assets/email.png","webpack:///./src/components/common/UnobstrusiveTooltip.vue?a079","webpack:///./src/components/TripEditor.vue?e25c","webpack:///./src/dialogs/teams/PersonView.vue?93eb","webpack:///./src/dialogs/Persons.vue?e3ba","webpack:///./src/components/chart/VehicleMarker.vue?9c34","webpack:///./src/vue-with-plugins.ts","webpack:///./src/AppRoot.vue?52eb","webpack:///./src/App.vue?2a57","webpack:///./src/lib/types.ts","webpack:///./src/lib/uniqueId.ts","webpack:///./src/lib/firebase.ts","webpack:///./src/store/trips.ts","webpack:///./src/store/modes.ts","webpack:///./src/components/chart/ChartArea.vue?7936","webpack:///./src/components/chart/TeamList.vue?e951","webpack:///./src/dialogs/teams/VehicleLabel.vue?bde1","webpack:///./src/store/vehicles.ts","webpack:///./src/lib/singaporeColors.ts","webpack:///./src/components/common/VehicleTooltip.vue?7828","webpack:///./src/components/common/VehicleTooltip.vue?c549","webpack:///./src/components/common/VehicleTooltip.vue?d79b","webpack:///./src/components/common/VehicleTooltip.vue","webpack:///./src/dialogs/teams/VehicleLabel.vue?ad62","webpack:///./src/dialogs/teams/VehicleLabel.vue?4530","webpack:///./src/dialogs/teams/VehicleLabel.vue","webpack:///./src/components/chart/TeamList.vue?7baf","webpack:///./src/components/chart/TeamList.vue?5aba","webpack:///./src/components/chart/TeamList.vue","webpack:///./src/components/util/TimeUpdater.vue?142a","webpack:///./src/components/util/TimeUpdater.vue?83da","webpack:///./src/components/util/TimeUpdater.vue?ca12","webpack:///./src/components/util/TimeUpdater.vue","webpack:///./src/components/chart/PlannerChart.vue?54fa","webpack:///./src/components/chart/tripReassignment.ts","webpack:///./src/components/chart/PlannerChart.vue?4d1c","webpack:///./src/components/chart/PlannerChart.vue?672b","webpack:///./src/components/chart/PlannerChart.vue","webpack:///./src/components/chart/HorizontalGridLines.vue?570d","webpack:///./src/components/chart/HorizontalGridLines.vue?1f1c","webpack:///./src/components/chart/HorizontalGridLines.vue?2d16","webpack:///./src/components/chart/HorizontalGridLines.vue","webpack:///./src/components/chart/VerticalGridLines.vue?8c03","webpack:///./src/components/chart/VerticalGridLines.vue?ac0a","webpack:///./src/components/chart/VerticalGridLines.vue?e053","webpack:///./src/components/chart/VerticalGridLines.vue","webpack:///./src/components/chart/CurrentTime.vue?354c","webpack:///./src/store/screen.ts","webpack:///./src/store/time.ts","webpack:///./src/store/dialogs.ts","webpack:///./src/store/tripEditing.ts","webpack:///./src/store/templates.ts","webpack:///./src/store/login.ts","webpack:///./src/store.ts","webpack:///./src/components/chart/CurrentTime.vue?063f","webpack:///./src/components/chart/CurrentTime.vue?388c","webpack:///./src/components/chart/CurrentTime.vue","webpack:///./src/components/chart/TripBar.vue?ed42","webpack:///./src/components/common/UnobstrusiveTooltip.vue?f408","webpack:///./src/components/common/UnobstrusiveTooltip.vue?d9c9","webpack:///./src/components/common/UnobstrusiveTooltip.vue?c357","webpack:///./src/components/common/UnobstrusiveTooltip.vue","webpack:///./src/components/chart/TripBar.vue?b3d5","webpack:///./src/components/chart/TripBar.vue?161d","webpack:///./src/components/chart/TripBar.vue","webpack:///./src/components/chart/VehicleMarker.vue?46e9","webpack:///./src/components/chart/VehicleMarker.vue?2094","webpack:///./src/components/chart/VehicleMarker.vue?1574","webpack:///./src/components/chart/VehicleMarker.vue","webpack:///./src/lib/scrollHelper.ts","webpack:///./src/components/chart/ChartArea.vue?2641","webpack:///./src/components/chart/ChartArea.vue?070c","webpack:///./src/components/chart/ChartArea.vue","webpack:///./src/components/TripEditor.vue?6b1d","webpack:///./src/components/common/TimeEditor.vue?6d86","webpack:///./src/components/common/TimeEditor.vue?5974","webpack:///./src/components/common/TimeEditor.vue?1451","webpack:///./src/components/common/TimeEditor.vue","webpack:///./src/components/TeamsSelect.vue?e100","webpack:///./src/components/TeamsSelect.vue?4001","webpack:///./src/components/TeamsSelect.vue?6017","webpack:///./src/components/TeamsSelect.vue","webpack:///./src/components/common/PostcodePicker.vue?e3f7","webpack:///./src/lib/locations.ts","webpack:///./src/components/common/PostcodePicker.vue?778f","webpack:///./src/components/common/PostcodePicker.vue?0c37","webpack:///./src/components/common/PostcodePicker.vue","webpack:///./src/components/MessageHistory.vue?c4be","webpack:///./src/lib/messages.ts","webpack:///./src/components/MessageHistory.vue?613d","webpack:///./src/components/MessageHistory.vue?3bc3","webpack:///./src/components/MessageHistory.vue","webpack:///./src/components/TripEditor.vue?0681","webpack:///./src/components/TripEditor.vue?86fc","webpack:///./src/components/TripEditor.vue","webpack:///./src/components/DatePicker.vue?e85c","webpack:///./src/components/DatePicker.vue?9a89","webpack:///./src/components/DatePicker.vue?dcf9","webpack:///./src/components/DatePicker.vue","webpack:///./src/components/PrintableManifest.vue?9682","webpack:///./src/components/Manifest.vue?6c01","webpack:///./src/components/Manifest.vue?9ff8","webpack:///./src/components/Manifest.vue?b199","webpack:///./src/components/Manifest.vue","webpack:///./src/components/PrintableManifest.vue?52ba","webpack:///./src/components/PrintableManifest.vue?38df","webpack:///./src/components/PrintableManifest.vue","webpack:///./src/dialogs/Teams.vue?76ff","webpack:///./src/dialogs/teams/EditingCell.vue?ef56","webpack:///./src/dialogs/teams/EditingCell.vue?3096","webpack:///./src/dialogs/teams/EditingCell.vue?92ca","webpack:///./src/dialogs/teams/EditingCell.vue","webpack:///./src/dialogs/teams/PersonView.vue?43ec","webpack:///./src/dialogs/teams/PersonView.vue?092c","webpack:///./src/dialogs/teams/PersonView.vue?ff42","webpack:///./src/dialogs/teams/PersonView.vue","webpack:///./src/dialogs/teams/VehicleView.vue?f102","webpack:///./src/dialogs/teams/VehicleView.vue?68b2","webpack:///./src/dialogs/teams/VehicleView.vue?26e7","webpack:///./src/dialogs/teams/VehicleView.vue","webpack:///./src/dialogs/teams/EditingDropdown.vue?562a","webpack:///./src/dialogs/teams/EditingDropdown.vue?216d","webpack:///./src/dialogs/teams/EditingDropdown.vue?009d","webpack:///./src/dialogs/teams/EditingDropdown.vue","webpack:///./src/dialogs/StandardDialog.vue?ca61","webpack:///./src/dialogs/StandardDialog.vue?484b","webpack:///./src/dialogs/StandardDialog.vue?f94e","webpack:///./src/dialogs/StandardDialog.vue","webpack:///./src/dialogs/Teams.vue?63dc","webpack:///./src/dialogs/Teams.vue?9424","webpack:///./src/dialogs/Teams.vue","webpack:///./src/dialogs/Persons.vue?3d73","webpack:///./src/dialogs/teams/EditingTextField.vue?daf8","webpack:///./src/dialogs/teams/EditingTextField.vue?a842","webpack:///./src/dialogs/teams/EditingTextField.vue?09cc","webpack:///./src/dialogs/teams/EditingTextField.vue","webpack:///./src/dialogs/Persons.vue?aab0","webpack:///./src/dialogs/Persons.vue?6cc9","webpack:///./src/dialogs/Persons.vue","webpack:///./src/dialogs/Manifest.vue?f775","webpack:///./src/dialogs/Manifest.vue?e79d","webpack:///./src/dialogs/Manifest.vue?3d6d","webpack:///./src/dialogs/Manifest.vue","webpack:///./src/dialogs/Messages.vue?5b8f","webpack:///./src/dialogs/messages/MessageStatusChecker.vue?da03","webpack:///./src/dialogs/messages/MessageStatusChecker.vue?ca99","webpack:///./src/dialogs/messages/MessageStatusChecker.vue?d4ca","webpack:///./src/dialogs/messages/MessageStatusChecker.vue","webpack:///./src/dialogs/Messages.vue?a40c","webpack:///./src/dialogs/Messages.vue?96ca","webpack:///./src/dialogs/Messages.vue","webpack:///./src/dialogs/DraftMessage.vue?99d7","webpack:///./src/dialogs/DraftMessage.vue?ac98","webpack:///./src/dialogs/DraftMessage.vue?5321","webpack:///./src/dialogs/DraftMessage.vue","webpack:///./src/dialogs/Templates.vue?2d50","webpack:///./src/dialogs/Templates.vue?17cd","webpack:///./src/dialogs/Templates.vue?0fa4","webpack:///./src/dialogs/Templates.vue","webpack:///./src/dialogs/ImportTeams.vue?7489","webpack:///./src/dialogs/ImportTeams.vue?b8f8","webpack:///./src/dialogs/ImportTeams.vue?f3e7","webpack:///./src/dialogs/ImportTeams.vue","webpack:///./src/sync/VehiclesSync.vue?5aa8","webpack:///./src/sync/VehiclesSync.vue?ad15","webpack:///./src/sync/VehiclesSync.vue?91c8","webpack:///./src/sync/VehiclesSync.vue","webpack:///./src/sync/TripsSync.vue?d598","webpack:///./src/sync/TripsSync.vue?fd2a","webpack:///./src/sync/TripsSync.vue?9967","webpack:///./src/sync/TripsSync.vue","webpack:///./src/assets/default-data.ts","webpack:///./src/App.vue?ec60","webpack:///./src/App.vue?640d","webpack:///./src/App.vue","webpack:///./src/RequiresLogin.vue?4903","webpack:///./src/RequiresLogin.vue?4454","webpack:///./src/RequiresLogin.vue?0d37","webpack:///./src/RequiresLogin.vue","webpack:///./src/AppRoot.vue?a529","webpack:///./src/AppRoot.vue?e0ed","webpack:///./src/AppRoot.vue","webpack:///./src/vault.ts","webpack:///./src/main.ts","webpack:///./src/dialogs/Messages.vue?3ffe","webpack:///./src/components/PrintableManifest.vue?14a6","webpack:///./src/dialogs/Templates.vue?2f1d"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","use","_vm","this","_h","$createElement","_c","_self","staticClass","staticRenderFns","attrs","class","$store","state","trips","type","staticStyle","_e","on","$event","goBack","_v","_s","templateName","login","user","showDialog","scopedSlots","_u","fn","ref","_g","signOut","xAxisScale","yAxisScale","commit","createNewTrip","dialogs","activeDialog","_b","props","imputedEndTime","trip","endTime","startTime","Date","now","toString","padStart","Math","floor","random","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","initializeApp","db","database","auth","makeTripTeamKey","driver","medic","trim","toLowerCase","BLANK_KEY","namespaced","scheduleByTeam","teams","savesDisabled","timestamp","inFlightPromise","autoUpdate","teamsKey","tripsKey","getters","flatMap","values","v","rows","tripIds","map","tripId","rowCount","sumBy","team","teamIndexForRow","offset","index","teamForRow","canonicalOffsetForRow","teamSchedules","schedule","rowIndex","row","mutations","reorderTeam","options","oldIndex","newIndex","spliced","syncTeams","assignNewlyCreatedJob","toSchedule","packTrips","flatten","vehicle","set","id","syncTrip","reassignJob","fromKey","toKey","fromSchedule","prevTeamNewTripSet","filter","nextTeamNewTripSet","updated","updateTeams","reduce","acc","importJobs","jobs","job","firstTrip","uniqueId","secondTrip","teamByKey","mapValues","keyBy","tripsByKey","groupBy","fromPairs","forEach","updateTrip","updates","keys","markTripSMSSent","lastSMSTimestamp","deleteTrip","syncDeleteTrip","_setMode","_disableSaves","_enableSaves","_setTrips","_setSchedules","_autoUpdateTrips","Error","actions","setMode","context","currentMode","template","teamsPromise","readTeams","tripsPromise","readTrips","promise","Promise","all","then","initialTeams","dispatch","pushModeToHistory","autoUpdateTrips","tripsRelPath","replace","teamsRelPath","getRelPath","_setTripsAndTeams","schedules","tripsById","date","serializeArray","deserializeArray","sortBy","k","parseInt","intKey","isFinite","console","error","once","parseTeamsData","val","teamRaw","generateSchedule","teamsToPrepend","newTeams","concat","arrayOfTrips","last","sortedTrips","conflictsWith","a","b","min","max","nonConflicting","find","tripsInRow","lastTrip","triggerSend","refPath","dataSent","backlog","catch","submitUpdates","getPendingTripUpdates","parseLatLng","lat","parseFloat","lng","parseTripsData","tripRaw","description","startPostcode","endPostcode","startAddress","endAddress","startLocation","endLocation","startLatLng","endLatLng","isTentative","relatedTrip","hideFromManifest","isReturnTrip","price","cancelled","created","templateTrip","messages","dateString","history","pushState","stringify","lastTimestamp","initializeHashWatch","store","dateHash","hash","parse","location","substring","getTime","handleNewDateHash","addEventListener","nativeOn","onScroll","screenWidth","chartAreaWidth","yAxisWidth","chartAreaHeight","xAxisHeight","_l","_","range","style","left","scale","bottom","position","width","scrollToTime","directives","rawName","tripEditing","tripBeingEdited","tripClicked","onDragStart","onDragEnd","dragIndex","right","height","top","onDrop","onDragOver","destinationIndex","vehiclesById","$attrs","_t","stale","singaporeColors","vehicles","persons","personArray","setVehicles","setPersons","updatePerson","person","syncPerson","deletePerson","rest","syncDeletePerson","vehicleStatusIsStale","status","MAX_LAT","MAX_LNG","MIN_LAT","MIN_LNG","getColor","latLng","scaleAndClamp","round","toHex","red","green","blue","$listeners","registrationNumber","vehicleStatus","sAgo","extend","computed","component","placeholder","String","default","components","VehicleTooltip","Number","required","Array","VehicleLabel","isDragging","methods","handleMove","$data","draggedContext","futureIndex","handleInput","e","dataTransfer","effectAllowed","dropEffect","setData","types","includes","preventDefault","mounted","interval","setInterval","$on","clearInterval","onDragLeave","drag","start","end","getData","scrollLeft","scrollTop","showTime","Boolean","provide","xScale","yScale","updateScrollOffsets","$refs","contentElem","scrollTo","event","y","computeRelativeYPosition","scrollRef","originalRow","x","computeRelativeXPosition","draggedTime","xPositionToNearestTick","offsetX","abs","tripToMove","destinationTeam","newStartTime","newEndTime","rootElement","node","target","getBoundingClientRect","offsetY","rowHeight","unassignedTeamData","first","firstIndex","lastIndex","columnWidth","time","innerWidth","scrollTime","setWidth","setScrollTime","msSinceMidnight","setHours","updateTime","showDialogWithProps","dialog","hideDialog","rootState","editTrip","updateTripBeingEdited","root","createAndEditNewTripAtTime","templates","_setTemplates","_updateTemplate","_deleteTemplate","readTemplates","updateTemplate","syncTemplate","deleteTemplate","syncDeleteTemplate","raw","signInWithPopup","provider","updateUser","Store","screen","presumedDuration","yIndexFunction","opacity","locationGradient","color","isSelected","$emit","slot","showTooltip","showTooltipIfMouseNotDown","buttons","inject","Function","UnobstrusiveTooltip","tooltipNeeded","noUpdatesSinceSMS","_obj","vehicleData","yIndex","isStale","leftPosition","topPosition","timeSinceMidnight","getHours","getMinutes","getSeconds","currentTimeOffset","boundedTime","centreX","centreY","VISUAL_CENTER","tripKey","CurrentTime","HorizontalGridLines","PlannerChart","TimeUpdater","TeamList","TripBar","VehicleMarker","VerticalGridLines","watch","$nextTick","scrollToCurrentTime","scrollHelper","currentTime","midnight","timeOffset","myWidth","$el","clientWidth","timePosition","scrollPosition","scrollABit","diff","setTimeout","alignedStartTime","rowNumber","wantToSendMessage","historyShown","hasValidReturnTrip","createReturnTrip","visitRelatedTrip","reassignTripToTeam","address","omit","domProps","convertFromTime","convertToTime","TIME_REGEX","hours","minutes","matches","match","emptyTripKey","withNull","label","maybeEmitPostcode","updateQuery","PRESET_LOCATIONS","NTF","NTFGH","KTPH","SGH","CGH","TTSH","SKH","AH","NUH","IMH","KKH","results","bestResult","minBy","POSTAL","ADDRESS","LATITUDE","LONGITUDE","postalCode","fakeOneMapSearch","query","resolve","upperCaseQuery","toUpperCase","fetch","searchVal","returnGeom","getAddrDetails","pageNum","actualQuery","lastKnownPostcode","$updateQueryDebounced","debounce","updateQueryImpl","triggerOneMapSearch","cancel","$oneMapPromise","message","formatDate","recipients","join","parseMessages","messagesRaw","orderBy","entries","f","av","split","createMessage","update","loadByTripId","$inflightPromise","orderByChild","equalTo","w","TimeEditor","PostcodePicker","TeamsSelect","MessageHistory","deleteAllowed","relatedTripId","condenseAddress","condense","removeIndent","tripPart","cancelledPart","startAddressPart","endAddressPart","makeDate","datePart","addressee","returnTrip","returnTripInfo","messageLabel","tripRecipientPhoneNumbers","driverPerson","medicPerson","field","timestampText","model","callback","$$v","isOpen","expression","timestampISO","handleDateInput","_m","showHiddenTrips","dateformat","unsortedTrips","arr","ManifestComponent","refInFor","teamHasTrips","dropTeam","editor","staffList","blur","updateTeam","errors","newTeam","maybeCreateTeam","isEditing","disabled","handleFocus","el","editorDiv","focusable","querySelector","telephone","showMenu","activator","composing","searchInput","handleShowMenu","handleBlur","indexOf","_k","keyCode","selectNext","altKey","selectPrev","selectCurrent","item","active","handleClick","items","listItems","searchLowerCase","lowerCaseItems","si","text","itemsByValue","selection","blurTimeout","$watch","immediate","selectionItems","children","parentElement","offsetTop","handleSelect","focusBack","log","relatedTarget","HTMLElement","isDescendentOf","inputParent","clearTimeout","myinput","focus","notify","current","handleDialogInput","title","defaultList","EditingCell","EditingDropdown","PersonView","StandardDialog","VehicleView","inp","handleMemberDrag","member","handleVehicleDrag","createNewTeam","known","teamExists","flashError","sum","notInIndex","existingTeam","wrapper","teamsGrid","dataset","inputs","querySelectorAll","dropPerson","maybeCreatePerson","newPerson","$set","unhandledListeners","change","input","reference","EditingTextField","personList","personByLowercaseKey","dialogShown","confirm","personExists","personsGrid","maxTime","currentPage","loadMore","unwatch","isWatching","handler","off","MessageStatusChecker","loadData","$messageClient","lastId","filteredRef","endAt","limitToLast","hasPersonsMissingPhoneNumbers","sendMessageAndClose","messager","select","selectedTemplateId","startEditingTemplate","handleDeleteClick","insertTemplate","newTemplate","addTemplateJobsToSchedule","scheduleHasTrip","scrollToTrip","templateToScheduledTrip","addTripToSchedule","previewTrips","templateId","updatePreview","selectedDate","preview","handleImport","teamsById","teamsToAdd","re","parseDate","parts","direction","speed","relPath","$tripsCallback","updateWithBacklog","pendingUpdates","$teamsCallback","newValue","oldValue","opts","JOBS","toTime","padded","hour","minute","UTC","getFullYear","getMonth","getDate","templateMetadata","ChartArea","DatePicker","DraftMessageDialog","ImportTeamsDialog","ManifestDialog","MessagesDialog","PersonsDialog","PrintableManifest","TeamsDialog","TemplatesDialog","TripEditor","TripsSync","VehiclesSync","dialogName","delayedTime","alignedTime","ceil","sameDate","d1n","d2","d1","targetMode","errorReading","loggedInUser","signInGoogle","isLoggedIn","testAuth","unsubscribe","onAuthStateChanged","email","GoogleAuthProvider","addScope","App","RequiresLogin","googleMapsApiKey","productionTip","load","libraries","directive","draggable","render","h","$mount"],"mappings":"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","file":"js/index.8d767ae9.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"index\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/ams-bookings-planner/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TripBar.vue?vue&type=style&index=0&id=2a885415&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TripBar.vue?vue&type=style&index=0&id=2a885415&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VehicleLabel.vue?vue&type=style&index=0&id=4aa47725&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VehicleLabel.vue?vue&type=style&index=0&id=4aa47725&lang=scss&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImportTeams.vue?vue&type=style&index=0&id=76f0c2a5&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImportTeams.vue?vue&type=style&index=0&id=76f0c2a5&scoped=true&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Teams.vue?vue&type=style&index=0&id=cae8e4be&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Teams.vue?vue&type=style&index=0&id=cae8e4be&scoped=true&lang=scss&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlannerChart.vue?vue&type=style&index=0&id=686ff501&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlannerChart.vue?vue&type=style&index=0&id=686ff501&lang=scss&scoped=true&\"","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=1&id=07166cc9&lang=scss&scoped=true&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=1&id=07166cc9&lang=scss&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Manifest.vue?vue&type=style&index=0&id=31069700&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Manifest.vue?vue&type=style&index=0&id=31069700&scoped=true&lang=scss&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditingDropdown.vue?vue&type=style&index=0&id=42201d8d&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditingDropdown.vue?vue&type=style&index=0&id=42201d8d&lang=scss&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageHistory.vue?vue&type=style&index=0&id=28672314&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageHistory.vue?vue&type=style&index=0&id=28672314&scoped=true&lang=scss&\"","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TeamList.vue?vue&type=style&index=0&id=6d396108&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TeamList.vue?vue&type=style&index=0&id=6d396108&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditingTextField.vue?vue&type=style&index=0&id=32b07e69&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditingTextField.vue?vue&type=style&index=0&id=32b07e69&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditingCell.vue?vue&type=style&index=0&id=46fffcd8&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditingCell.vue?vue&type=style&index=0&id=46fffcd8&lang=scss&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DraftMessage.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DraftMessage.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageStatusChecker.vue?vue&type=style&index=0&id=47102bcc&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageStatusChecker.vue?vue&type=style&index=0&id=47102bcc&lang=scss&scoped=true&\"","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./RequiresLogin.vue?vue&type=style&index=0&id=d36fc7c8&scoped=true&lang=scss&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./RequiresLogin.vue?vue&type=style&index=0&id=d36fc7c8&scoped=true&lang=scss&\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH5AEECDE3g/C+1gAAAm5JREFUOMutlMtL1FEUxz/3/ubhiIRpNmpDjo0R9CBqFS0Uk5DayKANuBaVSg2nzARp5UbFASGVDEFKEiZFRGoT6t/gwlWIJuIDn9jkzG8ev9tiSnyUls2Buzrnfu75nnPugUTbQE1iWWKghjzAa8QwK4U6EUkgNI0I4DMBn5XC6ci7ZiQln5L/jBSgBwMszEwhBPdMUmrONLuTjZWv0l3ZgbQkgfpLqhAQizHyxktGtouNlTmnVMqguLyZtLM5+LseEdxeB2WAETv6KAM9sIX/1UNS07MpLm9GKQMJEAkHKSx7Rkb2RUb7GoiGQ8cmZ8SijPY9Jz0zl8KyBiLhIEAcGI8wKPK8ICvnKiO9XvRQwEDsutVemZFwiJHeuMwiTyMYxq5bHniWAk8jdsclPnTVEgps7np+QSN6kOHXT0g946CwvHkf7DAQQA+SX1LHhcu35Fh/E+HQdxBCQwhhGDHG+pvIOn+FO6VPQQ8eui5/Vx+lDCJhnWg0wlBPLTvb6+g73xjqrkXf2T6ytoeBVhsTwx0szU/jedyNw3VDfXzbzKd3L0nPzOVBTQ9L89NMDHeA1XYMUEomB1vYWlugtLoTzWQh310vzrlukmZ3UuRpxGS2UlrdydbaApODLSDlH4BSMu5vZXVxBneVD7MlKd6HWJTb96socNfHG6AUZksS7iofq4szjPtb90ElgNliY3KonfXlWUoq2pCa6cDQ/Rz0vZloJkoq2lhfnmVyqB2zJS5fvK/TVJrdyU5gE3elDzTtRF8vOeU0GytziIEaZpXC6XBdx2pL4T+Xw5wJuCsE3vkvU2YSsL4SvmATbj8Ap8IMoZKaQv4AAAAASUVORK5CYII=\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UnobstrusiveTooltip.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UnobstrusiveTooltip.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TripEditor.vue?vue&type=style&index=0&id=07841563&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TripEditor.vue?vue&type=style&index=0&id=07841563&scoped=true&lang=scss&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PersonView.vue?vue&type=style&index=0&id=f8c2c1e6&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PersonView.vue?vue&type=style&index=0&id=f8c2c1e6&lang=scss&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Persons.vue?vue&type=style&index=0&id=ab70a566&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Persons.vue?vue&type=style&index=0&id=ab70a566&scoped=true&lang=scss&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VehicleMarker.vue?vue&type=style&index=0&id=7a6519c4&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VehicleMarker.vue?vue&type=style&index=0&id=7a6519c4&lang=scss&scoped=true&\"","import Vue from 'vue'\r\nimport Vuex from 'vuex'\r\n\r\nVue.use(Vuex)\r\n\r\nexport default Vue\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',{staticClass:\"app\"},[_c('RequiresLogin',[_c('App')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-layout',{staticClass:\"app-app\",attrs:{\"column\":\"\"}},[_c('v-layout',{staticClass:\"controls\",class:{\n        'app-showing-template': _vm.$store.state.trips.mode.type === 'template',\n        'hidden-in-print': true,\n      },attrs:{\"row\":\"\"}},[(_vm.$store.state.trips.mode.type === 'date')?_c('DatePicker',{staticStyle:{\"flex\":\"0 0 100px\"}}):_vm._e(),(_vm.$store.state.trips.mode.type === 'template')?_c('h2',[_c('v-icon',{on:{\"click\":function($event){return _vm.goBack()}}},[_vm._v(\"chevron_left\")]),_vm._v(\" \"+_vm._s(_vm.templateName)+\" \")],1):_vm._e(),_c('v-spacer'),_c('div',[_vm._v(\" \"+_vm._s(_vm.$store.state.login.user)+\" \")]),_c('v-btn',{on:{\"click\":function($event){return _vm.showDialog('manifest')}}},[_vm._v(\" Show Manifest \")]),_c('v-menu',{attrs:{\"offset-y\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\n      var on = ref.on;\nreturn [_c('v-btn',_vm._g({},on),[_c('v-icon',[_vm._v(\"settings\")])],1)]}}])},[_c('v-list',[_c('v-list-tile',{on:{\"click\":function($event){return _vm.showDialog('teams')}}},[_vm._v(\" Teams \")]),_c('v-list-tile',{on:{\"click\":function($event){return _vm.showDialog('persons')}}},[_vm._v(\" Individuals \")]),_c('v-list-tile',{on:{\"click\":function($event){return _vm.showDialog('templates')}}},[_vm._v(\" Job templates \")]),_c('v-list-tile',{on:{\"click\":function($event){return _vm.showDialog('messages')}}},[_vm._v(\" SMS History \")]),_c('v-divider'),_c('v-list-tile',{on:{\"click\":function($event){return _vm.signOut()}}},[_vm._v(\" Sign out \")])],1)],1)],1),_c('TripEditor',{staticClass:\"trip-editor-window hidden-in-print\"}),_c('ChartArea',{ref:\"chart-area\",staticClass:\"chart-area hidden-in-print\",attrs:{\"xAxisScale\":_vm.xAxisScale,\"yAxisScale\":_vm.yAxisScale},on:{\"trip-clicked\":function($event){return _vm.$store.commit('tripEditing/editTrip', $event)}}}),_c('v-btn',{staticClass:\"hidden-in-print\",staticStyle:{\"bottom\":\"1em\",\"right\":\"2em\",\"position\":\"absolute\"},attrs:{\"dark\":\"\",\"fab\":\"\",\"color\":\"pink\"},on:{\"click\":_vm.createNewTrip}},[_c('v-icon',[_vm._v(\"add\")])],1),_c('TimeUpdater'),_c('VehiclesSync'),_c('TripsSync'),_c('PrintableManifest'),(_vm.$store.state.dialogs.activeDialog === 'teams')?_c('TeamsDialog'):(_vm.$store.state.dialogs.activeDialog === 'persons')?_c('PersonsDialog'):(_vm.$store.state.dialogs.activeDialog === 'manifest')?_c('ManifestDialog'):(_vm.$store.state.dialogs.activeDialog === 'messages')?_c('MessagesDialog'):(_vm.$store.state.dialogs.activeDialog === 'draftMessage')?_c('DraftMessageDialog',_vm._b({},'DraftMessageDialog',_vm.$store.state.dialogs.props,false)):(_vm.$store.state.dialogs.activeDialog === 'importTeams')?_c('ImportTeamsDialog'):(_vm.$store.state.dialogs.activeDialog === 'templates')?_c('TemplatesDialog'):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\r\nexport interface KeyableTrip {\r\n  driver: string | null,\r\n  medic: string | null,\r\n}\r\n\r\nexport type Team = KeyableTrip & {\r\n  vehicle: string | null,\r\n}\r\n\r\nexport interface LatLng {lat: number, lng: number}\r\n\r\nexport interface JobBase {\r\n  description: string,\r\n  cancelled: boolean\r\n}\r\n\r\nexport type Trip = JobBase & {\r\n  driver: string | null,\r\n  medic: string | null,\r\n  startTime: number,\r\n  endTime: number | null,\r\n  id: string,\r\n\r\n  isTentative: boolean,\r\n  relatedTrip: string | null,\r\n  isReturnTrip: boolean,\r\n  hideFromManifest: boolean,\r\n  lastSMSTimestamp: number | null,\r\n\r\n  startPostcode: string | null,\r\n  endPostcode: string | null,\r\n  startAddress: string | null,\r\n  endAddress: string | null,\r\n  startLocation: string | null,\r\n  endLocation: string | null,\r\n  startLatLng: LatLng | null,\r\n  endLatLng: LatLng | null,\r\n\r\n  created: number,\r\n  updated: number,\r\n  templateTrip: string | null,\r\n}\r\nexport interface Job {\r\n  trip: Trip,\r\n  secondTrip: Trip | null,\r\n  type: string,\r\n  price: number | null,\r\n  description: string,\r\n  cancelled: boolean\r\n}\r\n\r\nexport const imputedEndTime = (trip: Trip) =>\r\n  trip.endTime || ((trip.startTime || 0) + 30 * 60e3)\r\n","\r\nexport default function () {\r\n  return Date.now().toString(35).padStart(10, 'z') +\r\n    Math.floor(Math.random() * 2e9).toString(35).padStart(7, 'z')\r\n}","import firebase from 'firebase/app'\r\nimport 'firebase/database'\r\nimport 'firebase/auth'\r\n\r\nconst config = {\r\n  apiKey: \"AIzaSyD13f_m0clyvTunsWRoyvhmBF1r5Lrqt4w\",\r\n  authDomain: \"ams-bookings-planner.firebaseapp.com\",\r\n  databaseURL: \"https://ams-bookings-planner.firebaseio.com\",\r\n  projectId: \"ams-bookings-planner\",\r\n  storageBucket: \"ams-bookings-planner.appspot.com\",\r\n  messagingSenderId: \"553699052004\"\r\n}\r\nfirebase.initializeApp(config)\r\n\r\nexport const db = firebase.database()\r\nexport const auth = firebase.auth()\r\n","import {Job, Team, KeyableTrip, LatLng, imputedEndTime, Trip} from '@/lib/types'\r\nimport _ from 'lodash'\r\nimport uniqueId from '@/lib/uniqueId';\r\nimport assert from 'assert'\r\nimport {db} from '@/lib/firebase'\r\nimport * as firebase from 'firebase/app'\r\nimport dateformat from 'dateformat';\r\nimport querystring from 'querystring';\r\nimport Vue from 'vue';\r\nimport { pushModeToHistory } from '@/store/modes';\r\n\r\nfunction makeTripTeamKey(trip: KeyableTrip) {\r\n  if (!trip) return null\r\n  if (trip.driver && trip.medic) {\r\n    return trip.driver.toString().trim().toLowerCase() +\r\n      ' ' +\r\n      trip.medic.toString().trim().toLowerCase()\r\n  } else if (trip.driver) {\r\n    return trip.driver.toString().trim().toLowerCase()\r\n  } else if (trip.medic) {\r\n    return trip.medic.toString().trim().toLowerCase()\r\n  } else {\r\n    return null\r\n  }\r\n}\r\n\r\nexport function tripKey (trip: KeyableTrip) {\r\n  const key = makeTripTeamKey(trip)\r\n  return 'x' + (key || '')\r\n}\r\n\r\n/**\r\n * State contains duplication -- e.g. teams are\r\n * repeated in both the array (whence we derive\r\n * sort order) and in the map (for quick lookups).\r\n *\r\n * The mutations / actions are required to safeguard\r\n * modifications to ensure optimized accesses.\r\n */\r\ntype ScheduleData = {\r\n  rows: string[][],\r\n}\r\nexport type ProcessedScheduleData = {\r\n  trips: Trip[],\r\n  // tripIndices: number[],\r\n  row: number,\r\n  rowCount: number,\r\n}\r\n\r\nexport type ScheduleByTeam = {\r\n  [key: string]: ScheduleData\r\n}\r\n\r\nexport type AppMode = {\r\n  type: 'date',\r\n  timestamp: number,\r\n} | {\r\n  type: 'template',\r\n  template: string,\r\n  lastTimestamp: number,\r\n}\r\n\r\nexport type AutoUpdateTrips = {\r\n  teams: Team[],\r\n  teamsKey: string,\r\n} | {\r\n  trips: Trip[],\r\n  tripsKey: string,\r\n}\r\n\r\nexport interface TripsState {\r\n  scheduleByTeam: ScheduleByTeam,\r\n  teams: Team[],\r\n  trips: {[key: string]: Trip},\r\n  // Only to be used when switching between dates, for example.\r\n  // because when switching between dates, there as in ambiguity\r\n  // while requests are in flight as to which is the *current* day\r\n  savesDisabled: Boolean,\r\n  inFlightPromise: Promise<any> | null,\r\n\r\n  autoUpdate: {\r\n    teams: Team[],\r\n    teamsKey: string,\r\n    trips: Trip[],\r\n    tripsKey: string,\r\n  },\r\n\r\n  mode: AppMode,\r\n}\r\n\r\nexport const BLANK_KEY = tripKey({driver: null, medic: null})\r\n\r\nexport default {\r\n  namespaced: true,\r\n\r\n  state (): TripsState {\r\n    return {\r\n      scheduleByTeam: {},\r\n      teams: [],\r\n      savesDisabled: false,\r\n      mode: {\r\n        type: 'date',\r\n        timestamp: Date.now(),\r\n      },\r\n      inFlightPromise: null,\r\n      autoUpdate: {\r\n        teams: [],\r\n        trips: [],\r\n        teamsKey: 'a',\r\n        tripsKey: 'b',\r\n      },\r\n      trips: {},\r\n    }\r\n  },\r\n\r\n  getters: {\r\n    trips (state: TripsState) {\r\n      return _.flatMap(\r\n        Object.values(state.scheduleByTeam),\r\n        (v: ScheduleData) => _.flatMap(\r\n          v.rows,\r\n          tripIds => tripIds.map(tripId => state.trips[tripId])\r\n        )\r\n      )\r\n    },\r\n\r\n    rowCount (state: TripsState) {\r\n      return _.sumBy(\r\n        state.teams,\r\n        team => state.scheduleByTeam[tripKey(team)]\r\n          ? state.scheduleByTeam[tripKey(team)].rows.length\r\n          : 0\r\n        )\r\n    },\r\n\r\n    teamIndexForRow (state: TripsState): ((i: number) => number | null) {\r\n      return (i: number) => {\r\n        let offset = 0\r\n        let index = 0\r\n        for (let team of state.teams) {\r\n          const rows = state.scheduleByTeam[tripKey(team)].rows\r\n          if (i < offset + rows.length) {\r\n            return index\r\n          }\r\n          offset += rows.length\r\n          index += 1\r\n        }\r\n        return null\r\n      }\r\n    },\r\n\r\n    teamForRow (state: TripsState): (i: number) => Team | null {\r\n      return (i: number) => {\r\n        let offset = 0\r\n        for (let team of state.teams) {\r\n          const rows = state.scheduleByTeam[tripKey(team)].rows\r\n          if (i < offset + rows.length) {\r\n            return team\r\n          }\r\n          offset += rows.length\r\n        }\r\n        return null\r\n      }\r\n    },\r\n\r\n    canonicalOffsetForRow (state: TripsState): (i: number) => number | null {\r\n      return (i: number) => {\r\n        let offset = 0\r\n        for (let team of state.teams) {\r\n          const rows = state.scheduleByTeam[tripKey(team)].rows\r\n          if (i < offset + rows.length) {\r\n            return offset\r\n          }\r\n          offset += rows.length\r\n        }\r\n        return null\r\n      }\r\n    },\r\n\r\n    teamSchedules (state: TripsState): [KeyableTrip, ProcessedScheduleData][] {\r\n      const s = _.flatMap(\r\n        state.teams,\r\n        (team: Team) => {\r\n          const key = tripKey(team)\r\n          const schedule = state.scheduleByTeam[key] || {trips: [], rows: [[]]}\r\n\r\n          return schedule.rows.map((tripIds: string[], rowIndex: number): [KeyableTrip, ProcessedScheduleData] => [\r\n            team,\r\n            {\r\n              trips: tripIds.map(tripId => state.trips[tripId]),\r\n              // tripIndices: indices,\r\n              row: rowIndex,\r\n              rowCount: schedule.rows.length,\r\n            }\r\n          ])\r\n        })\r\n      return s\r\n    },\r\n  },\r\n\r\n  mutations: {\r\n    reorderTeam (state: TripsState, options: {oldIndex: number, newIndex: number}) {\r\n      if (state.savesDisabled) return\r\n\r\n      const {oldIndex, newIndex} = options\r\n\r\n      if (oldIndex === newIndex) return\r\n      else if (oldIndex < newIndex) {\r\n        const spliced = state.teams.splice(options.oldIndex, 1)\r\n        state.teams.splice(options.newIndex - 1, 0, ...spliced)\r\n      } else {\r\n        const spliced = state.teams.splice(options.oldIndex, 1)\r\n        state.teams.splice(options.newIndex, 0, ...spliced)\r\n      }\r\n      syncTeams(state.mode, state.teams)\r\n    },\r\n\r\n    assignNewlyCreatedJob (state: TripsState, options: {trip: Trip}) {\r\n      if (state.savesDisabled) return\r\n\r\n      const {trip} = options\r\n      const toSchedule = state.scheduleByTeam[tripKey(trip)]\r\n\r\n      // If team doesn't exist, create the team?\r\n      if (toSchedule) {\r\n        toSchedule.rows = packTrips(\r\n          _.flatten(toSchedule.rows)\r\n            .map(tripId => state.trips[tripId])\r\n        )\r\n      } else {\r\n        const team = {\r\n          driver: trip.driver,\r\n          medic: trip.medic,\r\n          vehicle: null,\r\n        }\r\n        state.teams.splice(0, 0, team)\r\n        Vue.set(state.scheduleByTeam, tripKey(team), {\r\n          rows: [[trip.id]],\r\n        })\r\n      }\r\n\r\n      syncTrip(state.mode, trip)\r\n    },\r\n\r\n    reassignJob (state: TripsState, options: {trip: Trip, team: KeyableTrip | null}) {\r\n      if (state.savesDisabled) return\r\n      if (options.team === null) return\r\n\r\n      const fromKey = tripKey(options.trip)\r\n      const toKey = tripKey(options.team)\r\n\r\n      const fromSchedule = state.scheduleByTeam[fromKey]\r\n      let toSchedule = state.scheduleByTeam[toKey]\r\n\r\n      assert(fromSchedule, 'Trip does not exist in From')\r\n      // Special case: we can *always* unassign a job\r\n      // So if (null, null) is missing, recreate it\r\n      if (!toSchedule) {\r\n        if (toKey !== BLANK_KEY) {\r\n          assert(toSchedule, 'Trip does not exist in To')\r\n        } else {\r\n          toSchedule = state.scheduleByTeam[BLANK_KEY] = {\r\n            rows: [[options.trip.id]]\r\n          }\r\n          state.teams.splice(0, 0, {driver: null, medic: null, vehicle: null})\r\n        }\r\n      }\r\n\r\n      // splice the trip\r\n      const prevTeamNewTripSet = _.flatten(fromSchedule.rows)\r\n        .filter(tripId => tripId !== options.trip.id)\r\n        .map(tripId => state.trips[tripId])\r\n      fromSchedule.rows = packTrips(prevTeamNewTripSet)\r\n\r\n      // re-insert\r\n      const nextTeamNewTripSet = _.flatten(toSchedule.rows)\r\n        .map(tripId => state.trips[tripId])\r\n\r\n      const trip = {\r\n        ...options.trip,\r\n        driver: options.team.driver,\r\n        medic: options.team.medic,\r\n        updated: Date.now(),\r\n      }\r\n\r\n      toSchedule.rows = packTrips([\r\n        ...nextTeamNewTripSet,\r\n        trip\r\n      ])\r\n\r\n      syncTrip(state.mode, trip)\r\n    },\r\n\r\n    updateTeams (state: TripsState, teams: Team[]) {\r\n      // FIXME: add checks to ensure teams don't disappear\r\n      // and are not duplicated\r\n      state.teams = teams\r\n      state.scheduleByTeam = teams.reduce(\r\n        (acc, v) => {\r\n          const key = tripKey(v)\r\n          acc[key] = state.scheduleByTeam[key] || {\r\n            trips: [],\r\n            rows: [[]],\r\n          }\r\n          return acc\r\n        },\r\n        {} as ScheduleByTeam\r\n      )\r\n      if (!state.savesDisabled) {\r\n        syncTeams(state.mode, state.teams)\r\n      }\r\n    },\r\n\r\n    importJobs (state: TripsState, jobs: Job[]) {\r\n      // Jobs can be one-way / two-way\r\n      const trips = _.flatten(jobs.map(job => {\r\n        const firstTrip = job.trip && {id: uniqueId(), ...job, ...job.trip}\r\n        const secondTrip = job.secondTrip && {id: uniqueId(), ...job, ...job.secondTrip}\r\n\r\n        if (firstTrip && secondTrip) return [firstTrip, secondTrip] as Trip[]\r\n        else if (firstTrip || secondTrip) return [(firstTrip || secondTrip)] as Trip[]\r\n        else return [] as Trip[]\r\n      }))\r\n\r\n      const teamByKey = _.mapValues(\r\n        _.keyBy(\r\n          trips,\r\n          tripKey\r\n        ) as {[k: string]: Trip},\r\n        (trip: Trip) => ({ driver: trip.driver, medic: trip.medic, vehicle: null })\r\n      )\r\n\r\n      const tripsByKey = _.groupBy(\r\n        trips,\r\n        tripKey\r\n      ) as {[k: string]: Trip[]}\r\n\r\n      state.teams = _.values(teamByKey).map(s => ({...s, vehicle: null}))\r\n      state.scheduleByTeam = _.fromPairs(\r\n        state.teams.map(team => {\r\n          const key = tripKey(team)\r\n          return [\r\n            key,\r\n            {\r\n              trips: tripsByKey[key],\r\n              rows: packTrips(tripsByKey[key]),\r\n            }\r\n          ]\r\n        })\r\n      )\r\n      // syncSchedules(date, state.scheduleByTeam)\r\n      syncTeams(state.mode, state.teams)\r\n      _.values(tripsByKey).forEach((trips: Trip[]) => {\r\n        trips.forEach(trip => {\r\n          syncTrip(state.mode, trip)\r\n        })\r\n      })\r\n    },\r\n\r\n    updateTrip (\r\n      state: TripsState,\r\n      options: {tripId: string, updates: {[key: string]: any}}\r\n    ) {\r\n      assert(!('driver' in options.updates))\r\n      assert(!('medic' in options.updates))\r\n\r\n      const trip: any = state.trips[options.tripId]\r\n      const schedule: ScheduleData = state.scheduleByTeam[tripKey(trip)]\r\n\r\n      assert(trip)\r\n\r\n      for (let key of Object.keys(options.updates)) {\r\n        trip[key] = options.updates[key]\r\n      }\r\n      trip.updated = Date.now()\r\n\r\n      if ('startTime' in options.updates || 'endTime' in options.updates) {\r\n        schedule.rows = packTrips(_.flatten(schedule.rows).map(tripId => state.trips[tripId]))\r\n      }\r\n\r\n      if (!state.savesDisabled) {\r\n        // FIXME: This is bad form! -- async actions\r\n        // on global state inside a synchronous fn\r\n        // FIXME: debounce this somewhat.../\r\n        syncTrip(state.mode, trip)\r\n      }\r\n    },\r\n\r\n    markTripSMSSent(state: TripsState, options: {tripId: string}) {\r\n      const trip: any = state.trips[options.tripId]\r\n      trip.lastSMSTimestamp = Date.now()\r\n      syncTrip(state.mode, trip)\r\n    },\r\n\r\n    deleteTrip(state: TripsState, options: {tripId: string}) {\r\n      const trip: any = state.trips[options.tripId]\r\n      const schedule: ScheduleData = state.scheduleByTeam[tripKey(trip)]\r\n\r\n      schedule.rows = packTrips(\r\n        _.flatten(schedule.rows)\r\n          .filter(tripId => tripId !== trip.id)\r\n          .map(tripId => state.trips[tripId])\r\n      )\r\n      syncDeleteTrip(state.mode, trip)\r\n    },\r\n\r\n    _setMode(state: TripsState, mode: AppMode) {\r\n      state.mode = mode\r\n    },\r\n\r\n    _disableSaves (state: TripsState, data: any) {\r\n      state.savesDisabled = true\r\n      state.inFlightPromise = data\r\n    },\r\n\r\n    _enableSaves (state: TripsState) {\r\n      state.savesDisabled = false\r\n    },\r\n\r\n    _setTrips(state: TripsState, trips: {[key: string]: Trip}) {\r\n      state.trips = trips\r\n    },\r\n\r\n    _setSchedules(state: TripsState, schedule: ScheduleByTeam) {\r\n      state.scheduleByTeam = schedule\r\n      state.inFlightPromise = null\r\n    },\r\n\r\n    _autoUpdateTrips(state: TripsState, options: AutoUpdateTrips) {\r\n      if ('teams' in options) {\r\n        state.autoUpdate.teams = options.teams\r\n        state.autoUpdate.teamsKey = options.teamsKey\r\n      } else if ('trips' in options) {\r\n        state.autoUpdate.trips = options.trips\r\n        state.autoUpdate.tripsKey = options.tripsKey\r\n      } else {\r\n        throw new Error('unexpected value for options')\r\n      }\r\n    }\r\n  },\r\n\r\n  actions: {\r\n    setMode(context: any, mode: AppMode) {\r\n      const state = context.state as TripsState\r\n      const currentMode = state.mode\r\n\r\n      if (currentMode.type === 'date' && mode.type === 'date') {\r\n        if (currentMode.timestamp === mode.timestamp) {\r\n          return\r\n        }\r\n      } else if (currentMode.type === 'template' && mode.type === 'template') {\r\n        if (currentMode.template === mode.template) {\r\n          return\r\n        }\r\n      }\r\n\r\n      const teamsPromise = readTeams(mode)\r\n      const tripsPromise = readTrips(mode)\r\n\r\n      const promise = Promise.all([\r\n        teamsPromise, tripsPromise\r\n      ])\r\n      .then(([initialTeams, trips]) => {\r\n        if (promise == state.inFlightPromise) {\r\n          context.dispatch('_setTripsAndTeams', {teams: initialTeams, trips, mode})\r\n          pushModeToHistory(mode)\r\n        }\r\n      })\r\n\r\n      context.commit('_disableSaves', promise)\r\n    },\r\n\r\n    // Updates the current trips and team, if both\r\n    // are synced to the current mode\r\n    autoUpdateTrips(context: any, options: AutoUpdateTrips) {\r\n      context.commit('_autoUpdateTrips', options)\r\n\r\n      const tripsRelPath = context.state.autoUpdate.tripsKey.replace(/^\\/trips\\//, '')\r\n      const teamsRelPath = context.state.autoUpdate.teamsKey.replace(/^\\/trips\\//, '')\r\n\r\n      if (\r\n        tripsRelPath === teamsRelPath &&\r\n        getRelPath(context.state.mode) === tripsRelPath\r\n      ) {\r\n        context.dispatch('_setTripsAndTeams', {\r\n          trips: context.state.autoUpdate.trips,\r\n          teams: context.state.autoUpdate.teams,\r\n          mode: context.state.mode,\r\n        })\r\n      }\r\n    },\r\n\r\n    _setTripsAndTeams(context: any, options: {teams: Team[], trips: Trip[], mode: AppMode}) {\r\n      const [teams, schedules, tripsById] = generateSchedule(options.teams, options.trips)\r\n      context.commit('updateTeams', teams)\r\n      // context.commit('') // No trips to commit?\r\n      context.commit('_setTrips', tripsById)\r\n      context.commit('_setSchedules', schedules)\r\n      context.commit('_setMode', options.mode)\r\n      context.commit('_enableSaves')\r\n    }\r\n  }\r\n}\r\n\r\nexport function getRelPath(mode: AppMode): string {\r\n  if (mode.type === 'date') {\r\n    return formatDate(new Date(mode.timestamp))\r\n  } else {\r\n    return mode.template\r\n  }\r\n}\r\n\r\nexport function formatDate(date: Date) {\r\n  return dateformat(date, 'yyyy-mm-dd')\r\n}\r\n\r\nfunction syncTeams(mode: AppMode, teams: KeyableTrip[]) {\r\n  db.ref(`/teams/${getRelPath(mode)}`)\r\n    .set(serializeArray(teams))\r\n}\r\n\r\nfunction serializeArray<T>(o: T[]): {[key: string]: T} {\r\n  return o.reduce(\r\n    (acc, v, index) => {\r\n      acc[index.toString().padStart(9, '0')] = v\r\n      return acc\r\n    },\r\n    {} as {[key: string]: T}\r\n  )\r\n}\r\n\r\nexport function deserializeArray(o: {[key: string]: any}): any[] {\r\n  const keys = _.sortBy(\r\n    Object.keys(o)\r\n    .map((k: string): [string, number] => [k, parseInt(k)])\r\n    .filter(([key, intKey]) => {\r\n      if (!isFinite(intKey)) {\r\n        console.error(`Encountered non-integer key ${key}`)\r\n        return false\r\n      }\r\n      return true\r\n    }),\r\n    s => s[1]\r\n  )\r\n\r\n  return keys.map(s => o[s[0]])\r\n}\r\n\r\nexport function readTeams(mode: AppMode): Promise<Team[]> {\r\n  return db.ref(`/teams/${getRelPath(mode)}`)\r\n  .once('value')\r\n  .then((values: firebase.database.DataSnapshot) => parseTeamsData(values))\r\n}\r\n\r\nexport function parseTeamsData(v: firebase.database.DataSnapshot) {\r\n  const values = v.val() || {}\r\n  return deserializeArray(values)\r\n    .map(teamRaw => ({\r\n      driver: teamRaw.driver || null,\r\n      medic: teamRaw.medic || null,\r\n      vehicle: teamRaw.vehicle || null,\r\n    }))\r\n}\r\n\r\nfunction generateSchedule(\r\n  teams: Team[],\r\n  trips: Trip[]\r\n): [KeyableTrip[], ScheduleByTeam, {[key: string]: Trip}] {\r\n  const teamByKey = _.mapValues(\r\n    _.keyBy(\r\n      teams.filter(t => t.driver || t.medic),\r\n      tripKey\r\n    ),\r\n    team => ({ driver: team.driver, medic: team.medic })\r\n  )\r\n  const tripsByKey = _.groupBy(\r\n    trips,\r\n    tripKey\r\n  ) as {[k: string]: Trip[]}\r\n\r\n  // If there are trips with team not in teams,\r\n  // add to teams\r\n  const teamsToPrepend: Team[] = Object.keys(tripsByKey)\r\n    .filter(key => !(key in teamByKey))\r\n    .map(key => {\r\n      const {driver, medic} = tripsByKey[key][0]\r\n      return {driver, medic, vehicle: null}\r\n    })\r\n\r\n  const newTeams = teamsToPrepend.concat(teams)\r\n\r\n  const schedule: {[k: string]: ScheduleData} = _.fromPairs(\r\n    newTeams.map((team): [string, ScheduleData] => {\r\n      const key = tripKey(team)\r\n      const trips = tripsByKey[key] || []\r\n      return [\r\n        key,\r\n        {\r\n          rows: packTrips(trips),\r\n        }\r\n      ]\r\n    })\r\n  )\r\n\r\n  return [\r\n    newTeams,\r\n    schedule,\r\n    _.keyBy(trips, 'id'),\r\n  ]\r\n}\r\n\r\n/**\r\n * For trips that cannot be allocated for some reason to a team,\r\n * pack them in such a way that there are no conflicts. Ensures\r\n * at least one row will be generated\r\n */\r\nfunction packTrips(trips: Trip[]): string[][] {\r\n  const arrayOfTrips: Trip[][] = []\r\n\r\n  const last = <T>(t: T[]) => t[t.length - 1]\r\n\r\n  const sortedTrips: Trip[] = _.sortBy(\r\n    trips,\r\n    (trip: Trip) => trip.startTime\r\n  )\r\n\r\n  const conflictsWith = (a: Trip, b: Trip) => {\r\n    return Math.min(imputedEndTime(a), imputedEndTime(b)) >\r\n      Math.max(a.startTime, b.startTime)\r\n  }\r\n\r\n  sortedTrips.forEach((trip: Trip) => {\r\n    const nonConflicting = arrayOfTrips.find(tripsInRow => {\r\n      const lastTrip = last(tripsInRow)\r\n      return !conflictsWith(trip, lastTrip)\r\n    })\r\n    if (!nonConflicting) {\r\n      arrayOfTrips.push([trip])\r\n    } else {\r\n      nonConflicting.push(trip)\r\n    }\r\n  })\r\n\r\n  if (arrayOfTrips.length === 0) {\r\n    arrayOfTrips.push([])\r\n  }\r\n\r\n  return arrayOfTrips.map(tripsInRow => tripsInRow.map(trip => trip.id))\r\n}\r\n\r\n// We want to throttle by individual keys\r\nconst updates: {\r\n  [key: string]: {\r\n    backlog: {[key: string]: any} | null,\r\n    state: 'inflight' | 'errored',\r\n  }\r\n} = {}\r\nfunction triggerSend(refPath: string, tripId: string) {\r\n  const dataSent = updates[tripId].backlog\r\n  updates[tripId].state = 'inflight'\r\n  updates[tripId].backlog = null\r\n  return db.ref(refPath).set(dataSent)\r\n    .then(() => {\r\n      if (updates[tripId].backlog) {\r\n        triggerSend(refPath, tripId)\r\n      } else {\r\n        delete updates[tripId]\r\n      }\r\n    })\r\n    .catch(() => {\r\n      updates[tripId].state = 'errored'\r\n      if (updates[tripId].backlog) {\r\n        updates[tripId].backlog = {\r\n          ...dataSent,\r\n          ...updates[tripId].backlog,\r\n        }\r\n        triggerSend(refPath, tripId)\r\n      } else {\r\n        updates[tripId].backlog = dataSent\r\n        // Wait for the next update to trigger\r\n        // FIXME: flash some error message\r\n      }\r\n    })\r\n}\r\nfunction submitUpdates(refPath: string, tripId: string, data: {[key: string]: any}) {\r\n  if (tripId in updates && updates[tripId].state === 'inflight') {\r\n    updates[tripId].backlog = {\r\n      ...updates[tripId].backlog,\r\n      ...data\r\n    }\r\n    // don't trigger sending, let this be picked up by the current loop\r\n  } else if (tripId in updates && updates[tripId].state === 'errored') {\r\n    updates[tripId].backlog = {\r\n      ...updates[tripId].backlog,\r\n      ...data\r\n    }\r\n    triggerSend(refPath, tripId)\r\n  } else if (!(tripId in updates)) {\r\n    updates[tripId] = {\r\n      backlog: data,\r\n      state: 'inflight',\r\n    }\r\n    triggerSend(refPath, tripId)\r\n  }\r\n}\r\nexport function getPendingTripUpdates(tripId: string): {} | null {\r\n  return (updates[tripId] && updates[tripId].backlog) || null\r\n}\r\nfunction syncTrip(mode: AppMode, trip: Trip) {\r\n  if (!trip.id) {\r\n    throw new Error('A trip has no ID for syncing!')\r\n  }\r\n  const refPath = `/trips/${getRelPath(mode)}/${trip.id}`\r\n  submitUpdates(refPath, trip.id, trip)\r\n}\r\nfunction syncDeleteTrip(mode: AppMode, trip: Trip) {\r\n  assert(trip.id, 'Wanted to delete a trip without an ID')\r\n  db.ref(`/trips/${getRelPath(mode)}/${trip.id}`).set(null)\r\n}\r\n\r\nfunction parseLatLng(o: any): LatLng | null {\r\n  if (!o) return null\r\n\r\n  const lat = isFinite(o && o.lat)\r\n    ? parseFloat(o.lat) : null\r\n  const lng = isFinite(o && o.lng)\r\n    ? parseFloat(o.lng) : null\r\n\r\n  if (lat !== null && lng !== null) {\r\n    return {lat, lng}\r\n  } else {\r\n    return null\r\n  }\r\n}\r\n\r\nexport function readTrips(mode: AppMode): Promise<Trip[]> {\r\n  return db.ref(`/trips/${getRelPath(mode)}`)\r\n  .once('value')\r\n  .then(v => parseTripsData(v))\r\n}\r\n\r\nexport function parseTripsData(v: firebase.database.DataSnapshot): Trip[] {\r\n  const value = v.val() || {}\r\n  return _.values(value)\r\n    .map(tripRaw => ({\r\n      driver: tripRaw.driver || null,\r\n      medic: tripRaw.medic || null,\r\n      startTime: isFinite(tripRaw.startTime)\r\n        ? Math.max(0, Math.min(27 * 3600e3, parseInt(tripRaw.startTime)))\r\n        : 12 * 3600e3,\r\n      endTime: isFinite(tripRaw.endTime)\r\n        ? parseInt(tripRaw.endTime)\r\n        : null,\r\n      id: tripRaw.id || uniqueId(),\r\n      description: tripRaw.description || '',\r\n      startPostcode: tripRaw.startPostcode || null,\r\n      endPostcode: tripRaw.endPostcode || null,\r\n      startAddress: tripRaw.startAddress || null,\r\n      endAddress: tripRaw.endAddress || null,\r\n      startLocation: tripRaw.startLocation || null,\r\n      endLocation: tripRaw.endLocation || null,\r\n      startLatLng: parseLatLng(tripRaw.startLatLng),\r\n      endLatLng: parseLatLng(tripRaw.endLatLng),\r\n      isTentative: !!tripRaw.isTentative,\r\n      relatedTrip: tripRaw.relatedTrip || null,\r\n      hideFromManifest: !!tripRaw.hideFromManifest,\r\n      isReturnTrip: !!tripRaw.isReturnTrip,\r\n      type: tripRaw.type || '<No type>',\r\n      price: isFinite(tripRaw.price)\r\n        ? parseInt(tripRaw.price)\r\n        : null,\r\n      cancelled: tripRaw.cancelled || false,\r\n      created: tripRaw.created || Date.now(),\r\n      updated: tripRaw.updated || Date.now(),\r\n      templateTrip: tripRaw.templateTrip || null,\r\n      messages: tripRaw.messages ? deserializeArray(tripRaw.messages) : [],\r\n      lastSMSTimestamp: tripRaw.lastSMSTimestamp || null,\r\n    }))\r\n}\r\n","import {formatDate, AppMode} from './trips'\r\nimport querystring from 'querystring'\r\nimport * as Vuex from 'vuex'\r\n\r\nexport function pushModeToHistory(mode: AppMode) {\r\n  if (mode.type === 'date') {\r\n    const dateString = formatDate(new Date(mode.timestamp))\r\n    window.history.pushState(null, dateString, '#' + querystring.stringify({date: dateString}))\r\n  } else if (mode.type === 'template') {\r\n    const dateString = formatDate(new Date(mode.lastTimestamp))\r\n    window.history.pushState(\r\n      null,\r\n      mode.template,\r\n      '#' + querystring.stringify({template: mode.template, lastTimestamp: dateString}))\r\n  }\r\n}\r\n\r\nexport function initializeHashWatch(store: Vuex.Store<any>) {\r\n  const dateHash = (): AppMode | null => {\r\n    const hash = querystring.parse(window.location.hash.substring(1))\r\n    if (hash.date) {\r\n      const date = new Date(hash.date)\r\n      return isFinite(date.getTime())\r\n        ? {type: 'date', timestamp: date.getTime()}\r\n        : null\r\n    } else if (hash.template) {\r\n      const template = hash.template\r\n      const date = new Date(hash.lastTimestamp)\r\n\r\n      return {\r\n        type: 'template',\r\n        template,\r\n        lastTimestamp: isFinite(date.getTime())\r\n          ? date.getTime()\r\n          : Date.now()\r\n      }\r\n    }\r\n    return null\r\n  }\r\n\r\n  const handleNewDateHash = () => {\r\n    const d = dateHash()\r\n\r\n    if (d) {\r\n      store.dispatch('trips/setMode', d)\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  window.addEventListener('popstate', handleNewDateHash)\r\n\r\n  if (handleNewDateHash()) {\r\n    return\r\n  }\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('PlannerChart',{staticClass:\"planner-chart\",attrs:{\"xAxisScale\":_vm.xAxisScale,\"yAxisScale\":_vm.yAxisScale},nativeOn:{\"scroll\":function($event){return _vm.onScroll($event)}},scopedSlots:_vm._u([{key:\"background-svg\",fn:function(s){return [_c('svg',{attrs:{\"width\":0.5 * _vm.screenWidth + _vm.chartAreaWidth + s.yAxisWidth,\"height\":_vm.chartAreaHeight + s.xAxisHeight},on:{\"dblclick\":_vm.createNewTrip}},[_c('HorizontalGridLines',{attrs:{\"rowHeight\":_vm.yAxisScale,\"width\":_vm.chartAreaWidth}}),_c('VerticalGridLines',{attrs:{\"columnWidth\":_vm.xAxisScale,\"n\":24,\"height\":_vm.chartAreaHeight}}),_c('CurrentTime',{attrs:{\"columnWidth\":_vm.xAxisScale,\"height\":_vm.chartAreaHeight}})],1)]}},{key:\"x-axis\",fn:function(s){return _vm._l((_vm._.range(0, 24)),function(i){return _c('div',{key:i,staticStyle:{\"cursor\":\"pointer\"},style:({\n        left: (s.scale * i) + 'px',\n        bottom: '0',\n        position: 'absolute',\n        width: _vm.xAxisScale + 'px',\n      }),on:{\"click\":function($event){return _vm.scrollToTime(i * 3600e3)}}},[_vm._v(\" \"+_vm._s(i)+\":00 \")])})}},{key:\"y-axis\",fn:function(s){return [_c('TeamList',{attrs:{\"teamSchedules\":_vm.teamSchedules,\"scale\":s.scale}})]}}])},[[_vm._l((_vm.teamSchedules),function(ref,i){\n      var team = ref[0];\n      var data = ref[1];\nreturn _vm._l((data.trips),function(trip,j){return _c('TripBar',{directives:[{name:\"draggable\",rawName:\"v-draggable\"}],key:trip.id,attrs:{\"isSelected\":trip.id === _vm.$store.state.tripEditing.tripBeingEdited,\"trip\":trip,\"yIndexFunction\":function (t) { return i; }},on:{\"click\":function($event){return _vm.tripClicked(trip)}},nativeOn:{\"dragstart\":function($event){return _vm.onDragStart($event, trip, i)},\"dragend\":function($event){return _vm.onDragEnd()}}})})}),_vm._l((_vm.teamSchedules),function(ref,i){\n      var team = ref[0];\n      var data = ref[1];\nreturn [(team.vehicle && data.row === 0)?_c('VehicleMarker',{key:i,attrs:{\"vehicle\":team.vehicle,\"rowCount\":data.rowCount,\"yIndex\":i}}):_vm._e()]})]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('transition-group',{attrs:{\"name\":\"team-list\",\"tag\":\"div\"}},_vm._l((_vm.teamSchedules),function(ref,i){\nvar team = ref[0];\nvar data = ref[1];\nreturn _c('div',{key:((team.driver) + \",\" + (team.medic) + \",\" + (data.row)),staticClass:\"team-marker\",class:{ 'is-dragged': _vm.dragIndex === i },style:({\r\n        'text-align': 'right',\r\n        left: '0',\r\n        right: '0',\r\n        height: (_vm.scale) + 'px',\r\n        top: (_vm.scale * i) + 'px',\r\n        position: 'absolute',\r\n        'user-select': 'none',\r\n      }),attrs:{\"draggable\":\"\"},on:{\"drop\":function($event){return _vm.onDrop($event, 1)},\"dragstart\":function($event){return _vm.onDragStart($event, i)},\"dragend\":function($event){return _vm.onDragEnd()},\"dragover\":function($event){return _vm.onDragOver($event, i)}}},[(team.driver || team.medic)?[_c('span',[_vm._v(_vm._s(team.driver)+\", \"+_vm._s(team.medic)+\" \")]),_c('VehicleLabel',{attrs:{\"value\":team.vehicle,\"right\":\"\"}})]:[_c('em',{staticClass:\"not-assigned\"},[_vm._v(\"Not assigned\")])]],2)}),0),(_vm.isDragging)?_c('div',{staticClass:\"placeholder\",style:({\r\n      top: (_vm.scale * _vm.destinationIndex) + 'px',\r\n    })}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.vehiclesById[_vm.value])?_c('VehicleTooltip',_vm._b({attrs:{\"value\":_vm.vehiclesById[_vm.value]}},'VehicleTooltip',_vm.$attrs,false),[_vm._t(\"before\"),(_vm.vehiclesById[_vm.value])?_c('span',{staticClass:\"vehicle\",class:{stale: _vm.stale(_vm.vehiclesById[_vm.value])},style:({\n      'background-color': _vm.singaporeColors(_vm.vehiclesById[_vm.value])\n    })}):_vm._e(),_vm._t(\"after\")],2):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import _ from 'lodash'\r\nimport {db} from '@/lib/firebase'\r\nimport assert from 'assert'\r\n\r\nexport interface VehicleStatus {\r\n  created: number,\r\n  direction: number,\r\n  lat: number,\r\n  lng: number,\r\n  location: string,\r\n  registrationNumber: string,\r\n  speed: number,\r\n  vehicleStatus: string,\r\n}\r\n\r\nexport interface Person {\r\n  name: string,\r\n  telephone: string | null,\r\n  updated: number,\r\n  created: number,\r\n}\r\n\r\nexport type PersonList = {\r\n  [name: string]: Person\r\n}\r\n\r\nexport interface VehiclesState {\r\n  vehicles: VehicleStatus[],\r\n  persons: PersonList,\r\n}\r\n\r\nexport default {\r\n  namespaced: true,\r\n\r\n  state (): VehiclesState {\r\n    return {\r\n      vehicles: [],\r\n      persons: {},\r\n    }\r\n  },\r\n\r\n  getters: {\r\n    vehiclesById(state: VehiclesState) {\r\n      return _.keyBy(state.vehicles, 'registrationNumber')\r\n    },\r\n\r\n    personArray(state: VehiclesState): Person[] {\r\n      return _.sortBy(\r\n        Object.values(state.persons),\r\n        (p: Person) => p.name\r\n      )\r\n    }\r\n  },\r\n\r\n  mutations: {\r\n    setVehicles(state: VehiclesState, vehicles: VehicleStatus[]) {\r\n      state.vehicles = vehicles\r\n    },\r\n\r\n    setPersons(state: VehiclesState, persons: Person[]) {\r\n      state.persons = _.keyBy(persons, p => p.name.toLowerCase())\r\n    },\r\n\r\n    updatePerson(state: VehiclesState, person: Person) {\r\n      state.persons = {\r\n        ...state.persons,\r\n        [person.name.toLowerCase()]: person,\r\n      }\r\n      syncPerson(person)\r\n    },\r\n\r\n    deletePerson(state: VehiclesState, person: Person) {\r\n      const {[person.name.toLowerCase()]: toDelete, ...rest} = state.persons\r\n      state.persons = rest\r\n\r\n      syncDeletePerson(person)\r\n    }\r\n  },\r\n}\r\n\r\nfunction syncPerson(person: Person) {\r\n  assert(person.name)\r\n\r\n  db.ref(`/persons/${person.name}`)\r\n  .set({\r\n    created: Date.now(),\r\n    ...person,\r\n    updated: Date.now(),\r\n  })\r\n}\r\n\r\nfunction syncDeletePerson(person: Person) {\r\n  assert(person.name)\r\n\r\n  db.ref(`/persons/${person.name}`)\r\n  .set(null)\r\n}\r\n\r\nexport function vehicleStatusIsStale(status: VehicleStatus) {\r\n  return (Date.now() - status.created) > 15 * 60e3\r\n}","// Some silly implementation that tries to allocate a color to every lat-lng.\r\nimport {LatLng} from '@/lib/types'\r\n\r\n// These are rough boundaries. Actual lat-lngs can exceed these values\r\nconst MAX_LAT = 1.45\r\nconst MAX_LNG = 104.00\r\nconst MIN_LAT = 1.25\r\nconst MIN_LNG = 103.63\r\n\r\nexport default function getColor(latLng: LatLng) {\r\n  const scaleAndClamp = (s: number) =>\r\n    Math.round(Math.max(0, Math.min(255, s * 255.0)))\r\n  const toHex = (s: number) => s.toString(16).padStart(2, '0')\r\n\r\n  const red = scaleAndClamp((latLng.lat - MIN_LAT) / (MAX_LAT - MIN_LAT))\r\n  const green = scaleAndClamp((latLng.lng - MIN_LNG) / (MAX_LNG - MIN_LNG))\r\n  const blue = 255.0 - Math.max(red, green)\r\n\r\n  return `#${toHex(red)}${toHex(green)}${toHex(blue)}`\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-tooltip',_vm._g(_vm._b({attrs:{\"content-class\":\"unobstrustive-disable-mouse\"}},'v-tooltip',_vm.$attrs,false),_vm.$listeners),[_vm._t(\"default\",null,{\"slot\":\"activator\"}),_c('div',[_c('div',[_c('b',[_vm._v(_vm._s(_vm.value.registrationNumber))])]),_c('div',[_c('i',[_vm._v(\"Status\")]),_vm._v(\" \"+_vm._s(_vm.value.vehicleStatus)+\" \")]),_c('div',[_c('i',[_vm._v(\"Location\")]),_vm._v(\" \"+_vm._s(_vm.value.location)+\" \")]),_c('div',[_vm._v(\" \"+_vm._s(_vm.sAgo(_vm.value.created))+\" \")])])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport sAgo from 's-ago'\r\n\r\nexport default Vue.extend({\r\n  props: {value: {}},\r\n  computed: {\r\n    sAgo: () => (d: any) => sAgo(new Date(d))\r\n  }\r\n})\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VehicleTooltip.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VehicleTooltip.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./VehicleTooltip.vue?vue&type=template&id=364181e2&\"\nimport script from \"./VehicleTooltip.vue?vue&type=script&lang=ts&\"\nexport * from \"./VehicleTooltip.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport { VehiclesState, PersonList, VehicleStatus, vehicleStatusIsStale } from '@/store/vehicles';\r\nimport singaporeColors from '@/lib/singaporeColors'\r\nimport VehicleTooltip from '@/components/common/VehicleTooltip.vue'\r\n\r\nexport default Vue.extend({\r\n  props: {\r\n    value: {},\r\n    placeholder: {type: String, default: ''},\r\n  },\r\n  computed: {\r\n    vehiclesById(): {[k: string]: VehicleStatus} {\r\n      return this.$store.getters['vehicles/vehiclesById']\r\n    },\r\n    singaporeColors: () => (v: VehicleStatus): string => {\r\n      return singaporeColors(v)\r\n    },\r\n    stale: () => (v: VehicleStatus) => {\r\n      return vehicleStatusIsStale(v)\r\n    }\r\n  },\r\n  components: {\r\n    VehicleTooltip,\r\n  }\r\n})\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VehicleLabel.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VehicleLabel.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./VehicleLabel.vue?vue&type=template&id=4aa47725&scoped=true&\"\nimport script from \"./VehicleLabel.vue?vue&type=script&lang=ts&\"\nexport * from \"./VehicleLabel.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./VehicleLabel.vue?vue&type=style&index=0&id=4aa47725&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4aa47725\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport VehicleLabel from '@/dialogs/teams/VehicleLabel.vue'\r\n\r\ninterface TeamListData {\r\n  dragIndex: number,\r\n  isDragging: boolean,\r\n  destinationIndex: number,\r\n}\r\n\r\nexport default Vue.extend({\r\n  props: {\r\n    scale: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n    teamSchedules: {\r\n      type: Array,\r\n      required: true,\r\n    }\r\n  },\r\n  components: {\r\n    VehicleLabel,\r\n  },\r\n  data (): TeamListData {\r\n    return {\r\n      dragIndex: -1,\r\n      isDragging: false,\r\n      destinationIndex: 0,\r\n    }\r\n  },\r\n  methods: {\r\n    handleMove (options: any): void {\r\n      this.$data.destinationIndex = options.draggedContext.futureIndex\r\n    },\r\n    handleInput (v: any): void {\r\n      this.$store.commit('trips/updateTeams', v)\r\n    },\r\n\r\n    onDragStart (e: DragEvent, index: number): void {\r\n      if (!e.dataTransfer) throw new Error('Unexpected null dataTransfer')\r\n\r\n      e.dataTransfer.effectAllowed = 'move'\r\n      e.dataTransfer.dropEffect = \"move\"\r\n      // Firefox insists on this to activate the drag\r\n      e.dataTransfer.setData('text/team-reorder-drag', 'dummy')\r\n      ;(this as any as TeamListData).dragIndex = index\r\n      ;(this as any as TeamListData).isDragging = true\r\n    },\r\n    onDragEnd (): void {\r\n      ;(this as any as TeamListData).isDragging = false\r\n      ;(this as any as TeamListData).dragIndex = -1\r\n    },\r\n    onDragOver (e: DragEvent, index: number): boolean {\r\n      if (!e.dataTransfer) throw new Error('Unexpected null dataTransfer')\r\n\r\n      if (!e.dataTransfer.types.includes('text/team-reorder-drag')) {\r\n        return true\r\n      }\r\n      e.preventDefault()\r\n      e.dataTransfer.dropEffect = 'move'\r\n      ;(this as any as TeamListData).isDragging = true\r\n      ;(this as any as TeamListData).destinationIndex =\r\n        (index < (this as any as TeamListData).dragIndex) ? index\r\n        : (index === (this as any as TeamListData).dragIndex) ? -1\r\n        : (index + 1)\r\n      return false\r\n    },\r\n    onDrop (e: DragEvent, index: number) {\r\n      e.preventDefault()\r\n\r\n      if (!e.dataTransfer!.types.includes('text/team-reorder-drag')) {\r\n        return true\r\n      }\r\n\r\n      if ((this as any as TeamListData).destinationIndex < 0) return\r\n\r\n      const oldIndex = this.$store.getters['trips/teamIndexForRow']((this as any as TeamListData).dragIndex)\r\n      const newIndex = this.$store.getters['trips/teamIndexForRow']((this as any as TeamListData).destinationIndex)\r\n\r\n      if (oldIndex === null || newIndex === null) return\r\n\r\n      this.$store.commit('trips/reorderTeam', {oldIndex, newIndex})\r\n\r\n      ;(this as any as TeamListData).isDragging = false\r\n      ;(this as any as TeamListData).dragIndex = -1\r\n    }\r\n  }\r\n})\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TeamList.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TeamList.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TeamList.vue?vue&type=template&id=6d396108&scoped=true&\"\nimport script from \"./TeamList.vue?vue&type=script&lang=ts&\"\nexport * from \"./TeamList.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./TeamList.vue?vue&type=style&index=0&id=6d396108&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6d396108\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\"div\")}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\r\nimport Vue from 'vue'\r\n\r\nexport default Vue.extend({\r\n  mounted () {\r\n    const interval = setInterval(\r\n      () => (this as any).$store.commit('time/updateTime'),\r\n      60000\r\n    )\r\n\r\n    this.$on('hook:beforeDestroy', () => {\r\n      clearInterval(interval)\r\n    })\r\n  }\r\n})\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimeUpdater.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimeUpdater.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TimeUpdater.vue?vue&type=template&id=182e1512&\"\nimport script from \"./TimeUpdater.vue?vue&type=script&lang=ts&\"\nexport * from \"./TimeUpdater.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"planner-chart\",style:({\n    'grid-template-columns': (_vm.yAxisWidth + \"px 1fr\"),\n    'grid-template-rows': (_vm.xAxisHeight + \"px 1fr\"),\n  }),on:{\"dragover\":function($event){return _vm.onDragOver($event)},\"drop\":function($event){return _vm.onDrop($event)},\"dragleave\":function($event){return _vm.onDragLeave($event)}}},[_c('div',{staticClass:\"y-axis\"},[_vm._t(\"y-axis\",null,{\"scale\":_vm.yAxisScale})],2),_c('div',{staticClass:\"x-axis\"},[_vm._t(\"x-axis\",null,{\"scale\":_vm.xAxisScale})],2),_c('div',{ref:\"scrollRef\",staticClass:\"content\"},[_vm._t(\"background-svg\",null,{\"xScale\":_vm.xAxisScale,\"yScale\":_vm.yAxisScale,\"xAxisHeight\":_vm.xAxisHeight,\"yAxisWidth\":_vm.yAxisWidth}),_vm._t(\"default\",null,{\"xScale\":_vm.xAxisScale,\"yScale\":_vm.yAxisScale})],2),(_vm.drag.row >= 0)?_c('div',{staticStyle:{\"border\":\"dashed 2px rgba(0, 0, 0, 0.5)\",\"position\":\"absolute\",\"z-index\":\"10\",\"pointer-events\":\"none\"},style:({\n      top: (_vm.drag.row * _vm.yAxisScale + _vm.xAxisHeight) + 'px',\n      height: _vm.yAxisScale + 'px',\n      left: (_vm.drag.start / 3600e3 * _vm.xAxisScale + _vm.yAxisWidth) + 'px',\n      width: ((_vm.drag.end - _vm.drag.start) / 3600e3 * _vm.xAxisScale) + 'px',\n    })}):_vm._e(),(_vm.drag.row >= 0)?_c('div',{staticStyle:{\"background-color\":\"#DDD\",\"position\":\"absolute\",\"pointer-events\":\"none\"},style:({\n      top: (_vm.drag.row * _vm.yAxisScale + _vm.xAxisHeight) + 'px',\n      height: _vm.yAxisScale + 'px',\n      left: _vm.yAxisWidth + 'px',\n      width: (24 * _vm.xAxisScale) + 'px',\n    })}):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\r\nlet data: any = null\r\n\r\nexport function setData(d: any) {\r\n  data = d\r\n}\r\n\r\nexport function getData(): any {\r\n  return data\r\n}","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport { KeyableTrip, imputedEndTime } from '@/lib/types';\nimport store from '@/store';\nimport * as tripReassignment from './tripReassignment'\nimport { TripsState } from '../../store/trips';\n\nexport default Vue.extend({\n  data () {\n    return {\n      scrollLeft: 0,\n      scrollTop: 0,\n\n      drag: {\n        row: -1,\n        start: null as number | null,\n        end: null as number | null,\n        type: null as null | 'reassign' | 'retime',\n      }\n    }\n  },\n\n  props: {\n    yAxisWidth: {\n      type: Number,\n      default: 150,\n    },\n    yAxisScale: {\n      type: Number,\n      default: 50,\n    },\n    xAxisHeight: {\n      type: Number,\n      default: 50,\n    },\n    xAxisScale: {\n      type: Number,\n      default: 50,\n    },\n    showTime: {\n      type: Boolean,\n      default: false,\n    }\n  },\n\n  provide () {\n    return {\n      xScale: () => this.xAxisScale,\n      yScale: () => this.yAxisScale,\n    }\n  },\n\n  methods: {\n    updateScrollOffsets () {\n      this.scrollLeft = (this.$refs.contentElem as HTMLElement).scrollLeft\n      this.scrollTop = (this.$refs.contentElem as HTMLElement).scrollTop\n    },\n\n    scrollTo (left: number, top: number) {\n      this.scrollLeft = (this.$refs.contentElem as HTMLElement).scrollLeft = left\n      this.scrollTop = (this.$refs.contentElem as HTMLElement).scrollTop = top\n    },\n\n    onDragOver(event: DragEvent) {\n      const data = tripReassignment.getData()\n      if (!data) {\n        return\n      }\n      event.preventDefault()\n      event.dataTransfer!.dropEffect = 'move'\n\n      const {start, end} = data\n\n      const y = computeRelativeYPosition(event, this.$refs.scrollRef as Element)\n\n      const canonicalOffsetForRow = this.$store.getters['trips/canonicalOffsetForRow'](Math.floor(y / this.yAxisScale))\n      if (canonicalOffsetForRow === null) {\n        event.dataTransfer!.dropEffect = 'none'\n        this.drag.row = -1\n        return\n      }\n\n      if (canonicalOffsetForRow !== data.originalRow) {\n        // Show preview of destination team\n        // Compute row, width\n        this.drag.type = 'reassign'\n        this.drag.row = canonicalOffsetForRow\n        this.drag.start = start\n        this.drag.end = end\n      } else {\n        // We want to re-time the job instead\n        const x = computeRelativeXPosition(event, this.$refs.scrollRef as Element)\n        // snap to nearest 15mins\n        const draggedTime = this.xPositionToNearestTick(x - data.offsetX)\n\n        if (Math.abs(draggedTime - start) >= .5 * 3600e3 || this.drag.type === 'retime') {\n          // Show preview of destination time\n          // Compute row, width\n          this.drag.type = 'retime'\n          this.drag.row = canonicalOffsetForRow\n          this.drag.start = draggedTime\n          this.drag.end = draggedTime + end - start\n        } else {\n          this.drag.type = null\n        }\n      }\n    },\n\n    xPositionToNearestTick (x: number) {\n      return Math.round(x / this.xAxisScale * 12) / 12 * 3600e3\n    },\n\n    onDrop(event: DragEvent) {\n      const data = tripReassignment.getData()\n      if (!data) {\n        return\n      }\n      const y = computeRelativeYPosition(event, this.$refs.scrollRef as Element)\n\n      const {tripId, start, end} = data\n\n      const row = Math.floor(y / this.yAxisScale)\n      const tripToMove = (this.$store.state.trips as TripsState).trips[tripId]\n\n      if (row !== data.originalRow) {\n        const destinationTeam = this.$store.getters['trips/teamForRow'](row)\n        const wantToEdit = this.$store.getters['tripEditing/tripBeingEdited'] === tripToMove\n\n        this.$store.commit('trips/reassignJob', {\n          trip: tripToMove,\n          team: destinationTeam,\n        })\n      } else if (this.drag.type === 'retime') {\n        const newStartTime = this.drag.start\n        const newEndTime = this.drag.end\n\n        this.$store.commit('trips/updateTrip', {\n          tripId: tripToMove.id,\n          updates: {\n            startTime: newStartTime,\n            newEndTime: tripToMove.endTime === null ? null : newEndTime\n          }\n        })\n      }\n\n      this.drag.type = null\n      this.drag.row = -1 // Disable the placeholder now\n      event.preventDefault()\n    },\n\n    onDragLeave(event: DragEvent) {\n      event.preventDefault()\n    }\n  }\n})\n\nfunction computeRelativeXPosition(event: MouseEvent, rootElement: Element) {\n  let x = event.offsetX\n  let node = event.target as Element\n\n  x += node.getBoundingClientRect().left -\n    rootElement.getBoundingClientRect().left\n\n  return x\n}\n\nfunction computeRelativeYPosition(event: MouseEvent, rootElement: Element) {\n  let y = event.offsetY\n  let node = event.target as Element\n\n  y += node.getBoundingClientRect().top -\n    rootElement.getBoundingClientRect().top\n\n  return y\n}\n\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlannerChart.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlannerChart.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./PlannerChart.vue?vue&type=template&id=686ff501&scoped=true&\"\nimport script from \"./PlannerChart.vue?vue&type=script&lang=ts&\"\nexport * from \"./PlannerChart.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./PlannerChart.vue?vue&type=style&index=0&id=686ff501&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"686ff501\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',[(_vm.unassignedTeamData)?_c('rect',{attrs:{\"x\":\"0\",\"width\":_vm.width,\"y\":_vm.rowHeight * _vm.unassignedTeamData.first,\"height\":_vm.rowHeight * (_vm.unassignedTeamData.last + 1 - _vm.unassignedTeamData.first),\"fill\":\"#FFDDDD\",\"stroke-dasharray\":\"4 2\"}}):_vm._e(),_vm._l((_vm.teamSchedules),function(ref,i){\nvar team = ref[0];\nvar data = ref[1];\nreturn (data.row === data.rowCount - 1)?_c('line',{key:i,attrs:{\"x1\":\"0\",\"x2\":_vm.width,\"y1\":(i + 1) * _vm.rowHeight,\"y2\":(i + 1) * _vm.rowHeight,\"stroke\":\"#CCCCCC\",\"stroke-dasharray\":\"4 2\"}}):_vm._e()})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport _ from 'lodash'\r\nimport {ProcessedScheduleData} from '@/store/trips'\r\nimport {Team} from '@/lib/types'\r\n\r\nexport default Vue.extend({\r\n  props: {\r\n    rowHeight: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n    width: {\r\n      type: Number,\r\n      required: true,\r\n    }\r\n  },\r\n  computed: {\r\n    teamSchedules (): [Team, ProcessedScheduleData][] {\r\n      return this.$store.getters['trips/teamSchedules']\r\n    },\r\n    unassignedTeamData () {\r\n      const teamSchedules = this.$store.getters['trips/teamSchedules']\r\n      let firstIndex: number | null = null, lastIndex: number | null = null\r\n\r\n      for (let i=0; i<teamSchedules.length; i++) {\r\n        const [team, data] = teamSchedules[i]\r\n\r\n        if (!team.driver && !team.medic) {\r\n          if (firstIndex === null) firstIndex = i\r\n          lastIndex = i\r\n        }\r\n      }\r\n\r\n      return firstIndex === null ? null : {\r\n        first: firstIndex,\r\n        last: lastIndex,\r\n      }\r\n    }\r\n  }\r\n})\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HorizontalGridLines.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HorizontalGridLines.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./HorizontalGridLines.vue?vue&type=template&id=7653612b&\"\nimport script from \"./HorizontalGridLines.vue?vue&type=script&lang=ts&\"\nexport * from \"./HorizontalGridLines.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',_vm._l((_vm.range),function(i){return _c('line',{key:i,attrs:{\"y1\":\"0\",\"y2\":_vm.height,\"x1\":(i + 1) * _vm.columnWidth,\"x2\":(i + 1) * _vm.columnWidth,\"stroke\":\"#CCCCCC\",\"stroke-dasharray\":\"4 2\"}})}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport _ from 'lodash'\r\n\r\nexport default Vue.extend({\r\n  props: {\r\n    columnWidth: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n    n: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n    height: {\r\n      type: Number,\r\n      required: true,\r\n    }\r\n  },\r\n  computed: {\r\n    range (): Array<Number> {\r\n      return _.range(0, this.n)\r\n    }\r\n  }\r\n})\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VerticalGridLines.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VerticalGridLines.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./VerticalGridLines.vue?vue&type=template&id=4f6488dc&\"\nimport script from \"./VerticalGridLines.vue?vue&type=script&lang=ts&\"\nexport * from \"./VerticalGridLines.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('line',{attrs:{\"y1\":\"0\",\"y2\":_vm.height,\"x1\":(_vm.time / 3600e3) * _vm.columnWidth,\"x2\":(_vm.time / 3600e3) * _vm.columnWidth,\"stroke\":\"#FF0000\",\"stroke-width\":\"2\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import * as Vuex from 'vuex';\r\nimport time from './time';\r\n\r\nexport interface ScreenState {\r\n  width: number,\r\n  scrollTime: number,\r\n}\r\n\r\nconst store = {\r\n  namespaced: true,\r\n  state: {\r\n    width: window.innerWidth,\r\n    scrollTime: 0,\r\n  },\r\n  mutations: {\r\n    setWidth (state: ScreenState, width: number) {\r\n      state.width = width\r\n    },\r\n    setScrollTime (state: ScreenState, scrollTime: number) {\r\n      state.scrollTime = scrollTime\r\n    },\r\n  }\r\n}\r\n\r\nexport default store;","\r\ninterface TimeStoreState {\r\n  time: number\r\n}\r\n\r\nexport default {\r\n  namespaced: true,\r\n\r\n  state (): TimeStoreState {\r\n    return {\r\n      time: Date.now(),\r\n    }\r\n  },\r\n\r\n  getters: {\r\n    msSinceMidnight (state: TimeStoreState) {\r\n      const d = new Date(state.time)\r\n      d.setHours(0, 0, 0, 0)\r\n      return state.time - d.getTime()\r\n    }\r\n  },\r\n\r\n  mutations: {\r\n    updateTime (state: TimeStoreState) {\r\n      state.time = Date.now()\r\n    }\r\n  }\r\n}\r\n","\r\nexport interface DialogsState {\r\n  activeDialog: string | null,\r\n  props: {[key: string]: any},\r\n}\r\n\r\nexport default {\r\n  namespaced: true,\r\n\r\n  state (): DialogsState {\r\n    return {\r\n      activeDialog: null,\r\n      props: {},\r\n    }\r\n  },\r\n\r\n  mutations: {\r\n    showDialogWithProps(state: DialogsState, {dialog, props}: {dialog: string, props: {[key: string]: any}}) {\r\n      state.activeDialog = dialog\r\n      state.props = props\r\n    },\r\n\r\n    showDialog(state: DialogsState, team: string) {\r\n      state.activeDialog = team\r\n    },\r\n\r\n    hideDialog(state: DialogsState) {\r\n      state.activeDialog = null\r\n    }\r\n  },\r\n}\r\n","import {Job, Trip, KeyableTrip} from '@/lib/types'\r\nimport trips, { TripsState, tripKey } from './trips'\r\nimport assert from 'assert'\r\nimport * as Vuex from 'vuex'\r\nimport uniqueId from '@/lib/uniqueId';\r\n\r\nexport interface TripEditingState {\r\n  tripBeingEdited: string | null,\r\n}\r\n\r\n/**\r\n * This stores the state needed to link the popup window with\r\n * the currently being edited state.\r\n */\r\nexport default {\r\n  namespaced: true,\r\n  state (): TripEditingState {\r\n    return {\r\n      tripBeingEdited: null,\r\n    }\r\n  },\r\n\r\n  getters: {\r\n    tripBeingEdited (\r\n      state: TripEditingState,\r\n      getters: any,\r\n      rootState: {trips: TripsState}\r\n    ): Trip | null {\r\n      const key = state.tripBeingEdited\r\n\r\n      if (!key) return null\r\n      return rootState.trips.trips[key]\r\n    }\r\n  },\r\n\r\n  mutations: {\r\n    editTrip (\r\n      state: TripEditingState,\r\n      options: {tripId: string} | null\r\n    ) {\r\n      if (options) {\r\n        state.tripBeingEdited = options.tripId\r\n      } else {\r\n        state.tripBeingEdited = null\r\n      }\r\n    },\r\n  },\r\n\r\n  actions: {\r\n    updateTripBeingEdited (\r\n      context: any,\r\n      updates: {[key: string]: any},\r\n    ) {\r\n      assert(\r\n        context.getters.tripBeingEdited,\r\n        'There is no valid trip being edited'\r\n      )\r\n\r\n      context.commit(\r\n        'trips/updateTrip',\r\n        {\r\n          tripId: (context.state as TripEditingState).tripBeingEdited,\r\n          updates,\r\n        },\r\n        {root: true}\r\n      )\r\n    },\r\n\r\n    deleteTrip(context: Vuex.ActionContext<TripEditingState, {}>) {\r\n      context.commit('trips/deleteTrip',\r\n        {tripId: context.state.tripBeingEdited},\r\n        {root: true})\r\n      context.commit('tripEditing/editTrip', null, {root: true})\r\n    },\r\n\r\n    createAndEditNewTripAtTime(\r\n      context: Vuex.ActionContext<TripEditingState, any>,\r\n      options: {time: number, driver?: string | null, medic?: string | null},\r\n    ) {\r\n      const trip: Trip = {\r\n        id: uniqueId(),\r\n        driver: options.driver || null,\r\n        medic: options.medic || null,\r\n        startTime: options.time,\r\n        endTime: null,\r\n        startPostcode: null,\r\n        endPostcode: null,\r\n        startAddress: null,\r\n        endAddress: null,\r\n        startLocation: null,\r\n        endLocation: null,\r\n        startLatLng: null,\r\n        endLatLng: null,\r\n        created: Date.now(),\r\n        updated: Date.now(),\r\n        isTentative: false,\r\n        isReturnTrip: false,\r\n        relatedTrip: null,\r\n        hideFromManifest: false,\r\n        description: 'New trip $100',\r\n        cancelled: false,\r\n        templateTrip: '',\r\n        lastSMSTimestamp: null,\r\n      }\r\n\r\n      context.commit('trips/assignNewlyCreatedJob', {trip}, {root: true})\r\n      context.commit('tripEditing/editTrip',\r\n        {tripId: trip.id},\r\n        {root: true}\r\n      )\r\n    }\r\n  }\r\n}","import Vuex, { ActionContext } from 'vuex';\r\nimport _ from 'lodash'\r\nimport {db} from '@/lib/firebase'\r\nimport assert from 'assert'\r\nimport { deserializeArray } from '@/store/trips';\r\nimport uniqueId from '@/lib/uniqueId';\r\n\r\n\r\nexport interface TemplateMetadata {\r\n  name: string,\r\n  id: string,\r\n  created: number,\r\n}\r\n\r\nexport interface TemplatesState {\r\n  templates: {[k: string]: TemplateMetadata}\r\n}\r\n\r\nexport default {\r\n  namespaced: true,\r\n\r\n  state: {\r\n    templates: {} as {[k: string]: TemplateMetadata},\r\n  },\r\n\r\n  mutations: {\r\n    _setTemplates(state: TemplatesState, t: {[k: string]: TemplateMetadata}) {\r\n      state.templates = t\r\n    },\r\n\r\n    _updateTemplate(state: TemplatesState, t: TemplateMetadata) {\r\n      state.templates = {\r\n        ...state.templates,\r\n        [t.id]: t,\r\n      }\r\n    },\r\n\r\n    _deleteTemplate(state: TemplatesState, t: TemplateMetadata) {\r\n      const {[t.id]: template, ...rest} = state.templates\r\n      state.templates = rest\r\n    },\r\n  },\r\n\r\n  actions: {\r\n    readTemplates(context: ActionContext<TemplatesState, any>): Promise<void> {\r\n      return readTemplates().then((t: {[k: string]: TemplateMetadata}) => {\r\n        context.commit('_setTemplates', t)\r\n      })\r\n    },\r\n\r\n    updateTemplate(context: ActionContext<TemplatesState, any>, t: TemplateMetadata): void {\r\n      if (context.rootState.trips.savesDisabled) {\r\n        return\r\n      }\r\n\r\n      context.commit('_updateTemplate', t)\r\n      syncTemplate(t)\r\n    },\r\n\r\n    deleteTemplate(context: ActionContext<TemplatesState, any>, t: TemplateMetadata): void {\r\n      if (context.rootState.trips.savesDisabled) {\r\n        return\r\n      }\r\n\r\n      context.commit('_deleteTemplate', t)\r\n      syncDeleteTemplate(t)\r\n    }\r\n  }\r\n}\r\n\r\nexport function readTemplates(): Promise<{[k: string]: TemplateMetadata}> {\r\n  return db.ref('/templates')\r\n  .once('value')\r\n  .then((v) => {\r\n    const raw = v.val()\r\n\r\n    return _.values(raw)\r\n      .map(r => {\r\n        return {\r\n          name: r.name || r.id,\r\n          id: r.id || uniqueId(),\r\n          created: parseFloat(r.created) || Date.now(),\r\n        }\r\n      })\r\n      .reduce(\r\n        (acc, v) => {\r\n          acc[v.id] = v\r\n          return acc\r\n        },\r\n        {} as {[k: string]: TemplateMetadata}\r\n      )\r\n  })\r\n}\r\n\r\nexport function syncTemplate(template: TemplateMetadata): Promise<void> {\r\n  assert(template.id)\r\n  return db.ref(`/templates/${template.id}`)\r\n    .set(template)\r\n}\r\n\r\nexport function syncDeleteTemplate(template: TemplateMetadata): Promise<void> {\r\n  assert(template.id)\r\n  return db.ref(`/templates/${template.id}`)\r\n    .set(null)\r\n}","import { auth } from '@/lib/firebase';\r\n\r\ninterface LoginState {\r\n  user: string | null,\r\n}\r\n\r\nexport default {\r\n  namespaced: true,\r\n\r\n  state (): LoginState {\r\n    return {\r\n      user: null\r\n    }\r\n  },\r\n\r\n  actions: {\r\n    signInWithPopup(context: any, provider: firebase.auth.AuthProvider) {\r\n      return auth.signInWithPopup(provider)\r\n    },\r\n    signOut(context: any) {\r\n      auth.signOut()\r\n    }\r\n  },\r\n\r\n  mutations: {\r\n    updateUser (state: LoginState, user: string | null) {\r\n      state.user = user\r\n    }\r\n  }\r\n}\r\n","import Vuex from 'vuex'\nimport Screen from '@/store/screen.ts'\nimport Time from '@/store/time.ts'\nimport Trips from '@/store/trips.ts'\nimport Vehicles from '@/store/vehicles.ts'\nimport Dialogs from '@/store/dialogs.ts'\nimport TripEditing from '@/store/tripEditing.ts'\nimport Templates from '@/store/templates';\nimport Login from './store/login';\n\nconst store = new Vuex.Store({\n  modules: {\n    screen: Screen,\n    time: Time,\n    login: Login,\n    trips: Trips,\n    dialogs: Dialogs,\n    vehicles: Vehicles,\n    tripEditing: TripEditing,\n    templates: Templates,\n  },\n})\n\nwindow.addEventListener('resize', () => {\n  store.commit('screen/setWidth', window.innerWidth)\n})\n\nexport default store;","\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport store from '@/store'\r\nimport _ from 'lodash'\r\n\r\nexport default Vue.extend({\r\n  computed: {\r\n    time(): number {\r\n      const d = new Date((store.state as any).time.time)\r\n      const e = new Date((store.state as any).time.time)\r\n      d.setHours(0, 0, 0)\r\n      return e.getTime() - d.getTime()\r\n    }\r\n  },\r\n  props: {\r\n    columnWidth: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n    height: {\r\n      type: Number,\r\n      required: true,\r\n    }\r\n  },\r\n})\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CurrentTime.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CurrentTime.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./CurrentTime.vue?vue&type=template&id=63c748d0&\"\nimport script from \"./CurrentTime.vue?vue&type=script&lang=ts&\"\nexport * from \"./CurrentTime.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"trip-box\",style:({\n    left: (_vm.trip.startTime / 3600e3 * _vm.xScale()) + 'px',\n    width: (_vm.presumedDuration(_vm.trip) / 3600e3 * _vm.xScale()) + 'px',\n    height: (_vm.yScale()) + 'px',\n    top: (_vm.yIndexFunction(_vm.trip) * _vm.yScale()) + 'px',\n    opacity: _vm.trip.cancelled ? 0.5 : 1.0,\n    'background': _vm.locationGradient,\n    color: _vm.trip.latLng ? '#FFF' : '#000',\n  })},[(_vm.noUpdatesSinceSMS)?_c('img',{staticClass:\"sms-indicator\",attrs:{\"src\":require(\"@/assets/email.png\")}}):_vm._e(),_c('UnobstrusiveTooltip',{staticClass:\"trip-box-contents\",class:{\n      'is-selected': _vm.isSelected,\n      'is-tentative': _vm.trip.isTentative,\n      'cancelled': _vm.trip.cancelled,\n      'hidden-from-manifest': _vm.trip.hideFromManifest,\n    },style:({\n      'background': _vm.locationGradient,\n      color: _vm.trip.latLng ? '#FFF' : '#000',\n    }),attrs:{\"top\":true},nativeOn:{\"click\":function($event){return _vm.$emit('click', $event)}}},[_c('div',{attrs:{\"slot\":\"activator\"},slot:\"activator\"},[_vm._v(\" \"+_vm._s(_vm.trip.description)+\" \")]),_c('span',[_vm._v(\" \"+_vm._s(_vm.trip.description)+\" \")])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-tooltip',_vm._g(_vm._b({attrs:{\"value\":_vm.showTooltip,\"content-class\":\"unobstrustive-disable-mouse\"},nativeOn:{\"mousedown\":function($event){_vm.showTooltip = false},\"mouseover\":function($event){return _vm.showTooltipIfMouseNotDown($event)},\"drag\":function($event){_vm.showTooltip = false}}},'v-tooltip',_vm.$attrs,false),_vm.$listeners),[_vm._t(\"activator\",null,{\"slot\":\"activator\"}),_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nexport default Vue.extend({\r\n  data () {\r\n    return {\r\n      showTooltip: false,\r\n    }\r\n  },\r\n  methods: {\r\n    showTooltipIfMouseNotDown(e: MouseEvent) {\r\n      if (!e.buttons) {\r\n        this.showTooltip = true\r\n      }\r\n    }\r\n  }\r\n})\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UnobstrusiveTooltip.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UnobstrusiveTooltip.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./UnobstrusiveTooltip.vue?vue&type=template&id=8b5d8dd2&\"\nimport script from \"./UnobstrusiveTooltip.vue?vue&type=script&lang=ts&\"\nexport * from \"./UnobstrusiveTooltip.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./UnobstrusiveTooltip.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport {Trip, imputedEndTime} from '@/lib/types.ts';\r\nimport UnobstrusiveTooltip from '@/components/common/UnobstrusiveTooltip.vue';\r\nimport singaporeColors from '@/lib/singaporeColors';\r\n\r\nexport default Vue.extend({\r\n  inject: {\r\n    yScale: {},\r\n    xScale: {},\r\n  },\r\n  props: {\r\n    isSelected: {\r\n      type: Boolean,\r\n    },\r\n    trip: {\r\n      type: Object,\r\n      required: true,\r\n    },\r\n    yIndexFunction: {\r\n      type: Function,\r\n      required: true,\r\n    }\r\n  },\r\n\r\n  components: {\r\n    UnobstrusiveTooltip\r\n  },\r\n\r\n  data () {\r\n    return {\r\n      tooltipNeeded: true,\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    singaporeColors: () => singaporeColors,\r\n\r\n    noUpdatesSinceSMS() {\r\n      const trip = this.trip as Trip\r\n      return (trip.lastSMSTimestamp !== null) &&\r\n        (trip.updated !== null) &&\r\n        (trip.lastSMSTimestamp > trip.updated)\r\n    },\r\n\r\n    locationGradient () {\r\n      if (this.trip.startLatLng && this.trip.endLatLng) {\r\n        return `linear-gradient(\r\n          90deg,\r\n            ${this.singaporeColors(this.trip.startLatLng)} 20%,\r\n            ${this.singaporeColors(this.trip.endLatLng)} 80%\r\n          )`\r\n      } else if (this.trip.startLatLng) {\r\n        return this.singaporeColors(this.trip.startLatLng)\r\n      } else if (this.trip.endLatLng) {\r\n        return this.singaporeColors(this.trip.endLatLng)\r\n      } else {\r\n        return '#CCC'\r\n      }\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    presumedDuration (trip: Trip) {\r\n      return imputedEndTime(trip) - trip.startTime\r\n    },\r\n  }\r\n})\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TripBar.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TripBar.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TripBar.vue?vue&type=template&id=2a885415&scoped=true&\"\nimport script from \"./TripBar.vue?vue&type=script&lang=ts&\"\nexport * from \"./TripBar.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./TripBar.vue?vue&type=style&index=0&id=2a885415&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2a885415\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {\nvar _obj;\nvar _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.vehicleData)?_c('VehicleTooltip',_vm._b({attrs:{\"value\":_vm.vehicleData}},'VehicleTooltip',( _obj = {}, _obj[_vm.yIndex === 0 ? 'bottom' : 'top'] = true, _obj ),false),[_c('div',{staticClass:\"vehicle-marker\",class:{\n      stale: _vm.isStale\n    },style:({\n      left: _vm.leftPosition,\n      top: _vm.topPosition,\n      height: _vm.height,\n      'background-color': _vm.locationGradient,\n      'border-radius': '1em'\n    })})]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport VehicleTooltip from '@/components/common/VehicleTooltip.vue'\r\nimport {Trip, imputedEndTime} from '@/lib/types.ts';\r\nimport singaporeColors from '@/lib/singaporeColors';\r\nimport store from '@/store';\r\nimport sAgo from 's-ago';\r\nimport { vehicleStatusIsStale } from '@/store/vehicles';\r\n\r\nexport default Vue.extend({\r\n  inject: {\r\n    yScale: {},\r\n    xScale: {},\r\n  },\r\n  props: {\r\n    vehicle: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    rowCount: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n    yIndex: {\r\n      type: Number,\r\n      required: true,\r\n    }\r\n  },\r\n\r\n  components: {\r\n    VehicleTooltip,\r\n  },\r\n\r\n  computed: {\r\n    singaporeColors: () => singaporeColors,\r\n\r\n    vehicleData () {\r\n      return store.getters['vehicles/vehiclesById'][this.vehicle]\r\n    },\r\n\r\n    timeSinceMidnight () {\r\n      if (!this.vehicleData) return\r\n      const created = new Date(this.vehicleData.created)\r\n      return created.getHours() * 3600e3 + created.getMinutes() * 60e3 +\r\n        created.getSeconds() * 1e3\r\n    },\r\n\r\n    locationGradient () {\r\n      return this.vehicleData && this.singaporeColors({\r\n        lat: this.vehicleData.lat,\r\n        lng: this.vehicleData.lng,\r\n      })\r\n    },\r\n\r\n    isStale () {\r\n      if (!this.vehicleData) return\r\n      return vehicleStatusIsStale(this.vehicleData)\r\n    },\r\n\r\n    leftPosition (): string {\r\n      const currentTimeOffset = this.$store.getters['time/msSinceMidnight']\r\n      const boundedTime = Math.min(\r\n        currentTimeOffset + 3600e3,\r\n        Math.max(\r\n          currentTimeOffset - 3600e3,\r\n          this.timeSinceMidnight || 0\r\n        )\r\n      )\r\n      const centreX = (boundedTime / 3600e3 * (this as any).xScale()) + 'px'\r\n      return `calc(${centreX} - 0.75em)`\r\n    },\r\n\r\n    topPosition (): string {\r\n      const centreY = (this.yIndex * (this as any).yScale()) + 'px'\r\n      return `calc(${centreY} + 0.25em)`\r\n    },\r\n\r\n    height (): string {\r\n      const rowHeight = (this.rowCount * (this as any).yScale()) + 'px'\r\n      return `calc(${rowHeight} - 0.5em)`\r\n    },\r\n\r\n    sAgo: () => (d: any) => sAgo(new Date(d)),\r\n  },\r\n\r\n  methods: {\r\n    presumedDuration (trip: Trip) {\r\n      return imputedEndTime(trip) - trip.startTime\r\n    }\r\n  }\r\n})\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VehicleMarker.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VehicleMarker.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./VehicleMarker.vue?vue&type=template&id=7a6519c4&scoped=true&\"\nimport script from \"./VehicleMarker.vue?vue&type=script&lang=ts&\"\nexport * from \"./VehicleMarker.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./VehicleMarker.vue?vue&type=style&index=0&id=7a6519c4&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7a6519c4\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\r\n\r\nexport default new Vue({})","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport _ from 'lodash';\r\nimport Vue from 'vue';\r\nimport {KeyableTrip, Trip, imputedEndTime} from '@/lib/types.ts';\r\nimport {TripsState, tripKey} from '@/store/trips.ts';\r\nimport TeamList from '@/components/chart/TeamList.vue';\r\nimport TimeUpdater from '@/components/util/TimeUpdater.vue';\r\nimport PlannerChart from '@/components/chart/PlannerChart.vue';\r\nimport HorizontalGridLines from '@/components/chart/HorizontalGridLines.vue';\r\nimport VerticalGridLines from '@/components/chart/VerticalGridLines.vue';\r\nimport CurrentTime from '@/components/chart/CurrentTime.vue';\r\nimport TripBar from '@/components/chart/TripBar.vue';\r\nimport VehicleMarker from '@/components/chart/VehicleMarker.vue';\r\nimport store from '@/store';\r\nimport {ScreenState} from '@/store/screen';\r\nimport scrollHelper from '@/lib/scrollHelper'\r\nimport * as tripReassignment from './tripReassignment'\r\n\r\nconst VISUAL_CENTER = 0.33\r\n\r\nexport default Vue.extend({\r\n  name: 'app',\r\n  props: {\r\n    xAxisScale: { type: Number },\r\n    yAxisScale: { type: Number },\r\n  },\r\n  computed: {\r\n    _: () => _,\r\n\r\n    tripKey: () => tripKey,\r\n\r\n    chartAreaWidth () {\r\n      return 24 * this.xAxisScale\r\n    },\r\n\r\n    chartAreaHeight () {\r\n      return this.$store.getters['trips/rowCount'] * this.yAxisScale\r\n    },\r\n\r\n    trips (): Trip[] {\r\n      return this.$store.getters['trips/trips']\r\n    },\r\n\r\n    teamSchedules () {\r\n      return (this.$store.getters as any)['trips/teamSchedules']\r\n    },\r\n\r\n    screenWidth () {\r\n      return (this.$store.state.screen as ScreenState).width\r\n    }\r\n  },\r\n  components: {\r\n    CurrentTime,\r\n    HorizontalGridLines,\r\n    PlannerChart,\r\n    TimeUpdater,\r\n    TeamList,\r\n    TripBar,\r\n    VehicleMarker,\r\n    VerticalGridLines\r\n  },\r\n  watch: {\r\n    'xAxisScale' () {\r\n      // FIXME: observe the previous position first?\r\n      this.$nextTick(() => {\r\n        this.scrollToCurrentTime()\r\n      })\r\n    }\r\n  },\r\n  created () {\r\n    scrollHelper.$on('scrollToTime', (time: number) => {this.scrollToTime(time)})\r\n  },\r\n  methods: {\r\n    // Ensure that \"now\" is at ~33% of the page\r\n    scrollToCurrentTime () {\r\n      const currentTime = this.$store.state.time.time\r\n      const midnight = new Date(currentTime)\r\n      midnight.setHours(0, 0, 0, 0)\r\n      const timeOffset = new Date(currentTime).getTime() - midnight.getTime()\r\n\r\n      const myWidth = this.$el.clientWidth\r\n      const timePosition = timeOffset / 3600e3 * this.xAxisScale\r\n\r\n      const scrollPosition = timePosition - VISUAL_CENTER * myWidth\r\n\r\n      this.$el.scrollLeft = scrollPosition\r\n    },\r\n\r\n    scrollToTime (time: number) {\r\n      const myWidth = this.$el.clientWidth\r\n      const timePosition = time / 3600e3 * this.xAxisScale\r\n\r\n      const scrollPosition = timePosition - VISUAL_CENTER * myWidth\r\n\r\n      const scrollABit = (n: number) => {\r\n        if (n == 10) return\r\n        const diff = scrollPosition - this.$el.scrollLeft\r\n\r\n        this.$el.scrollLeft = this.$el.scrollLeft + diff * 0.3\r\n        setTimeout(() => scrollABit(n + 1), 10)\r\n      }\r\n      scrollABit(0)\r\n      // this.$el.scrollLeft = scrollPosition\r\n    },\r\n\r\n    tripClicked (trip: Trip, index: number) {\r\n      this.$emit('trip-clicked', {tripId: trip.id})\r\n    },\r\n\r\n    onDragStart(event: DragEvent, trip: Trip, row: number) {\r\n      tripReassignment.setData({\r\n        start: trip.startTime,\r\n        end: imputedEndTime(trip),\r\n        tripId: trip.id,\r\n        offsetX: event.offsetX,\r\n        offsetY: event.offsetY,\r\n        originalRow: row,\r\n      })\r\n      // Firefox insists on this to activate the drag\r\n      event.dataTransfer!.setData('text/team-reorder-drag', 'dummy')\r\n    },\r\n\r\n    onDragEnd() {\r\n      tripReassignment.setData(null)\r\n    },\r\n\r\n    createNewTrip (event: MouseEvent) {\r\n      event.preventDefault()\r\n\r\n      const alignedStartTime = Math.floor(\r\n        event.offsetX / this.xAxisScale / 0.25\r\n      ) * .25 * 3600e3\r\n      const rowNumber = Math.floor(event.offsetY / this.yAxisScale)\r\n      const team = this.$store.getters['trips/teamForRow'](rowNumber)\r\n\r\n      if (team === null) return\r\n      if (alignedStartTime > 23.75 * 3600e3) return\r\n\r\n      this.$store.dispatch('tripEditing/createAndEditNewTripAtTime', {\r\n        time: alignedStartTime,\r\n        ...team,\r\n      })\r\n    },\r\n\r\n    onScroll(event: Event) {\r\n      this.$store.commit('screen/setScrollTime',\r\n        (this.$el.scrollLeft + VISUAL_CENTER * this.$el.clientWidth)\r\n          / this.xAxisScale\r\n          * 3600e3\r\n      )\r\n    },\r\n  }\r\n});\r\n\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChartArea.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChartArea.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ChartArea.vue?vue&type=template&id=6be79911&\"\nimport script from \"./ChartArea.vue?vue&type=script&lang=ts&\"\nexport * from \"./ChartArea.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.tripBeingEdited)?_c('div',{key:_vm.tripBeingEdited.id,staticClass:\"trip-editor\"},[_c('v-card-actions',[_c('v-layout',{attrs:{\"align-content-end\":\"\"}},[_c('v-btn',{attrs:{\"color\":\"neutral\",\"icon\":\"\"},on:{\"click\":_vm.wantToSendMessage}},[_c('v-icon',[_vm._v(\"message\")])],1),_c('v-btn',{attrs:{\"color\":_vm.historyShown ? 'primary' : 'neutral',\"icon\":\"\"},on:{\"click\":function($event){_vm.historyShown = !_vm.historyShown}}},[_c('v-icon',[_vm._v(\"history\")])],1),(!_vm.hasValidReturnTrip)?_c('v-menu',{attrs:{\"offset-y\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-btn',_vm._g({attrs:{\"icon\":\"\"}},on),[_c('v-icon',[_vm._v(\"looks_two\")])],1)]}}],null,false,2148361293)},[_c('v-list',[_c('v-list-tile',{on:{\"click\":function($event){return _vm.createReturnTrip(2 * 3600e3)}}},[_vm._v(\" Return trip in 2hrs \")]),_c('v-list-tile',{on:{\"click\":function($event){return _vm.createReturnTrip(3 * 3600e3)}}},[_vm._v(\" Return trip in 3hrs \")]),_c('v-list-tile',{on:{\"click\":function($event){return _vm.createReturnTrip(4 * 3600e3)}}},[_vm._v(\" Return trip in 4hrs \")]),_c('v-list-tile',{on:{\"click\":function($event){return _vm.createReturnTrip(5 * 3600e3)}}},[_vm._v(\" Return trip in 5hrs \")])],1)],1):_vm._e(),_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"neutral\",\"icon\":\"\"},on:{\"click\":function($event){return _vm.$store.commit('tripEditing/editTrip', null)}}},[_c('v-icon',[_vm._v(\"close\")])],1)],1)],1),_c('v-card-text',[(_vm.historyShown)?_c('MessageHistory',{attrs:{\"tripId\":_vm.tripBeingEdited.id}}):_vm._e(),(_vm.hasValidReturnTrip)?_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.visitRelatedTrip($event)}}},[_vm._v(\" \"+_vm._s(_vm.tripBeingEdited.isReturnTrip ? 'First trip' : 'Return trip')+\" \")]):_vm._e(),_c('v-textarea',{attrs:{\"label\":\"Description\",\"value\":_vm.tripBeingEdited.description,\"rows\":\"1\",\"auto-grow\":\"\",\"disabled\":_vm.tripBeingEdited.cancelled},on:{\"input\":function($event){return _vm.updateTrip('description', $event)}}}),_c('TeamsSelect',{attrs:{\"label\":\"Assigned to\",\"withNull\":true,\"value\":_vm.tripKey(_vm.tripBeingEdited)},on:{\"input\":function($event){return _vm.reassignTripToTeam($event)}}}),_c('PostcodePicker',{attrs:{\"label\":\"Start Postcode\",\"value\":_vm.tripBeingEdited.startPostcode,\"disabled\":_vm.tripBeingEdited.cancelled},on:{\"input\":function($event){return _vm.updateTrip('startPostcode', $event)},\"address-found\":function($event){_vm.updateTrip('startLatLng', $event.latLng), _vm.updateTrip('startAddress', $event.address)}}}),_c('div',{staticStyle:{\"border-width\":\"2px\",\"border-style\":\"solid\",\"flex\":\"1 1 auto\"},style:({'border-color': _vm.tripBeingEdited.startLatLng && _vm.singaporeColors(_vm.tripBeingEdited.startLatLng)})},[_vm._v(\" \"+_vm._s(_vm.tripBeingEdited.startAddress)+\" \")]),_c('v-text-field',{attrs:{\"label\":\"Start Location (Details)\",\"value\":_vm.tripBeingEdited.startLocation,\"disabled\":_vm.tripBeingEdited.cancelled},on:{\"input\":function($event){return _vm.updateTrip('startLocation', $event)}}}),_c('PostcodePicker',{attrs:{\"label\":\"End Postcode\",\"value\":_vm.tripBeingEdited.endPostcode,\"disabled\":_vm.tripBeingEdited.cancelled},on:{\"input\":function($event){return _vm.updateTrip('endPostcode', $event)},\"address-found\":function($event){_vm.updateTrip('endLatLng', $event.latLng), _vm.updateTrip('endAddress', $event.address)}}}),_c('div',{staticStyle:{\"border-width\":\"2px\",\"border-style\":\"solid\",\"flex\":\"1 1 auto\"},style:({'border-color': _vm.tripBeingEdited.endLatLng && _vm.singaporeColors(_vm.tripBeingEdited.endLatLng)})},[_vm._v(\" \"+_vm._s(_vm.tripBeingEdited.endAddress)+\" \")]),_c('v-text-field',{attrs:{\"label\":\"End Location (Details)\",\"value\":_vm.tripBeingEdited.endLocation,\"disabled\":_vm.tripBeingEdited.cancelled},on:{\"input\":function($event){return _vm.updateTrip('endLocation', $event)}}}),_c('TimeEditor',{attrs:{\"label\":\"Start Time\",\"value\":_vm.tripBeingEdited.startTime,\"disabled\":_vm.tripBeingEdited.cancelled},on:{\"input\":function($event){return _vm.updateTrip('startTime', $event)}}}),_c('TimeEditor',{attrs:{\"label\":\"End Time\",\"value\":_vm.tripBeingEdited.endTime,\"disabled\":_vm.tripBeingEdited.cancelled},on:{\"input\":function($event){return _vm.updateTrip('endTime',\n        $event === null ? null\n        : $event < _vm.tripBeingEdited.startTime ? $event + 86400e3\n        : $event)}}}),_c('v-checkbox',{attrs:{\"input-value\":_vm.tripBeingEdited.isTentative,\"label\":\"Timing is tentative\"},on:{\"change\":function($event){return _vm.updateTrip('isTentative', $event)}}}),_c('v-checkbox',{attrs:{\"input-value\":_vm.tripBeingEdited.hideFromManifest,\"label\":\"Hide from manifest\"},on:{\"change\":function($event){return _vm.updateTrip('hideFromManifest', $event)}}}),_c('hr'),_c('hr'),_c('v-layout',[_c('v-spacer'),(_vm.deleteAllowed)?_c('v-btn',{attrs:{\"color\":\"error\"},on:{\"click\":function($event){return _vm.$store.dispatch('tripEditing/deleteTrip')}}},[_vm._v(\" Delete \")]):_c('v-btn',{attrs:{\"color\":\"error\"},on:{\"click\":function($event){return _vm.updateTrip('cancelled', !_vm.tripBeingEdited.cancelled)}}},[_vm._v(\" \"+_vm._s(_vm.tripBeingEdited.cancelled ? 'Restore trip' : 'Cancel trip')+\" \")])],1)],1)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-input',_vm._b({},'v-input',_vm._.omit(_vm.$attrs, ['value']),false),[_c('input',_vm._g({staticStyle:{\"width\":\"5em\"},attrs:{\"type\":\"tel\"},domProps:{\"value\":_vm.convertFromTime(_vm.value)},on:{\"change\":function($event){_vm.$emit('input', _vm.convertToTime($event.target.value))}}},_vm._.omit(_vm.$listeners, ['input', 'change'])))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport _ from 'lodash'\r\n\r\nconst TIME_REGEX = /^([0-9]?[0-9]):?([0-9][0-9])$/\r\n\r\nexport default Vue.extend({\r\n  props: ['value'],\r\n\r\n  computed: {\r\n    _: () => _\r\n  },\r\n\r\n  methods: {\r\n    convertFromTime (value: number | null) {\r\n      if (value === null) return ''\r\n\r\n      const hours = parseInt((value / 3600e3).toString()).toString().padStart(2, ' ')\r\n      const minutes = parseInt((value % 3600e3 / 60e3).toString()).toString().padStart(2, '0')\r\n\r\n      return `${hours}:${minutes}`\r\n    },\r\n\r\n    convertToTime (value: string) {\r\n      const matches = value.match(TIME_REGEX)\r\n\r\n      if (!matches) return null\r\n\r\n      return parseInt(matches[1], 10) * 3600e3 +\r\n        parseInt(matches[2], 10) * 60e3\r\n    }\r\n  }\r\n})\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimeEditor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimeEditor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TimeEditor.vue?vue&type=template&id=727ce9c7&\"\nimport script from \"./TimeEditor.vue?vue&type=script&lang=ts&\"\nexport * from \"./TimeEditor.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-select',_vm._g(_vm._b({attrs:{\"items\":_vm.teams,\"item-text\":function (t) { return (t.driver && t.medic) ? ((t.driver) + \", \" + (t.medic)) : '(Not assigned)'; },\"item-value\":_vm.tripKey,\"value\":_vm.value}},'v-select',_vm.$attrs,false),_vm.$listeners))}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport { tripKey } from '@/store/trips';\r\nimport { KeyableTrip } from '@/lib/types';\r\nexport default Vue.extend({\r\n  props: ['value', 'withNull'],\r\n\r\n  computed: {\r\n    tripKey: () => tripKey,\r\n    teams (): KeyableTrip[] {\r\n      const emptyTripKey = tripKey({driver: null, medic: null})\r\n      if (this.withNull && !(emptyTripKey in this.$store.state.trips.scheduleByTeam)) {\r\n        return [{driver: null, medic: null}].concat(this.$store.state.trips.teams)\r\n      }\r\n      return this.$store.state.trips.teams\r\n    }\r\n  }\r\n})\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TeamsSelect.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TeamsSelect.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TeamsSelect.vue?vue&type=template&id=4e3c8c8a&\"\nimport script from \"./TeamsSelect.vue?vue&type=script&lang=ts&\"\nexport * from \"./TeamsSelect.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-text-field',_vm._b({attrs:{\"label\":_vm.label,\"value\":_vm.value},on:{\"blur\":_vm.maybeEmitPostcode,\"input\":_vm.updateQuery}},'v-text-field',_vm.$attrs,false))}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import querystring from 'querystring'\r\nimport _ from 'lodash'\r\n\r\nexport const PRESET_LOCATIONS: {[key: string]: string} = {\r\n  NTF: '609606',\r\n  NTFGH: '609606',\r\n  KTPH: '768828',\r\n  SGH: '169608',\r\n  CGH: '529889',\r\n  TTSH: '308433',\r\n  SKH: '544835',\r\n  AH: '159964',\r\n  NUH: '119073',\r\n  IMH: '539747',\r\n  KKH: '229899',\r\n}\r\n\r\nexport interface AddressSearchResult {\r\n  address: string,\r\n  latLng: {lat: number, lng: number} | null,\r\n  postalCode: string | null,\r\n}\r\n\r\nconst oneMapResultsToAddressSearchResult = (result: any) => {\r\n  if (result.results && result.results.length > 0) {\r\n    const bestResult = _.minBy(\r\n      result.results,\r\n      // find shortest addresses (ideally should exclude the ATMs)\r\n      // also try to exclude nil postal codes\r\n      (r: any) => [r.POSTAL === 'NIL', r.ADDRESS.length]\r\n    )\r\n    return {\r\n      address: (bestResult.ADDRESS as string)\r\n        .toLowerCase()\r\n        .replace(/(?:\\b|^)[a-z]/g, s => s.toUpperCase()),\r\n      latLng: {\r\n        lat: parseFloat(bestResult.LATITUDE),\r\n        lng: parseFloat(bestResult.LONGITUDE),\r\n      },\r\n      postalCode: bestResult.POSTAL !== 'NIL'\r\n        ? (bestResult.POSTAL as string)\r\n        : null,\r\n    }\r\n  } else {\r\n    return null\r\n  }\r\n}\r\n\r\nexport function fakeOneMapSearch(query: string | null): Promise<AddressSearchResult | null> {\r\n  if (!query) return Promise.resolve(null)\r\n  const upperCaseQuery = query.toUpperCase()\r\n\r\n  if (upperCaseQuery in PRESET_LOCATIONS) {\r\n    return fetch('https://developers.onemap.sg/commonapi/search?' + querystring.stringify({\r\n      searchVal: PRESET_LOCATIONS[upperCaseQuery], // search for the postal code!\r\n      returnGeom: 'Y',\r\n      getAddrDetails: 'Y',\r\n      pageNum: 1,\r\n    }))\r\n      .then(r => r.json())\r\n      .then((result: any) => oneMapResultsToAddressSearchResult(result))\r\n      .then((result) => result && {\r\n        ...result, // retain the old query for the latlng\r\n        address: upperCaseQuery,\r\n        postalCode: PRESET_LOCATIONS[upperCaseQuery],\r\n      })\r\n  } else {\r\n    const actualQuery = fetch('https://developers.onemap.sg/commonapi/search?' + querystring.stringify({\r\n      searchVal: query,\r\n      returnGeom: 'Y',\r\n      getAddrDetails: 'Y',\r\n      pageNum: 1,\r\n    }))\r\n      .then(r => r.json())\r\n      .then((result: any) => oneMapResultsToAddressSearchResult(result))\r\n\r\n    return actualQuery\r\n  }\r\n}","\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport _ from 'lodash'\r\n// import axios from 'axios'\r\nimport querystring from 'querystring'\r\nimport Vault from '@/vault'\r\nimport singaporeColors from '@/lib/singaporeColors'\r\nimport {LatLng} from '@/lib/types'\r\nimport {fakeOneMapSearch} from '@/lib/locations'\r\n\r\n/**\r\n * This takes in a structured object for a location --:\r\n * {\r\n *  query:,\r\n *  address:,\r\n *  latLng:,\r\n * }\r\n *\r\n * It returns the same object schema for the `input` event.\r\n */\r\nexport default Vue.extend({\r\n  props: {\r\n    value: {\r\n      type: String,\r\n    },\r\n    label: {\r\n      type: String,\r\n    },\r\n  },\r\n\r\n  data () {\r\n    return {\r\n      lastKnownPostcode: null as string | null,\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    // this.$autocompleteService = new google.maps.places.AutocompleteService()\r\n    // this.$placesService = new google.maps.places.PlacesService(this.$refs.attribution)\r\n  },\r\n\r\n  methods: {\r\n    updateQuery (value: string) {\r\n      this.$emit('input', value)\r\n      const $updateQueryDebounced = (this as any).$updateQueryDebounced || _.debounce(this.updateQueryImpl, 200)\r\n      $updateQueryDebounced()\r\n    },\r\n\r\n    updateQueryImpl () {\r\n      const query = this.value || ''\r\n      if (query) { // TODO: inject well-known locations, e.g. CGH, SGH, OV Balestier here\r\n        this.triggerOneMapSearch()\r\n      } else {\r\n        this.$emit('address-found', {\r\n          address: null,\r\n          latLng: null,\r\n        })\r\n        this.lastKnownPostcode = null\r\n      }\r\n    },\r\n\r\n    maybeEmitPostcode () {\r\n      if ((this as any).$updateQueryDebounced) {\r\n        (this as any).$updateQueryDebounced.cancel()\r\n      }\r\n      this.triggerOneMapSearch().then(() => {\r\n        if (this.lastKnownPostcode && this.value !== this.lastKnownPostcode) {\r\n          this.$emit('input', this.lastKnownPostcode)\r\n        }\r\n      })\r\n    },\r\n\r\n    triggerOneMapSearch (): Promise<void> {\r\n      const promise = (this as any).$oneMapPromise = fakeOneMapSearch(this.value)\r\n        .then((result) => {\r\n          if (promise !== (this as any).$oneMapPromise) return\r\n\r\n          if (result === null) {\r\n            this.$emit('address-found', {\r\n              address: '(not found)',\r\n              latLng: null,\r\n            })\r\n            this.lastKnownPostcode = null\r\n          } else {\r\n            this.$emit('address-found', result)\r\n            this.lastKnownPostcode = result.postalCode\r\n          }\r\n        })\r\n      return promise\r\n    },\r\n  }\r\n})\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PostcodePicker.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PostcodePicker.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./PostcodePicker.vue?vue&type=template&id=88caf13c&\"\nimport script from \"./PostcodePicker.vue?vue&type=script&lang=ts&\"\nexport * from \"./PostcodePicker.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"message-history\"},[(_vm.state === 'loading')?[_vm._v(\" Loading... \")]:[(_vm.messages.length === 0)?[_vm._v(\" No messages in history \")]:_vm._e(),_vm._l((_vm.messages),function(message){return _c('div',{staticClass:\"message\"},[_c('b',[_vm._v(_vm._s(_vm.formatDate(message.created))+\"; \"+_vm._s(message.recipients.join(', '))+\">\")]),_vm._v(\" \"+_vm._s(message.message)+\" \")])})]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import uniqueId from './uniqueId'\r\nimport _ from 'lodash'\r\n\r\nexport interface Message {\r\n  id: string,\r\n  recipients: string[],\r\n  message: string,\r\n  trip: string | null,\r\n  created?: number,\r\n  status?: 'sent' | 'errored' | 'unsent',\r\n  sentTime?: number,\r\n  errorTime?: number,\r\n  lastError?: string,\r\n}\r\n\r\nexport function parseMessages(d: firebase.database.DataSnapshot): Message[] {\r\n  const messagesRaw = d.val()\r\n  return _.orderBy(Object.entries(messagesRaw || {}), (f: any) => f[1].created, 'desc')\r\n    .map(([key, value]) => {\r\n      const av = value as any\r\n\r\n      return {\r\n        id: av.id || key,\r\n        recipients: (av.recipients || '').split(/,/g).filter(Boolean),\r\n        message: av.message || '',\r\n        status: av.status || '',\r\n        trip: av.trip || null,\r\n        created: av.created || null,\r\n      }\r\n    })\r\n}\r\n\r\nexport class MessageClient {\r\n  db: firebase.database.Database\r\n\r\n  constructor(db: firebase.database.Database) {\r\n    this.db = db\r\n  }\r\n\r\n  createMessage(message: {recipients: string[], message: string, trip: string | null}) {\r\n    const id = uniqueId()\r\n    this.db.ref(`/sms/${id}`)\r\n    .update({\r\n      id: id,\r\n      recipients: message.recipients.join(','),\r\n      message: message.message,\r\n      trip: message.trip,\r\n      created: Date.now(),\r\n      status: 'unsent',\r\n    })\r\n  }\r\n}","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport uniqueId from '@/lib/uniqueId';\r\nimport {db} from '@/lib/firebase'\r\nimport {Trip} from '@/lib/types'\r\nimport firebase from 'firebase/app'\r\nimport {Message, parseMessages} from '@/lib/messages'\r\nimport dateformat from 'dateformat';\r\n\r\nexport default Vue.extend({\r\n  props: ['tripId'],\r\n\r\n  data () {\r\n    return {\r\n      state: 'loading',\r\n      messages: [] as Message[],\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    tripId (v: string | null): void {\r\n      if (!v) {\r\n        this.state = 'done'\r\n        this.messages = []\r\n      } else {\r\n        this.state = 'loading'\r\n        this.loadByTripId(v)\r\n      }\r\n    },\r\n  },\r\n\r\n  mounted () {\r\n    this.loadByTripId(this.tripId)\r\n  },\r\n\r\n  methods: {\r\n    formatDate(c: string | number) {\r\n      return dateformat(c, 'dd-mmm-yy HH:MM')\r\n    },\r\n    loadByTripId(tripId: string) {\r\n      const promise = (this as any).$inflightPromise = db.ref('/sms')\r\n        .orderByChild('trip')\r\n        .equalTo(tripId)\r\n        .once('value')\r\n        .then((w: firebase.database.DataSnapshot) => {\r\n          if (promise !== (this as any).$inflightPromise) {\r\n            return\r\n          }\r\n          this.state = 'done'\r\n          this.messages = parseMessages(w)\r\n        })\r\n    }\r\n  }\r\n})\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageHistory.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageHistory.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./MessageHistory.vue?vue&type=template&id=28672314&scoped=true&\"\nimport script from \"./MessageHistory.vue?vue&type=script&lang=ts&\"\nexport * from \"./MessageHistory.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./MessageHistory.vue?vue&type=style&index=0&id=28672314&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"28672314\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport { Trip, Team } from '@/lib/types';\r\nimport {TripEditingState} from '@/store/tripEditing'\r\nimport {Person} from '@/store/vehicles'\r\nimport {BLANK_KEY} from '@/store/trips'\r\nimport TimeEditor from '@/components/common/TimeEditor.vue'\r\nimport TeamsSelect from '@/components/TeamsSelect.vue'\r\nimport SMSSection from '@/components/SMSSection.vue'\r\nimport PostcodePicker from '@/components/common/PostcodePicker.vue'\r\nimport MessageHistory from '@/components/MessageHistory.vue'\r\nimport singaporeColors from '@/lib/singaporeColors'\r\nimport {} from 'googlemaps'\r\nimport {tripKey, TripsState, ProcessedScheduleData} from '@/store/trips'\r\nimport uniqueId from '@/lib/uniqueId';\r\nimport dateformat from 'dateformat'\r\nimport scrollHelper from '@/lib/scrollHelper'\r\n\r\nexport default Vue.extend({\r\n  components: {\r\n    TimeEditor,\r\n    PostcodePicker,\r\n    TeamsSelect,\r\n    MessageHistory,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      historyShown: false,\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    tripBeingEdited (): Trip {\r\n      return this.$store.getters['tripEditing/tripBeingEdited'] as Trip\r\n    },\r\n\r\n    tripKey: () => tripKey,\r\n\r\n    singaporeColors: () => singaporeColors,\r\n\r\n    deleteAllowed (): Boolean {\r\n      if ((this.$store.state.trips as TripsState).mode.type === 'template') {\r\n        return true\r\n      }\r\n      const now = this.$store.state.time.time\r\n      return (now - this.tripBeingEdited.created) < 15 * 60e3\r\n    },\r\n\r\n    hasValidReturnTrip (): Boolean {\r\n      const relatedTripId = this.tripBeingEdited.relatedTrip\r\n      return !!(\r\n        relatedTripId &&\r\n        (this.$store.state.trips as TripsState).trips[relatedTripId]\r\n      )\r\n    },\r\n\r\n    message (): string {\r\n      const trip = this.tripBeingEdited\r\n      const condenseAddress = (s: string) =>\r\n        s.replace(/\\bSINGAPORE ([0-9]{6})\\b/ig, (s, p) => `S(${p})`)\r\n          .replace(/\\bstreet\\b/ig, 'St')\r\n          .replace(/\\broad\\b/ig, 'Rd')\r\n          .replace(/\\bbukit\\b/ig, 'Bt')\r\n          .replace(/\\btanjong\\b/ig, 'Tg')\r\n          .replace(/\\bjalan\\b/ig, 'Jln')\r\n          .replace(/\\blorong\\b/ig, 'Lor')\r\n          .replace(/\\bavenue\\b/ig, 'Ave')\r\n          .replace(/\\bboulevard\\b/ig, 'Blvd')\r\n          .replace(/\\bsingapore\\b/ig, 'sgp')\r\n      const condense = (s: string) => s.trim()\r\n        .replace(/\\s+/g, ' ')\r\n      const removeIndent = (s: string) => s.replace(\r\n        /\\s*\\n\\s+/g, '\\n'\r\n      )\r\n\r\n      const tripPart = trip.description || ''\r\n      const cancelledPart = trip.cancelled ? '(cancelled)' : ''\r\n      const startAddressPart = condenseAddress(`\r\n        ${trip.startAddress || ''} ${trip.startLocation || ''}\r\n      `)\r\n      const endAddressPart = condenseAddress(`\r\n        ${trip.endAddress || ''} ${trip.endLocation || ''}\r\n      `)\r\n      const makeDate = (s: number) => dateformat(s, 'HH:MM', true)\r\n      const datePart = makeDate(trip.startTime)\r\n      const addressee = [trip.driver, trip.medic]\r\n        .filter(s => Boolean(s))\r\n        .join('/')\r\n      const returnTrip: Trip | null = trip.relatedTrip && this.$store.state.trips.trips[trip.relatedTrip]\r\n      const returnTripInfo = (trip.isReturnTrip && returnTrip)\r\n        ? `1st trip: ${[returnTrip.driver, returnTrip.medic].filter(Boolean).join('+')} @${makeDate(returnTrip.startTime)}`\r\n        : ''\r\n\r\n      return removeIndent(`\r\n      ${addressee}:\r\n      ${condense(tripPart)} ${cancelledPart}\r\n      ${startAddressPart} - ${endAddressPart}\r\n      @${datePart}\r\n      ${returnTripInfo}\r\n      `).trim()\r\n    },\r\n\r\n    messageLabel (): string {\r\n      return `Message (${this.message.length} chars)`\r\n    },\r\n\r\n    tripRecipientPhoneNumbers (): [Person | null, Person | null] {\r\n      const driver = this.tripBeingEdited.driver\r\n      const medic = this.tripBeingEdited.medic\r\n\r\n      const driverPerson = driver &&\r\n        this.$store.state.vehicles.persons[driver.toLowerCase()]\r\n      const medicPerson = medic &&\r\n        this.$store.state.vehicles.persons[medic.toLowerCase()]\r\n\r\n      return [driverPerson, medicPerson]\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    updateTrip (field: string, value: any): void {\r\n      this.$store.dispatch('tripEditing/updateTripBeingEdited', {[field]: value})\r\n    },\r\n\r\n    reassignTripToTeam (key: string): void {\r\n      const team = (key === BLANK_KEY)\r\n        ? {driver: null, medic: null}\r\n        : this.$store.state.trips.teams.find((t: Team) => tripKey(t) === key)\r\n\r\n      this.$store.commit('trips/reassignJob', {\r\n        trip: this.tripBeingEdited,\r\n        team\r\n      })\r\n      this.$store.commit('tripEditing/editTrip', {\r\n        tripId: this.tripBeingEdited.id\r\n      })\r\n\r\n      // TODO: scroll to the trip\r\n    },\r\n\r\n    createReturnTrip(offset: number): void {\r\n      const relatedTripId = uniqueId()\r\n      const trip: Trip = {\r\n        ...this.tripBeingEdited,\r\n        id: relatedTripId,\r\n\r\n        description: '[Ret] ' + (this.tripBeingEdited.description || ''),\r\n        created: Date.now(),\r\n        startTime: this.tripBeingEdited.startTime + offset,\r\n        endTime: this.tripBeingEdited.endTime === null\r\n          ? null : this.tripBeingEdited.endTime + offset,\r\n\r\n        startAddress: this.tripBeingEdited.endAddress,\r\n        startLocation: this.tripBeingEdited.endLocation,\r\n        startLatLng: this.tripBeingEdited.endLatLng,\r\n        startPostcode: this.tripBeingEdited.endPostcode,\r\n\r\n        endAddress: this.tripBeingEdited.startAddress,\r\n        endLocation: this.tripBeingEdited.startLocation,\r\n        endLatLng: this.tripBeingEdited.startLatLng,\r\n        endPostcode: this.tripBeingEdited.startPostcode,\r\n\r\n        relatedTrip: this.tripBeingEdited.id,\r\n        isReturnTrip: true,\r\n        isTentative: true,\r\n      }\r\n\r\n      this.$store.commit('trips/assignNewlyCreatedJob', {trip})\r\n      this.updateTrip('relatedTrip', relatedTripId)\r\n    },\r\n\r\n    // Searches through all existing trips and find the\r\n    // one with the same id\r\n    visitRelatedTrip(): void {\r\n      const relatedTripId = this.tripBeingEdited.relatedTrip\r\n      const relatedTrip = relatedTripId &&\r\n        (this.$store.state.trips as TripsState).trips[relatedTripId]\r\n\r\n      if (relatedTrip) {\r\n        this.$store.commit('tripEditing/editTrip', {tripId: relatedTripId})\r\n        scrollHelper.$emit('scrollToTime', relatedTrip.startTime)\r\n      } else {\r\n        this.updateTrip('relatedTrip', null)\r\n      }\r\n    },\r\n\r\n    wantToSendMessage(): void {\r\n      this.$store.commit('dialogs/showDialogWithProps', {\r\n        dialog: 'draftMessage',\r\n        props: {\r\n          recipients: this.tripRecipientPhoneNumbers\r\n            .filter(r => r)\r\n            .map(r => r && r.telephone),\r\n          message: this.message,\r\n          trip: this.tripBeingEdited.id,\r\n        }\r\n      })\r\n    }\r\n  }\r\n})\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TripEditor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TripEditor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TripEditor.vue?vue&type=template&id=07841563&scoped=true&\"\nimport script from \"./TripEditor.vue?vue&type=script&lang=ts&\"\nexport * from \"./TripEditor.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./TripEditor.vue?vue&type=style&index=0&id=07841563&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"07841563\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-menu',{attrs:{\"offset-y\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-text-field',_vm._g({staticStyle:{\"flex\":\"0 0 150px\"},attrs:{\"value\":_vm.timestampText,\"label\":\"Date:\",\"readonly\":\"\"}},on))]}}]),model:{value:(_vm.isOpen),callback:function ($$v) {_vm.isOpen=$$v},expression:\"isOpen\"}},[_c('v-date-picker',{attrs:{\"value\":_vm.timestampISO},on:{\"input\":_vm.handleDateInput}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport dateformat from 'dateformat';\r\nimport store from '@/store';\r\nimport { TripsState } from '@/store/trips';\r\nexport default {\r\n  data () {\r\n    return {\r\n      isOpen: false,\r\n    }\r\n  },\r\n  computed: {\r\n    timestampText () {\r\n      const mode = (store.state.trips as TripsState).mode\r\n      if (mode.type === 'date') {\r\n        return dateformat(mode.timestamp, 'ddd, dd mmm yyyy')\r\n      }\r\n    },\r\n    timestampISO () {\r\n      const mode = (store.state.trips as TripsState).mode\r\n      if (mode.type === 'date') {\r\n        return dateformat(mode.timestamp, 'yyyy-mm-dd')\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    handleDateInput (d: string) {\r\n      // FIXME: handle time zones properly?\r\n      store.dispatch('trips/setMode', {\r\n        type: 'date',\r\n        timestamp: new Date(d + \"T00:00:00+0800\").getTime()\r\n      })\r\n    }\r\n  }\r\n}\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DatePicker.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DatePicker.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DatePicker.vue?vue&type=template&id=fffcf932&\"\nimport script from \"./DatePicker.vue?vue&type=script&lang=ts&\"\nexport * from \"./DatePicker.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"print-area\"},[_c('ManifestComponent',{attrs:{\"showHiddenTrips\":false}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('table',{staticClass:\"manifest-table\"},[_vm._m(0),_c('tbody',_vm._l((_vm.trips),function(trip){return (_vm.showHiddenTrips || !trip.hideFromManifest)?_c('tr',{key:trip.id,class:{\n          cancelled: trip.cancelled,\n          'hidden-from-manifest': _vm.showHiddenTrips && trip.hideFromManifest,\n        }},[_c('td',[_vm._v(_vm._s(trip.driver)+\", \"+_vm._s(trip.medic))]),_c('td',[_vm._v(_vm._s(_vm.dateformat(trip.startTime, 'HH:MM', true)))]),_c('td',[_vm._v(_vm._s(trip.endTime && _vm.dateformat(trip.endTime, 'HH:MM', true)))]),_c('td',[_c('div',[_vm._v(_vm._s(trip.description))]),(trip.startAddress || trip.startLocation)?_c('div',[_c('b',[_vm._v(\"From: \")]),_vm._v(_vm._s(trip.startAddress)+\" \"+_vm._s(trip.startLocation))]):_vm._e(),(trip.endAddress || trip.endLocation)?_c('div',[_c('b',[_vm._v(\"To: \")]),_vm._v(_vm._s(trip.endAddress)+\" \"+_vm._s(trip.endLocation)+\" \")]):_vm._e()])]):_vm._e()}),0)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('tr',[_c('th',[_vm._v(\"Team\")]),_c('th',[_vm._v(\"Start\")]),_c('th',[_vm._v(\"End\")]),_c('th',[_vm._v(\"Description\")])])])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport store from '@/store'\r\nimport {Team, KeyableTrip, Trip} from '@/lib/types'\r\nimport {TripsState, ScheduleByTeam, tripKey, ProcessedScheduleData, deserializeArray, readTeams} from '@/store/trips'\r\nimport { VehiclesState } from '@/store/vehicles';\r\nimport assert from 'assert';\r\nimport dateformat from 'dateformat';\r\nimport { db } from '@/lib/firebase';\r\nimport _ from 'lodash';\r\n\r\nexport default Vue.extend({\r\n  props: ['showHiddenTrips'],\r\n\r\n  computed: {\r\n    dateformat: () => dateformat,\r\n\r\n    trips (): Trip[] {\r\n      const unsortedTrips = _.flatMap(\r\n        this.$store.getters['trips/teamSchedules'],\r\n        (arr: [Team, ProcessedScheduleData]) => {\r\n          return arr[1].trips\r\n        }\r\n      )\r\n      return _.sortBy(\r\n        unsortedTrips,\r\n        (t: Trip) => t.startTime\r\n      )\r\n    }\r\n  },\r\n})\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Manifest.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Manifest.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Manifest.vue?vue&type=template&id=31069700&scoped=true&\"\nimport script from \"./Manifest.vue?vue&type=script&lang=ts&\"\nexport * from \"./Manifest.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Manifest.vue?vue&type=style&index=0&id=31069700&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"31069700\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport store from '@/store'\r\nimport ManifestComponent from '@/components/Manifest.vue';\r\nimport dateformat from 'dateformat';\r\nimport { db } from '@/lib/firebase';\r\nimport _ from 'lodash';\r\n\r\nexport default Vue.extend({\r\n  components: {\r\n    ManifestComponent,\r\n  },\r\n})\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PrintableManifest.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PrintableManifest.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./PrintableManifest.vue?vue&type=template&id=3b2b8f42&\"\nimport script from \"./PrintableManifest.vue?vue&type=script&lang=ts&\"\nexport * from \"./PrintableManifest.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./PrintableManifest.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('StandardDialog',{attrs:{\"title\":\"Manage teams\",\"name\":\"teams\",\"height\":\"80vh\"}},[_c('v-btn',{on:{\"click\":function($event){return _vm.$store.commit('dialogs/showDialog', 'importTeams')}}},[_vm._v(\" Import from a previous day \")]),_vm._l((_vm.teams),function(team,i){return _c('div',{key:((team.driver) + \",\" + (team.medic)),ref:\"teamsGrid\",refInFor:true,attrs:{\"data-key\":((team.driver) + \",\" + (team.medic))}},[_c('div',{staticClass:\"teams-grid\"},[_c('div',{staticClass:\"action\"},[(!_vm.teamHasTrips(team))?_c('span',{staticStyle:{\"cursor\":\"pointer\"},on:{\"click\":function($event){return _vm.dropTeam(i)}}},[_c('v-icon',[_vm._v(\"delete\")])],1):_vm._e()]),_c('EditingCell',{staticClass:\"cell\",attrs:{\"disabled\":_vm.teamHasTrips(team)},scopedSlots:_vm._u([{key:\"editor\",fn:function(editor){return [_c('EditingDropdown',{attrs:{\"items\":_vm.staffList,\"value\":team.driver},on:{\"blur\":function($event){return editor.blur()},\"input\":function($event){return _vm.updateTeam(i, $event, 'driver')}}})]}}],null,true)},[_c('PersonView',{attrs:{\"value\":team.driver,\"placeholder\":\"(Driver)\"}})],1),_c('EditingCell',{staticClass:\"cell\",attrs:{\"disabled\":_vm.teamHasTrips(team)},scopedSlots:_vm._u([{key:\"editor\",fn:function(editor){return [_c('EditingDropdown',{attrs:{\"items\":_vm.staffList,\"value\":team.medic},on:{\"blur\":function($event){return editor.blur()},\"input\":function($event){return _vm.updateTeam(i, $event, 'medic')}}})]}}],null,true)},[_c('PersonView',{attrs:{\"value\":team.medic,\"placeholder\":\"(Medic)\"}})],1),_c('EditingCell',{staticClass:\"cell\",scopedSlots:_vm._u([{key:\"editor\",fn:function(editor){return [_c('EditingDropdown',{attrs:{\"items\":_vm.$store.state.vehicles.vehicles.map(function (r) { return r.registrationNumber; }),\"value\":team.vehicle},on:{\"blur\":function($event){return editor.blur()},\"input\":function($event){return _vm.updateTeam(i, $event, 'vehicle')}}})]}}],null,true)},[_c('VehicleView',{attrs:{\"value\":team.vehicle,\"placeholder\":\"(No vehicle)\"}})],1)],1),(_vm.errors[i])?_c('v-alert',{attrs:{\"value\":true,\"type\":\"error\"}},[_vm._v(\" \"+_vm._s(_vm.errors[i])+\" \")]):_vm._e()],1)}),_c('div',{staticClass:\"teams-grid\"},[_c('div',{staticClass:\"action\"},[_vm._v(\" (New) \")]),_c('EditingCell',{staticClass:\"cell\",scopedSlots:_vm._u([{key:\"editor\",fn:function(editor){return [_c('EditingDropdown',{attrs:{\"items\":_vm.staffList},on:{\"input\":function($event){_vm.newTeam.driver = $event},\"blur\":function($event){return editor.blur()}}})]}}])},[_c('PersonView',{attrs:{\"value\":_vm.newTeam.driver,\"placeholder\":\"(Driver)\"}})],1),_c('EditingCell',{staticClass:\"cell\",scopedSlots:_vm._u([{key:\"editor\",fn:function(editor){return [_c('EditingDropdown',{attrs:{\"items\":_vm.staffList,\"value\":_vm.newTeam.medic},on:{\"input\":function($event){_vm.newTeam.medic = $event},\"blur\":function($event){return editor.blur()}}})]}}])},[_c('PersonView',{attrs:{\"value\":_vm.newTeam.medic,\"placeholder\":\"(Driver)\"}})],1),_c('EditingCell',{staticClass:\"cell\",attrs:{\"disabled\":true},nativeOn:{\"focus\":function($event){return _vm.maybeCreateTeam($event)}},scopedSlots:_vm._u([{key:\"editor\",fn:function(editor){return undefined}}])},[_c('span',{staticClass:\"placeholder\"},[_vm._v(\"(Vehicle)\")])])],1),(_vm.errors['new'])?_c('v-alert',{attrs:{\"value\":true,\"type\":\"error\"}},[_vm._v(\" \"+_vm._s(_vm.errors['new'])+\" \")]):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (!_vm.isEditing)?_c('div',{class:{disabled: _vm.disabled},attrs:{\"tabindex\":\"0\"},on:{\"focus\":function($event){return _vm.handleFocus()},\"click\":function($event){$event.preventDefault();return _vm.handleFocus()}}},[_vm._t(\"default\")],2):_c('div',{ref:\"editorDiv\",staticClass:\"editor-div\"},[_vm._t(\"editor\",null,{\"blur\":_vm.blur})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nexport default Vue.extend({\r\n  props: {\r\n    disabled: {\r\n      type: Boolean,\r\n      default: false,\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      isEditing: false,\r\n    }\r\n  },\r\n  watch: {\r\n    isEditing (v) {\r\n      this.$nextTick(() => {\r\n        const el = (this.$refs.editorDiv as HTMLElement)\r\n        const focusable = el && el.querySelector('input, a, select')\r\n\r\n        if (!focusable) return\r\n\r\n        if (v) {\r\n          setTimeout(() => (focusable as HTMLInputElement).select(), 1)\r\n        }\r\n      })\r\n    }\r\n  },\r\n  methods: {\r\n    blur () {\r\n      this.$nextTick(() => {\r\n        this.isEditing = false;\r\n      })\r\n    },\r\n    handleFocus () {\r\n      if (!this.disabled) {\r\n        this.isEditing = true\r\n      }\r\n    }\r\n  }\r\n})\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditingCell.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditingCell.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./EditingCell.vue?vue&type=template&id=46fffcd8&scoped=true&\"\nimport script from \"./EditingCell.vue?vue&type=script&lang=ts&\"\nexport * from \"./EditingCell.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./EditingCell.vue?vue&type=style&index=0&id=46fffcd8&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"46fffcd8\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.value)?_c('span',[_vm._v(\" \"+_vm._s(_vm.value)+\" \"),(_vm.persons[_vm.value.toLowerCase()])?_c('span',{staticClass:\"telephone\"},[_vm._v(\" \"+_vm._s(_vm.persons[_vm.value.toLowerCase()].telephone)+\" \")]):_vm._e()]):_c('span',{staticClass:\"placeholder\"},[_vm._v(\" \"+_vm._s(_vm.placeholder)+\" \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport { VehiclesState, PersonList } from '@/store/vehicles';\r\nexport default Vue.extend({\r\n  props: {\r\n    value: {},\r\n    placeholder: {type: String, default: ''},\r\n  },\r\n  computed: {\r\n    persons(): PersonList {\r\n      return (this.$store.state.vehicles as VehiclesState).persons\r\n    }\r\n  }\r\n})\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PersonView.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PersonView.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./PersonView.vue?vue&type=template&id=f8c2c1e6&scoped=true&\"\nimport script from \"./PersonView.vue?vue&type=script&lang=ts&\"\nexport * from \"./PersonView.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./PersonView.vue?vue&type=style&index=0&id=f8c2c1e6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f8c2c1e6\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.value && _vm.vehiclesById[_vm.value])?_c('span',[_c('VehicleLabel',{attrs:{\"value\":_vm.value,\"bottom\":\"\"}},[_c('template',{slot:\"before\"},[_vm._v(_vm._s(_vm.value)+\" \")])],2)],1):(_vm.value)?_c('span',[_vm._v(\" \"+_vm._s(_vm.value)+\" \")]):_c('span',{staticClass:\"placeholder\"},[_vm._v(\" \"+_vm._s(_vm.placeholder)+\" \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport { VehiclesState, PersonList, VehicleStatus } from '@/store/vehicles';\r\nimport singaporeColors from '@/lib/singaporeColors'\r\nimport VehicleLabel from '@/dialogs/teams/VehicleLabel.vue'\r\n\r\nexport default Vue.extend({\r\n  props: {\r\n    value: {},\r\n    placeholder: {type: String, default: ''},\r\n  },\r\n  computed: {\r\n    vehiclesById(): {[k: string]: VehicleStatus} {\r\n      return this.$store.getters['vehicles/vehiclesById']\r\n    },\r\n  },\r\n  components: {\r\n    VehicleLabel,\r\n  }\r\n})\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VehicleView.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VehicleView.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./VehicleView.vue?vue&type=template&id=cf854faa&\"\nimport script from \"./VehicleView.vue?vue&type=script&lang=ts&\"\nexport * from \"./VehicleView.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-menu',{attrs:{\"offset-y\":\"\",\"bottom\":\"\",\"allow-overflow\":\"\",\"value\":_vm.showMenu,\"close-on-click\":false,\"close-on-content-click\":false},scopedSlots:_vm._u([{key:\"activator\",fn:function(activator){return [_c('v-layout',{ref:\"inputParent\",staticClass:\"layout\"},[_c('input',_vm._b({directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.searchInput),expression:\"searchInput\"}],ref:\"myinput\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.searchInput)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.searchInput=$event.target.value},_vm.handleShowMenu],\"blur\":_vm.handleBlur,\"focus\":_vm.handleFocus,\"keydown\":[function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"down\",40,$event.key,[\"Down\",\"ArrowDown\"])){ return null; }return _vm.selectNext($event)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"down\",40,$event.key,[\"Down\",\"ArrowDown\"])){ return null; }if(!$event.altKey){ return null; }return _vm.handleShowMenu($event)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"up\",38,$event.key,[\"Up\",\"ArrowUp\"])){ return null; }return _vm.selectPrev($event)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.selectCurrent($event)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"esc\",27,$event.key,[\"Esc\",\"Escape\"])){ return null; }_vm.showMenu = false}]}},'input',_vm.$attrs,false)),_c('v-icon',{staticClass:\"menu-chevron\",attrs:{\"tabindex\":\"-1\"},nativeOn:{\"click\":function($event){return _vm.handleShowMenu($event)}}},[_vm._v(\"expand_more\")])],1)]}}])},[_c('v-list',{ref:\"selectionItems\",staticClass:\"list\",attrs:{\"tabindex\":\"-1\"}},_vm._l((_vm.listItems),function(item){return _c('div',{key:item.value,staticClass:\"list-tile\",class:{active: _vm.isSelected(item)},on:{\"click\":function($event){$event.preventDefault();return _vm.handleClick(item)}}},[_vm._v(\" \"+_vm._s(item.value)+\" \")])}),0)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport _ from 'lodash'\r\n\r\nexport default Vue.extend({\r\n  props: {\r\n    items: {},\r\n    value: {},\r\n    // Somehow required for typechecking to succeed\r\n    // value: {type: String},\r\n    // items: {\r\n    //   type: Array,\r\n    //   required: true,\r\n    // },\r\n    // value: {\r\n    //   // validator: (prop: any): boolean => typeof prop === 'string' || prop === null,\r\n    //   required: true,\r\n    // }\r\n  },\r\n\r\n  computed: {\r\n    listItems (): {text: string, value: string}[] {\r\n      const searchInput = this.searchInput as string\r\n      const searchLowerCase = (searchInput || '').toLowerCase()\r\n      const entries = (this.lowerCaseItems as string[])\r\n      .map((s: string, index: number): [string, number] => [s, index])\r\n      .filter((si: [string, number]): boolean => {\r\n        const [s, i] = si\r\n        if (!searchLowerCase) return true\r\n        return s.indexOf(searchLowerCase) !== -1\r\n      })\r\n      .map((si: [string, number]) => {\r\n        const [s, index] = si\r\n        return {\r\n          text: (this.items as string[])[index],\r\n          value: (this.items as string[])[index],\r\n        }\r\n      })\r\n\r\n      if (!(searchLowerCase in this.itemsByValue)) {\r\n        return entries\r\n          .concat([{\r\n            text: searchInput || '',\r\n            value: searchInput || '',\r\n          }])\r\n      } else {\r\n        return entries\r\n      }\r\n    },\r\n\r\n    lowerCaseItems(): string[]{\r\n      return (this.items as any as string[]).map((s: string) => s.toLowerCase())\r\n    },\r\n\r\n    itemsByValue (): {[k: string]: string} {\r\n      return _.keyBy(this.lowerCaseItems, i => i)\r\n    },\r\n  },\r\n\r\n  data () {\r\n    return {\r\n      searchInput: null as string | null,\r\n      showMenu: false as boolean,\r\n      selection: -1,\r\n      blurTimeout: null as number | null,\r\n    }\r\n  },\r\n\r\n  mounted (): void {\r\n    this.$watch('value', (v: any) => {\r\n      this.searchInput = this.value as string;\r\n    }, {immediate: true})\r\n\r\n    this.$watch('listItems', (v: any) => {\r\n      this.selection = -1\r\n    })\r\n\r\n    this.$watch('selection', (v: any) => {\r\n      // This is super hacky, but it's because\r\n      // Vue doesn't honour the v-for order\r\n      // when creating an array-based ref\r\n      const r = (this.$refs.selectionItems as Vue).$el.children[v]\r\n      if (r) {\r\n        r.parentElement!.scrollTo(\r\n          0,\r\n          (r as HTMLElement).offsetTop\r\n        )\r\n      }\r\n    })\r\n  },\r\n\r\n  methods: {\r\n    handleClick(item: {text: any, value: any}): void {\r\n      this.handleSelect(item)\r\n      this.focusBack()\r\n\r\n      setTimeout(() => {\r\n        this.focusBack()\r\n      }, 1)\r\n    },\r\n\r\n    handleSelect(item: {text: any, value: any}): void {\r\n      console.log('handleSelect')\r\n      this.$emit('input', item.value)\r\n      this.showMenu = false\r\n      this.searchInput = item.text\r\n      this.selection = -1\r\n    },\r\n\r\n    handleBlur(e: FocusEvent): void {\r\n      // user may have clicked on a list item -- so don't\r\n      // hide the menu immediately\r\n      const target = e.relatedTarget\r\n      if (target &&\r\n        target instanceof HTMLElement &&\r\n        (\r\n          isDescendentOf(\r\n            target,\r\n            this.$refs.inputParent as Element as HTMLElement) ||\r\n          isDescendentOf(\r\n            target,\r\n            (this.$refs.selectionItems as Vue).$el as Element as HTMLElement)\r\n        )\r\n      ) {\r\n        return\r\n      }\r\n\r\n      console.log('handleBlur', e.relatedTarget)\r\n      this.blurTimeout = setTimeout(() => {\r\n        console.log('blurTimeout')\r\n        this.$emit('input', (\r\n          (this.selection !== -1 && this.listItems[this.selection].value) ||\r\n          this.searchInput ||\r\n          ''\r\n        ).trim() || null)\r\n\r\n        this.showMenu = false\r\n        this.blurTimeout = null\r\n        this.$emit('blur')\r\n      }, 1)\r\n    },\r\n\r\n    // If we programmatically bring back focus,\r\n    // clear the blur timeout\r\n    handleFocus(e?: FocusEvent): void {\r\n      if (this.blurTimeout !== null) {\r\n        clearTimeout(this.blurTimeout)\r\n        this.blurTimeout = null\r\n      } else {\r\n      }\r\n    },\r\n\r\n    handleShowMenu(): void {\r\n      this.showMenu = true\r\n      this.focusBack()\r\n\r\n      setTimeout(() => {\r\n        this.focusBack()\r\n      }, 1)\r\n    },\r\n\r\n    focusBack() {\r\n      this.handleFocus()\r\n      ; (this.$refs.myinput as HTMLInputElement).focus()\r\n    },\r\n\r\n    selectNext(): void {\r\n      if (this.selection < this.listItems.length - 1) {\r\n        this.selection += 1\r\n      }\r\n    },\r\n\r\n    selectPrev(): void {\r\n      if (this.selection > 0) {\r\n        this.selection -= 1\r\n      }\r\n    },\r\n\r\n    selectCurrent(event: KeyboardEvent): void {\r\n      event.preventDefault()\r\n      if (this.selection < this.listItems.length &&\r\n        this.selection >= 0) {\r\n        this.handleSelect(this.listItems[this.selection])\r\n        this.focusBack()\r\n      }\r\n    },\r\n\r\n    isSelected(item: {text: string, value: string}): boolean {\r\n      return this.listItems[this.selection] === item\r\n    },\r\n\r\n    notify(message: string) {\r\n      // console.log(message)\r\n    }\r\n  }\r\n})\r\n\r\nfunction isDescendentOf(e: HTMLElement, f: HTMLElement): boolean {\r\n  let current: HTMLElement | null = e\r\n\r\n  while (current) {\r\n    if (current === f) return true\r\n    current = current.parentElement\r\n  }\r\n  return false\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditingDropdown.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditingDropdown.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./EditingDropdown.vue?vue&type=template&id=42201d8d&scoped=true&\"\nimport script from \"./EditingDropdown.vue?vue&type=script&lang=ts&\"\nexport * from \"./EditingDropdown.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./EditingDropdown.vue?vue&type=style&index=0&id=42201d8d&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"42201d8d\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-dialog',{attrs:{\"value\":_vm.$store.state.dialogs.activeDialog === _vm.name,\"scrollable\":\"\"},on:{\"input\":_vm.handleDialogInput}},[_c('v-card',[_c('v-card-title',[_c('v-layout',[_c('h2',[_vm._v(_vm._s(_vm.title))]),_vm._t(\"header\"),_c('v-spacer'),_c('v-btn',{attrs:{\"small\":\"\",\"icon\":\"\"},on:{\"click\":_vm.handleDialogInput}},[_c('v-icon',[_vm._v(\"close\")])],1)],2)],1),_c('v-card-text',{style:(_vm.height ? {height: _vm.height} : {})},[_vm._t(\"default\")],2)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nexport default Vue.extend({\r\n  props: {\r\n    name: {type: String, required: true},\r\n    title: {type: String, required: false},\r\n    height: {type: String, required: false},\r\n  },\r\n\r\n  methods: {\r\n    handleDialogInput () {\r\n      this.$store.commit('dialogs/hideDialog')\r\n    },\r\n  }\r\n})\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StandardDialog.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StandardDialog.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./StandardDialog.vue?vue&type=template&id=45c6d76b&\"\nimport script from \"./StandardDialog.vue?vue&type=script&lang=ts&\"\nexport * from \"./StandardDialog.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport _ from 'lodash'\r\nimport store from '@/store'\r\nimport {KeyableTrip} from '@/lib/types'\r\nimport {Person} from '@/store/vehicles'\r\nimport {TripsState, ScheduleByTeam, tripKey} from '@/store/trips'\r\nimport { VehiclesState } from '@/store/vehicles';\r\nimport EditingCell from '@/dialogs/teams/EditingCell.vue';\r\nimport PersonView from '@/dialogs/teams/PersonView.vue';\r\nimport VehicleView from '@/dialogs/teams/VehicleView.vue';\r\nimport EditingDropdown from '@/dialogs/teams/EditingDropdown.vue';\r\nimport StandardDialog from '@/dialogs/StandardDialog.vue';\r\nimport assert from 'assert';\r\n\r\nexport default Vue.extend({\r\n  data () {\r\n    return {\r\n      defaultList: [],\r\n\r\n      newTeam: {\r\n        driver: null,\r\n        medic: null,\r\n        vehicle: null,\r\n      },\r\n\r\n      errors: {} as {[k: string]: string}\r\n    }\r\n  },\r\n\r\n  components: {\r\n    EditingCell,\r\n    EditingDropdown,\r\n    PersonView,\r\n    StandardDialog,\r\n    VehicleView,\r\n  },\r\n\r\n  computed: {\r\n    vehicles () {\r\n      return ((store.state as any).vehicles as VehiclesState).vehicles\r\n    },\r\n    teams () {\r\n      return (store.state.trips as TripsState).teams || []\r\n    },\r\n    staffList (): ({text: string, value: string}[]) {\r\n      return _.sortBy(this.$store.getters['vehicles/personArray'].map((s: Person) => s.name))\r\n    },\r\n    scheduleByTeam () {\r\n      return (store.state.trips.scheduleByTeam) as ScheduleByTeam\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    handleDialogInput (inp: any) {\r\n      if (!inp) {\r\n        store.commit('dialogs/hideDialog')\r\n      }\r\n    },\r\n\r\n    handleMemberDrag(event: DragEvent, member: string) {\r\n      // event.preventDefault()\r\n      if (!event.dataTransfer) throw new Error('Unexpected null dataTransfer')\r\n\r\n      event.dataTransfer.effectAllowed = 'move'\r\n      event.dataTransfer.dropEffect = \"move\"\r\n      // Firefox insists on this to activate the drag\r\n      event.dataTransfer.setData('text/member-drag', member)\r\n    },\r\n\r\n    handleVehicleDrag(event: DragEvent, vehicle: string) {\r\n      // event.preventDefault()\r\n      if (!event.dataTransfer) throw new Error('Unexpected null dataTransfer')\r\n\r\n      event.dataTransfer.effectAllowed = 'move'\r\n      event.dataTransfer.dropEffect = \"move\"\r\n      // Firefox insists on this to activate the drag\r\n      event.dataTransfer.setData('text/vehicle-drag', vehicle)\r\n    },\r\n\r\n    createNewTeam(value: string, known: 'driver' | 'medic' | 'vehicle') {\r\n      store.commit('trips/updateTeams', this.teams.concat([\r\n        {\r\n          driver: known == 'driver' ? value : null,\r\n          medic: known == 'medic' ? value : null,\r\n          vehicle: known == 'vehicle' ? value : null,\r\n        }\r\n      ]))\r\n    },\r\n\r\n    updateTeam(index: number, value: string, known: 'driver' | 'medic' | 'vehicle') {\r\n      const current = this.teams[index]\r\n\r\n      assert(current)\r\n\r\n      const newTeam = {\r\n        ...current,\r\n        [known]: value\r\n      }\r\n\r\n      if (this.teamExists(index, newTeam)) {\r\n        return this.flashError(index, `This team (${newTeam.driver}, ${newTeam.medic}) already exists`)\r\n      }\r\n\r\n      store.commit('trips/updateTeams',\r\n        this.teams.slice(0, index)\r\n        .concat([newTeam])\r\n        .concat(this.teams.slice(index + 1))\r\n      )\r\n    },\r\n\r\n    dropTeam(index: number) {\r\n      store.commit('trips/updateTeams',\r\n        this.teams.slice(0, index)\r\n        .concat(this.teams.slice(index + 1))\r\n      )\r\n    },\r\n\r\n    teamHasTrips(team: KeyableTrip):boolean {\r\n      return _.sum(\r\n        this.scheduleByTeam[tripKey(team)].rows.map(tripsInRow => tripsInRow.length)\r\n      ) > 0\r\n    },\r\n\r\n    // Argh hacky way of handling this. Dammit. How to prevent\r\n    teamExists(notInIndex: number | null, team: KeyableTrip): boolean {\r\n      return !!this.teams.find((existingTeam: KeyableTrip, index: number): boolean => {\r\n        if (index === notInIndex) return false\r\n\r\n        if (tripKey(team) === tripKey(existingTeam)) {\r\n          return true\r\n        }\r\n\r\n        return false\r\n      })\r\n    },\r\n\r\n    flashError(index: number | 'new', message: string) {\r\n      this.errors = {...this.errors, [index.toString()]: message}\r\n      setTimeout(() => {\r\n        if (this.errors[index.toString()] === message) {\r\n          const {[index.toString()]: a, ...rest} = this.errors\r\n          this.errors = rest\r\n        }\r\n      }, 4000)\r\n    },\r\n\r\n    maybeCreateTeam (): void {\r\n      if (this.newTeam.driver || this.newTeam.medic) {\r\n        setTimeout(() => {\r\n          const {driver, medic} = this.newTeam\r\n\r\n          if (this.teamExists(null, this.newTeam)) {\r\n            return this.flashError('new', `This team (${driver}, ${medic}) already exists`)\r\n          }\r\n\r\n          store.commit('trips/updateTeams', this.teams.concat([\r\n            {driver, medic, vehicle: null}\r\n          ]))\r\n          this.newTeam = {driver: null, medic: null, vehicle: null}\r\n          this.$nextTick(() => {\r\n            const key = `${driver},${medic}`\r\n            const wrapper = (this.$refs.teamsGrid as Element[] as HTMLElement[])\r\n              .find(d => d.dataset.key === key)\r\n            const inputs = wrapper &&\r\n              [...wrapper.querySelectorAll('.cell')] as HTMLInputElement[] | null\r\n\r\n            if (inputs) {\r\n              inputs[inputs.length - 1].focus()\r\n            }\r\n          })\r\n        }, 1)\r\n      }\r\n    }\r\n  }\r\n})\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Teams.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Teams.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Teams.vue?vue&type=template&id=cae8e4be&scoped=true&\"\nimport script from \"./Teams.vue?vue&type=script&lang=ts&\"\nexport * from \"./Teams.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Teams.vue?vue&type=style&index=0&id=cae8e4be&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"cae8e4be\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('StandardDialog',{attrs:{\"name\":\"persons\",\"title\":\"Manage people\"}},[_c('div',{staticClass:\"persons-grid\"},[_c('div',{staticClass:\"action\"}),_c('div',{staticClass:\"cell\"},[_c('strong',[_vm._v(\"Name\")])]),_c('div',{staticClass:\"cell\"},[_c('strong',[_vm._v(\"Telephone number\")])]),_c('div',{staticClass:\"cell\"},[_c('strong',[_vm._v(\"Last updated\")])])]),_vm._l((_vm.personList),function(person,i){return _c('div',{key:i,ref:\"personsGrid\",refInFor:true,attrs:{\"data-key\":person.name}},[_c('div',{staticClass:\"persons-grid\"},[_c('div',{staticClass:\"action\"},[_c('span',{on:{\"click\":function($event){return _vm.dropPerson(person)}}},[_c('v-icon',[_vm._v(\"delete\")])],1)]),_c('EditingCell',{staticClass:\"cell\",attrs:{\"disabled\":true}},[_vm._v(\" \"+_vm._s(person.name)+\" \")]),_c('EditingCell',{staticClass:\"cell\",scopedSlots:_vm._u([{key:\"editor\",fn:function(editor){return [_c('EditingTextField',{attrs:{\"value\":person.telephone},on:{\"change\":function($event){return _vm.updatePerson(i, $event, 'telephone')},\"blur\":function($event){return editor.blur()}}})]}}],null,true)},[(person.telephone)?[_vm._v(\" \"+_vm._s(person.telephone)+\" \")]:_c('span',{staticClass:\"placeholder\"},[_vm._v(\"(No telephone)\")])],2),_c('EditingCell',{staticClass:\"cell\",attrs:{\"disabled\":true}},[_vm._v(\" \"+_vm._s(person.updated && _vm.sAgo(person.updated, 'DD MMM YYYY, hh:mm:ss'))+\" \")])],1),(_vm.errors[i])?_c('v-alert',{attrs:{\"value\":true,\"type\":\"error\"}},[_vm._v(\" \"+_vm._s(_vm.errors[i])+\" \")]):_vm._e()],1)}),_c('div',{staticClass:\"persons-grid\"},[_c('div',{staticClass:\"action\"},[_vm._v(\" (New) \")]),_c('EditingCell',{staticClass:\"cell\",scopedSlots:_vm._u([{key:\"editor\",fn:function(editor){return [_c('EditingTextField',{on:{\"change\":_vm.maybeCreatePerson,\"blur\":function($event){return editor.blur()}},model:{value:(_vm.newPerson.name),callback:function ($$v) {_vm.$set(_vm.newPerson, \"name\", $$v)},expression:\"newPerson.name\"}})]}}])},[(_vm.newPerson.name)?[_vm._v(\" \"+_vm._s(_vm.newPerson.name)+\" \")]:_c('span',{staticClass:\"placeholder\"},[_vm._v(\"(Name)\")])],2),_c('EditingCell',{staticClass:\"cell\"}),_c('EditingCell',{staticClass:\"cell\"})],1),(_vm.errors['new'])?_c('v-alert',{attrs:{\"value\":true,\"type\":\"error\"}},[_vm._v(\" \"+_vm._s(_vm.errors['new'])+\" \")]):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('input',_vm._g(_vm._b({ref:\"myinput\",on:{\"input\":function($event){return _vm.$emit('input', $event.target.value)},\"change\":function($event){return _vm.$emit('change', $event.target.value)}}},'input',_vm.$attrs,false),_vm.unhandledListeners))}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nexport default Vue.extend({\r\n  computed: {\r\n    unhandledListeners(): any {\r\n      const {change, input, ...rest} = this.$listeners\r\n      return rest\r\n    }\r\n  }\r\n})\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditingTextField.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditingTextField.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./EditingTextField.vue?vue&type=template&id=32b07e69&scoped=true&\"\nimport script from \"./EditingTextField.vue?vue&type=script&lang=ts&\"\nexport * from \"./EditingTextField.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./EditingTextField.vue?vue&type=style&index=0&id=32b07e69&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"32b07e69\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport _ from 'lodash'\r\nimport Vue from 'vue'\r\nimport store from '@/store'\r\nimport { VehiclesState, Person, PersonList } from '@/store/vehicles';\r\nimport EditingCell from '@/dialogs/teams/EditingCell.vue';\r\nimport EditingTextField from '@/dialogs/teams/EditingTextField.vue';\r\nimport PersonView from '@/dialogs/teams/PersonView.vue';\r\nimport StandardDialog from '@/dialogs/StandardDialog.vue';\r\nimport assert from 'assert';\r\nimport sAgo from 's-ago';\r\n\r\nexport default Vue.extend({\r\n  data () {\r\n    return {\r\n      reference: Date.now(),\r\n\r\n      newPerson: {\r\n        name: null as string | null,\r\n        telephone: null as string | null,\r\n      },\r\n\r\n      errors: {} as {[k: string]: string}\r\n    }\r\n  },\r\n\r\n  components: {\r\n    EditingCell,\r\n    EditingTextField,\r\n    PersonView,\r\n    StandardDialog\r\n  },\r\n\r\n  computed: {\r\n    sAgo: () => (d: any): string => sAgo(new Date(d)),\r\n\r\n    personList () {\r\n      return _.sortBy(\r\n        (store.getters['vehicles/personArray'] as Person[]),\r\n        (p: Person) => p.created < this.reference\r\n          ? [0, p.name, null]\r\n          : [1, null, -p.created]\r\n      )\r\n    },\r\n\r\n    personByLowercaseKey () {\r\n      return _.keyBy(\r\n        (store.getters['vehicles/personArray'] as Person[]),\r\n        (p: Person) => p.name.toLowerCase()\r\n      )\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    dialogShown () {\r\n      // Shuffle the list every time the dialog is shown\r\n      this.reference = Date.now()\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    handleDialogInput (inp: any) {\r\n      if (!inp) {\r\n        store.commit('dialogs/hideDialog')\r\n      }\r\n    },\r\n\r\n    dropPerson(person: Person) {\r\n      if (confirm(`Are you sure you want to delete ${person.name}?`)) {\r\n        this.$store.commit('vehicles/deletePerson', person)\r\n      }\r\n    },\r\n\r\n    updatePerson(index: number, value: string, field: 'telephone') {\r\n      this.$store.commit('vehicles/updatePerson', {\r\n        ...this.personList[index],\r\n        [field]: value,\r\n      })\r\n    },\r\n\r\n    // Argh hacky way of handling this. Dammit. How to prevent\r\n    personExists(notInIndex: number | null, name: string): boolean {\r\n      return name.toLowerCase() in this.personByLowercaseKey\r\n    },\r\n\r\n    flashError(index: number | 'new', message: string) {\r\n      this.errors = {...this.errors, [index.toString()]: message}\r\n      setTimeout(() => {\r\n        if (this.errors[index.toString()] === message) {\r\n          const {[index.toString()]: a, ...rest} = this.errors\r\n          this.errors = rest\r\n        }\r\n      }, 4000)\r\n    },\r\n\r\n    maybeCreatePerson (): void {\r\n      if (this.newPerson.name) {\r\n        const {name, telephone} = this.newPerson\r\n\r\n        if (this.personExists(null, name)) {\r\n          return this.flashError('new', `This person (${name}) already exists`)\r\n        }\r\n\r\n        store.commit('vehicles/updatePerson', {name, telephone, created: Date.now(), updated: Date.now()} as Person)\r\n        this.newPerson = {name: null, telephone: null}\r\n        this.$nextTick(() => {\r\n          const key = name\r\n          const wrapper = (this.$refs.personsGrid as Element[] as HTMLElement[])\r\n            .find(d => d.dataset.key === key)\r\n          const inputs = wrapper &&\r\n            [...wrapper.querySelectorAll('.cell')] as HTMLInputElement[] | null\r\n\r\n          if (inputs) {\r\n            inputs[1].focus()\r\n          }\r\n        })\r\n      }\r\n    }\r\n  }\r\n})\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Persons.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Persons.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Persons.vue?vue&type=template&id=ab70a566&scoped=true&\"\nimport script from \"./Persons.vue?vue&type=script&lang=ts&\"\nexport * from \"./Persons.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Persons.vue?vue&type=style&index=0&id=ab70a566&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ab70a566\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('StandardDialog',{attrs:{\"name\":\"manifest\",\"title\":\"Trip manifest\"}},[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('v-checkbox',{attrs:{\"label\":\"Show hidden trips\"},model:{value:(_vm.showHiddenTrips),callback:function ($$v) {_vm.showHiddenTrips=$$v},expression:\"showHiddenTrips\"}})],1),_c('ManifestComponent',{attrs:{\"showHiddenTrips\":_vm.showHiddenTrips}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport store from '@/store'\r\nimport {Team, KeyableTrip, Trip} from '@/lib/types'\r\nimport {TripsState, ScheduleByTeam, tripKey, ProcessedScheduleData, deserializeArray, readTeams} from '@/store/trips'\r\nimport { VehiclesState } from '@/store/vehicles';\r\nimport StandardDialog from '@/dialogs/StandardDialog.vue';\r\nimport ManifestComponent from '@/components/Manifest.vue';\r\nimport assert from 'assert';\r\nimport dateformat from 'dateformat';\r\nimport { db } from '@/lib/firebase';\r\nimport _ from 'lodash';\r\n\r\nexport default Vue.extend({\r\n  data () {\r\n    return {\r\n      showHiddenTrips: false,\r\n    }\r\n  },\r\n\r\n  components: {\r\n    StandardDialog,\r\n    ManifestComponent,\r\n  },\r\n\r\n  computed: {\r\n    dateformat: () => dateformat,\r\n  },\r\n\r\n  methods: {\r\n    handleDialogInput () {\r\n      this.$store.commit('dialogs/hideDialog')\r\n    },\r\n  }\r\n})\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Manifest.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Manifest.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Manifest.vue?vue&type=template&id=4e975610&\"\nimport script from \"./Manifest.vue?vue&type=script&lang=ts&\"\nexport * from \"./Manifest.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('StandardDialog',{attrs:{\"title\":\"Message Log\",\"name\":\"messages\",\"height\":\"80vh\"}},[_c('v-layout',{attrs:{\"column\":\"\"}},[_c('v-flex',[_c('v-menu',{attrs:{\"offset-y\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-text-field',_vm._g({staticStyle:{\"width\":\"250px\"},attrs:{\"value\":_vm.maxTime && _vm.dateformat(_vm.maxTime, 'dd mmm yyyy'),\"clearable\":\"\",\"label\":\"Messages sent on or before\",\"readonly\":\"\"},on:{\"click:clear\":function($event){return _vm.handleDateInput(null)}}},on))]}}])},[_c('v-date-picker',{attrs:{\"value\":_vm.maxTime,\"max\":_vm.dateformat(Date.now(), 'yyyy-mm-dd')},on:{\"input\":_vm.handleDateInput}})],1)],1),_c('v-flex',{attrs:{\"grow\":\"\",\"shrink\":\"\"}},[_c('table',{staticClass:\"messages-table\",staticStyle:{\"width\":\"100%\"}},[_c('thead',[_c('tr',[_c('th',{staticStyle:{\"width\":\"4em\"}},[_vm._v(\"S/No\")]),_c('th',{staticStyle:{\"width\":\"20em\"}},[_vm._v(\"Recipients\")]),_c('th',{staticStyle:{\"width\":\"20em\"}},[_vm._v(\"Date\")]),_c('th',{staticStyle:{\"width\":\"60%\"}},[_vm._v(\"Message\")])])]),_c('tbody',_vm._l((_vm.currentPage.data),function(row,index){return _c('tr',{key:row.id},[_c('td',[_vm._v(_vm._s(index + 1))]),_c('td',[_vm._v(_vm._s(row.recipients.join(', ')))]),_c('td',[_vm._v(_vm._s(row.created && _vm.dateformat(row.created, 'dd mmm yyyy, HH:MM:ss')))]),_c('td',[_vm._v(\" \"+_vm._s(row.message)+\" \"),_c('MessageStatusChecker',{attrs:{\"status\":row.status,\"id\":row.id},on:{\"updated\":function($event){row.status = $event}}})],1)])}),0),_c('tfoot',[_c('tr',[_c('td',{attrs:{\"colspan\":\"4\"}},[_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.loadMore($event)}}},[_vm._v(\"Load more\")])])])])])])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"message-status-checker\"},[(_vm.status === 'unsent')?[_vm._v(\" … \")]:(_vm.status === 'sent')?[_vm._v(\" ✓ \")]:[_vm._v(\" ? \")]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport {db} from '@/lib/firebase';\r\n\r\nexport default Vue.extend({\r\n  props: ['status', 'id'],\r\n\r\n  data () {\r\n    return {\r\n      unwatch: null as (() => void) | null,\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    isWatching (): boolean {\r\n      return this.status === 'unsent'\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    isWatching: {\r\n      immediate: true,\r\n      handler() {\r\n        if (this.isWatching) {\r\n          this.unwatch && this.unwatch()\r\n          this.watch()\r\n        } else {\r\n          this.unwatch && this.unwatch()\r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    watch () {\r\n      const callback = (v: firebase.database.DataSnapshot | null) => {\r\n        if (v) {\r\n          this.$emit('updated', v.val())\r\n        }\r\n      }\r\n      db.ref(`/sms/${this.id}/status`).on('value', callback)\r\n      this.unwatch = () => {\r\n        this.unwatch = null\r\n        db.ref(`/sms/${this.id}/status`).off('value', callback)\r\n      }\r\n    },\r\n  },\r\n})\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageStatusChecker.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageStatusChecker.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./MessageStatusChecker.vue?vue&type=template&id=47102bcc&scoped=true&\"\nimport script from \"./MessageStatusChecker.vue?vue&type=script&lang=ts&\"\nexport * from \"./MessageStatusChecker.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./MessageStatusChecker.vue?vue&type=style&index=0&id=47102bcc&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"47102bcc\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport store from '@/store'\r\nimport {KeyableTrip} from '@/lib/types'\r\nimport {TripsState, ScheduleByTeam, tripKey} from '@/store/trips'\r\nimport { VehiclesState } from '@/store/vehicles';\r\nimport PersonView from '@/dialogs/teams/PersonView.vue';\r\nimport StandardDialog from '@/dialogs/StandardDialog.vue';\r\nimport MessageStatusChecker from '@/dialogs/messages/MessageStatusChecker.vue';\r\nimport dateformat from 'dateformat'\r\nimport assert from 'assert';\r\nimport _ from 'lodash';\r\n\r\nimport {db} from '@/lib/firebase'\r\nimport uniqueId from '@/lib/uniqueId'\r\nimport {Message, MessageClient, parseMessages} from '@/lib/messages'\r\n\r\nexport default Vue.extend({\r\n  data () {\r\n    return {\r\n      currentPage: {\r\n        data: [] as Message[],\r\n      },\r\n\r\n      maxTime: null as string | null,\r\n\r\n      errors: {} as {[k: string]: string}\r\n    }\r\n  },\r\n\r\n  components: {\r\n    MessageStatusChecker,\r\n    PersonView,\r\n    StandardDialog,\r\n  },\r\n\r\n  computed: {\r\n    dateformat: () => dateformat,\r\n    vehicles () {\r\n      return ((store.state as any).vehicles as VehiclesState).vehicles\r\n    },\r\n    teams () {\r\n      return (store.state.trips as TripsState).teams || []\r\n    },\r\n    scheduleByTeam () {\r\n      return (store.state.trips.scheduleByTeam) as ScheduleByTeam\r\n    },\r\n  },\r\n\r\n  created () {\r\n    this.loadData()\r\n    ;(this as any).$messageClient = new MessageClient(db)\r\n  },\r\n\r\n  methods: {\r\n    // TODO move to MessageClient\r\n    loadData(lastId: number | null = null) {\r\n      if ((this as any).$inflightPromise) return\r\n\r\n      const ref = db.ref('/sms')\r\n        .orderByChild('created')\r\n\r\n      // Note: unless you key by uniqueId\r\n      // or have very low volume (thus no duplicates)\r\n      // this could easily overlook\r\n      // messages at boundaries\r\n      const filteredRef = lastId\r\n        ? ref.endAt(lastId - 1e-14 * lastId) // rough ulp?\r\n        : ref\r\n\r\n      const promise = (this as any).$inflightPromise = filteredRef\r\n        .limitToLast(20)\r\n        .once('value')\r\n        .then((v) => {\r\n          if ((this as any).$inflightPromise !== promise) return\r\n\r\n          const messages = parseMessages(v)\r\n\r\n          messages.forEach((m: Message) => {\r\n            this.currentPage.data.push(m)\r\n          })\r\n\r\n          ;(this as any).$inflightPromise = null\r\n        }, (e) => {\r\n          console.error(e)\r\n          ;(this as any).$inflightPromise = null\r\n        })\r\n    },\r\n\r\n    loadMore () {\r\n      if (this.currentPage.data.length === 0) {\r\n        this.loadData(null)\r\n      } else {\r\n        const messages = this.currentPage.data\r\n        this.loadData(messages[messages.length - 1].created)\r\n      }\r\n    },\r\n\r\n    handleDateInput(i: string | null) {\r\n      this.maxTime = i\r\n      this.currentPage.data = []\r\n      ;(this as any).$inflightPromise = null\r\n      this.loadData(\r\n        i === null ? null : new Date(i + 'T23:59:59.999+0800').getTime()\r\n      )\r\n    }\r\n  }\r\n})\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Messages.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Messages.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Messages.vue?vue&type=template&id=052f4e02&\"\nimport script from \"./Messages.vue?vue&type=script&lang=ts&\"\nexport * from \"./Messages.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Messages.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('StandardDialog',{attrs:{\"title\":\"Send SMS\",\"name\":\"draftMessage\",\"height\":\"80vh\"}},[_c('h3',[_vm._v(\"Send to: \"),_vm._l((_vm.persons),function(person,i){return [(person.name)?_c('span',{key:i},[_vm._v(\" \"+_vm._s(person.name)+\" (\"+_vm._s(person.telephone)+\") \")]):_c('span',{key:i},[_vm._v(\" \"+_vm._s(person.telephone)+\" \")]),(i < _vm.persons.length - 1)?[_vm._v(\",\")]:_vm._e()]})],2),_c('v-alert',{attrs:{\"value\":_vm.hasPersonsMissingPhoneNumbers}},[_vm._v(\" Some people on this list do not have phone numbers. \"),_c('strong',[_vm._v(\"They will not receive your message\")]),_vm._v(\". Please update the phone number list before continuing. \"),_c('v-btn',{on:{\"click\":function($event){return _vm.$store.commit('dialogs/showDialog', 'persons')}}},[_vm._v(\" Update the phone number list. \")])],1),_c('div',{staticClass:\"message-bubble\"},[_c('v-textarea',{ref:\"message\",attrs:{\"label\":\"Message\",\"rows\":\"5\",\"auto-grow\":\"\"},model:{value:(_vm.m.message),callback:function ($$v) {_vm.$set(_vm.m, \"message\", $$v)},expression:\"m.message\"}})],1),_c('v-btn',{attrs:{\"color\":\"primary\"},on:{\"click\":_vm.sendMessageAndClose}},[_vm._v(\" Send \")]),_c('v-btn',{on:{\"click\":function($event){return _vm.$store.commit('dialogs/hideDialog')}}},[_vm._v(\" Cancel \")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport {db} from '@/lib/firebase'\r\nimport uniqueId from '@/lib/uniqueId'\r\nimport {Message, MessageClient} from '@/lib/messages'\r\nimport vehiclesStore from '@/store/vehicles'\r\nimport {Person} from '@/store/vehicles'\r\nimport {TripsState} from '@/store/trips'\r\nimport store from '@/store'\r\nimport StandardDialog from '@/dialogs/StandardDialog.vue';\r\nimport assert from 'assert'\r\n\r\ninterface Recipient {\r\n  name?: string,\r\n  telephone: string,\r\n}\r\n\r\nexport default Vue.extend({\r\n  props: ['recipients', 'message', 'trip'],\r\n\r\n  data () {\r\n    return {\r\n      m: {\r\n        recipients: [],\r\n        message: '',\r\n      }\r\n    }\r\n  },\r\n\r\n  components: {\r\n    StandardDialog,\r\n  },\r\n\r\n  created () {\r\n    (this as any).$messageClient = new MessageClient(db)\r\n    this.m.recipients = this.recipients\r\n    this.m.message = this.message\r\n  },\r\n\r\n  mounted () {\r\n    const messager: any = this.$refs['message']\r\n\r\n    this.$nextTick(() => {\r\n      messager\r\n        .$el\r\n        .querySelector('textarea')\r\n        .select()\r\n    })\r\n  },\r\n\r\n  computed: {\r\n    persons(): Recipient[] {\r\n      // Quadratic but who cares\r\n      return this.recipients.map((s: String): Person => {\r\n        return store.getters['vehicles/personArray']\r\n          .find((p: Person) => p.telephone === s)\r\n          || {telephone: s}\r\n      })\r\n    },\r\n\r\n    hasPersonsMissingPhoneNumbers(): boolean {\r\n      return this.recipients.length < [\r\n        store.state.trips.trips[this.trip].driver,\r\n        store.state.trips.trips[this.trip].medic,\r\n      ].filter(s => Boolean(s)).length\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    sendMessageAndClose(): void {\r\n      ((this as any).$messageClient as MessageClient).createMessage({\r\n        recipients: this.m.recipients,\r\n        message: this.m.message.trim(),\r\n        trip: this.trip,\r\n      })\r\n      if (this.trip && (store.state.trips as TripsState).trips[this.trip]) {\r\n        store.commit('trips/markTripSMSSent', {\r\n          tripId: this.trip,\r\n        })\r\n      }\r\n      store.commit('dialogs/hideDialog')\r\n    }\r\n  }\r\n})\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DraftMessage.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DraftMessage.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DraftMessage.vue?vue&type=template&id=58092226&\"\nimport script from \"./DraftMessage.vue?vue&type=script&lang=ts&\"\nexport * from \"./DraftMessage.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./DraftMessage.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('StandardDialog',{attrs:{\"name\":\"templates\",\"title\":\"Trip templates\"}},[_c('v-layout',{staticStyle:{\"height\":\"75vh\"}},[_c('v-list',{staticClass:\"template-list-section\"},[_vm._l((_vm.templates),function(template){return _c('v-list-tile',{key:template.id,class:{active: _vm.selectedTemplateId === template.id},on:{\"click\":function($event){_vm.selectedTemplateId = template.id}}},[_c('v-layout',[_c('div',[_vm._v(\" \"+_vm._s(template.name)+\" \")]),_c('v-spacer'),_c('v-icon',{on:{\"click\":function($event){return _vm.startEditingTemplate(template)}}},[_vm._v(\"edit\")]),_c('v-menu',{attrs:{\"offset-y\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-icon',_vm._g({},on),[_vm._v(\"more_horiz\")])]}}],null,true)},[_c('v-list',[_c('v-list-tile',{on:{\"click\":function($event){return _vm.handleDeleteClick(template.id)}}},[_vm._v(\" Delete \")])],1)],1)],1)],1)}),_c('v-list-tile',[_c('v-text-field',{attrs:{\"placeholder\":\"(Create new template)\"},on:{\"change\":function($event){return _vm.insertTemplate($event)}},model:{value:(_vm.newTemplate),callback:function ($$v) {_vm.newTemplate=$$v},expression:\"newTemplate\"}})],1)],2),_c('div',{staticClass:\"table-section\"},[(_vm.previewTrips)?_c('v-item-group',{staticClass:\"table-toolbar\"},[_c('v-btn',{on:{\"click\":_vm.addTemplateJobsToSchedule}},[_vm._v(\"Add All\")])],1):_vm._e(),_c('div',{staticClass:\"table-scroll\"},[_c('table',{staticClass:\"templates-table\"},[_c('thead',[_c('tr',[_c('th',[_vm._v(\"Team\")]),_c('th',[_vm._v(\"Start\")]),_c('th',[_vm._v(\"End\")]),_c('th',[_vm._v(\"Description\")]),_c('th',[_vm._v(\"Actions\")])])]),(_vm.previewTrips)?_c('tbody',_vm._l((_vm.previewTrips),function(trip){return _c('tr',{key:trip.id,class:{cancelled: trip.cancelled}},[_c('td',[_vm._v(_vm._s(trip.driver)+\", \"+_vm._s(trip.medic))]),_c('td',[_vm._v(_vm._s(_vm.dateformat(trip.startTime, 'HH:MM', true)))]),_c('td',[_vm._v(_vm._s(trip.endTime && _vm.dateformat(trip.endTime, 'HH:MM', true)))]),_c('td',[_c('div',[_vm._v(_vm._s(trip.description))]),(trip.startAddress || trip.startLocation)?_c('div',[_c('b',[_vm._v(\"From: \")]),_vm._v(_vm._s(trip.startAddress)+\" \"+_vm._s(trip.startLocation))]):_vm._e(),(trip.endAddress || trip.endLocation)?_c('div',[_c('b',[_vm._v(\"To: \")]),_vm._v(_vm._s(trip.endAddress)+\" \"+_vm._s(trip.endLocation)+\" \")]):_vm._e()]),_c('td',[(_vm.$store.state.trips.mode.type === 'date')?[(!_vm.scheduleHasTrip(trip))?_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){return _vm.addTripToSchedule(trip)}}},[_c('v-icon',[_vm._v(\"add\")])],1):_c('div',[_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.scrollToTrip(_vm.templateToScheduledTrip[trip.id])}}},[_vm._v(\" \"+_vm._s(trip.driver)+\", \"+_vm._s(trip.medic)+\" \"),_c('br'),_vm._v(\" \"+_vm._s(_vm.dateformat(trip.startTime, 'HH:MM', true))+\" \")])])]:_vm._e()],2)])}),0):_vm._e()])])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport store from '@/store'\r\nimport {Team, KeyableTrip, Trip} from '@/lib/types'\r\nimport {TripsState, ScheduleByTeam, tripKey, ProcessedScheduleData, deserializeArray, readTeams, readTrips, AppMode} from '@/store/trips'\r\nimport { VehiclesState } from '@/store/vehicles';\r\nimport StandardDialog from '@/dialogs/StandardDialog.vue';\r\nimport assert from 'assert';\r\nimport dateformat from 'dateformat';\r\nimport { db } from '@/lib/firebase';\r\nimport _ from 'lodash';\r\nimport uniqueId from '@/lib/uniqueId';\r\nimport { TemplateMetadata } from '@/store/templates';\r\nimport scrollHelper from '@/lib/scrollHelper';\r\n\r\nexport default Vue.extend({\r\n  data () {\r\n    return {\r\n      newTemplate: '',\r\n      selectedTemplateId: null as string | null,\r\n      previewTrips: null as Trip[] | null,\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    templates(): TemplateMetadata[] {\r\n      return _.values(this.$store.state.templates.templates)\r\n    },\r\n    dateformat: () => dateformat,\r\n    templateToScheduledTrip (): {[id: string]: Trip} {\r\n      return _.keyBy(\r\n        this.$store.getters['trips/trips']\r\n          .filter((v: Trip) => v.templateTrip),\r\n        'templateTrip'\r\n      )\r\n    },\r\n    scheduleHasTrip (): (trip: Trip) => Boolean {\r\n      return (trip: Trip) => trip.id in this.templateToScheduledTrip\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    selectedTemplateId(v: string | null) {\r\n      if (v) {\r\n        this.previewTrips = null\r\n\r\n        readTrips({type: 'template', template: v, lastTimestamp: 0})\r\n        .then((trips: Trip[]) => {\r\n          this.previewTrips = trips\r\n        })\r\n      }\r\n    },\r\n  },\r\n\r\n  components: {\r\n    StandardDialog\r\n  },\r\n\r\n  created() {\r\n    this.$store.dispatch('templates/readTemplates')\r\n  },\r\n\r\n  methods: {\r\n    insertTemplate(name: string) {\r\n      this.$store.dispatch('templates/updateTemplate', {\r\n        name,\r\n        id: uniqueId(),\r\n        created: Date.now(),\r\n      })\r\n      this.newTemplate = ''\r\n    },\r\n\r\n    handleDeleteClick(templateId: string) {\r\n      if (confirm(\"Are you sure you want to delete this template?\")) {\r\n        this.$store.dispatch('templates/deleteTemplate', {\r\n          id: templateId,\r\n        })\r\n      }\r\n    },\r\n\r\n    startEditingTemplate(template: TemplateMetadata) {\r\n      const currentMode = this.$store.state.trips.mode as AppMode\r\n      const mode: AppMode = {\r\n        type: 'template',\r\n        template: template.id,\r\n        lastTimestamp: currentMode.type === 'date'\r\n          ? currentMode.timestamp\r\n          : currentMode.lastTimestamp\r\n      }\r\n      this.$store.dispatch('trips/setMode', mode)\r\n      this.$store.commit('dialogs/hideDialog')\r\n    },\r\n\r\n    addTemplateJobsToSchedule(template: string): void {\r\n      if (!this.previewTrips) return\r\n\r\n      for (let trip of this.previewTrips) {\r\n        if (!this.scheduleHasTrip(trip)) {\r\n          this.addTripToSchedule(trip)\r\n        }\r\n      }\r\n    },\r\n\r\n    addTripToSchedule(trip: Trip): void {\r\n      if (this.$store.state.trips.mode.type === 'date') {\r\n        const newTrip: Trip = {\r\n          ...trip,\r\n          created: Date.now(),\r\n          templateTrip: trip.id,\r\n          id: uniqueId(),\r\n        }\r\n\r\n        // Expensive, but fuck it -- we import trips once a day, so the\r\n        // computational complexity doesn't justify a hashmap\r\n        // If there is a relatedTrip, find the trip with the related template ID\r\n        // and assign as this trip's relatedTrip.\r\n        // If found, also replace the relatedTrip's related trip\r\n        if (newTrip.relatedTrip) {\r\n          const relatedTrip = Object.values((this.$store.state.trips as TripsState).trips)\r\n            .find(t => t.templateTrip === newTrip.relatedTrip)\r\n\r\n          if (relatedTrip) {\r\n            newTrip.relatedTrip = relatedTrip.id\r\n            this.$store.commit('trips/updateTrip', {\r\n              tripId: relatedTrip.id,\r\n              updates: {relatedTrip: newTrip.id},\r\n            })\r\n          }\r\n        }\r\n\r\n        this.$store.commit('trips/assignNewlyCreatedJob', {trip: newTrip})\r\n      }\r\n    },\r\n\r\n    scrollToTrip(trip: Trip): void {\r\n      this.$store.commit('dialogs/hideDialog')\r\n      this.$store.commit('tripEditing/editTrip', {\r\n        tripId: trip.id\r\n      })\r\n      scrollHelper.$emit('scrollToTime', trip.startTime)\r\n      scrollHelper.$emit('scrollToTeam', tripKey(trip))\r\n    },\r\n  }\r\n})\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Templates.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Templates.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Templates.vue?vue&type=template&id=3e514a42&scoped=true&\"\nimport script from \"./Templates.vue?vue&type=script&lang=ts&\"\nexport * from \"./Templates.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Templates.vue?vue&type=style&index=0&id=3e514a42&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3e514a42\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('StandardDialog',{attrs:{\"title\":\"Import teams from date\",\"name\":\"importTeams\"}},[_c('v-layout',[_c('v-date-picker',{attrs:{\"landscape\":\"\"},on:{\"input\":_vm.updatePreview},model:{value:(_vm.selectedDate),callback:function ($$v) {_vm.selectedDate=$$v},expression:\"selectedDate\"}}),_c('div',{staticClass:\"preview-pane\"},[_c('table',{staticClass:\"preview-table\"},[_c('thead',[_c('tr',[_c('th'),_c('th',[_vm._v(\"Driver\")]),_c('th',[_vm._v(\"Medic\")]),_c('th',[_vm._v(\"Vehicle\")])])]),(_vm.preview)?_c('tbody',_vm._l((_vm.preview.slice(0, 100)),function(team,i){return _c('tr',{key:i},[_c('td'),_c('td',[(team.driver)?[_vm._v(_vm._s(team.driver))]:_c('span',{staticClass:\"placeholder\"},[_vm._v(\"(No driver)\")])],2),_c('td',[(team.medic)?[_vm._v(_vm._s(team.medic))]:_c('span',{staticClass:\"placeholder\"},[_vm._v(\"(No medic)\")])],2),_c('td',[(team.vehicle)?[_vm._v(_vm._s(team.vehicle))]:_c('span',{staticClass:\"placeholder\"},[_vm._v(\"(No vehicle)\")])],2)])}),0):_vm._e()])])],1),_c('div',[_c('v-btn',{attrs:{\"disabled\":_vm.selectedDate === null,\"color\":\"primary\"},on:{\"click\":_vm.handleImport}},[_vm._v(\"Import\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport _ from 'lodash'\r\nimport Vue from 'vue'\r\nimport store from '@/store'\r\nimport {Team, KeyableTrip} from '@/lib/types'\r\nimport {TripsState, ScheduleByTeam, tripKey, deserializeArray, readTeams, formatDate} from '@/store/trips'\r\nimport { VehiclesState } from '@/store/vehicles';\r\nimport EditingCell from '@/dialogs/teams/EditingCell.vue';\r\nimport PersonView from '@/dialogs/teams/PersonView.vue';\r\nimport VehicleView from '@/dialogs/teams/VehicleView.vue';\r\nimport StandardDialog from '@/dialogs/StandardDialog.vue';\r\nimport assert from 'assert';\r\nimport { db } from '@/lib/firebase';\r\n\r\nexport default Vue.extend({\r\n  data () {\r\n    return {\r\n      selectedDate: formatDate(new Date(Date.now() - 86400e3)) as null | string,\r\n      preview: null as Team[] | null,\r\n    }\r\n  },\r\n\r\n  components: {\r\n    StandardDialog,\r\n  },\r\n\r\n  mounted () {\r\n    this.updatePreview()\r\n  },\r\n\r\n  methods: {\r\n    handleDialogInput () {\r\n      this.$store.commit('dialogs/hideDialog')\r\n    },\r\n    updatePreview () {\r\n      if (this.selectedDate) {\r\n        readTeams({\r\n          type: 'date',\r\n          timestamp: new Date(this.selectedDate).getTime()\r\n        })\r\n        .then((v) => {\r\n          this.preview = v\r\n        })\r\n      } else {\r\n        this.preview = null\r\n      }\r\n    },\r\n\r\n    handleImport () {\r\n      if (this.selectedDate) {\r\n        readTeams({\r\n          type: 'date',\r\n          timestamp: new Date(this.selectedDate).getTime()\r\n        })\r\n          .then((teams: Team[]) => {\r\n            const teamsById = _.keyBy(\r\n              this.$store.state.trips.teams,\r\n              tripKey\r\n            )\r\n\r\n            const teamsToAdd = teams.filter(team =>\r\n              !(tripKey(team) in teamsById)\r\n            )\r\n\r\n            this.$store.commit('trips/updateTeams',\r\n              this.$store.state.trips.teams.concat(teamsToAdd)\r\n            )\r\n\r\n            this.$store.commit('dialogs/showDialog', 'teams')\r\n          })\r\n      }\r\n    },\r\n  }\r\n})\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImportTeams.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImportTeams.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ImportTeams.vue?vue&type=template&id=76f0c2a5&scoped=true&\"\nimport script from \"./ImportTeams.vue?vue&type=script&lang=ts&\"\nexport * from \"./ImportTeams.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ImportTeams.vue?vue&type=style&index=0&id=76f0c2a5&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"76f0c2a5\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\"div\")}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\r\nimport Vue from 'vue'\r\nimport _ from 'lodash'\r\nimport {VehicleStatus, Person, PersonList} from '@/store/vehicles'\r\nimport {db} from '@/lib/firebase'\r\nimport store from '@/store'\r\n\r\nexport default Vue.extend({\r\n  mounted () {\r\n    db.ref('/vehicles')\r\n    .on('value', (e) => {\r\n      if (!e) return\r\n\r\n      const re = /^([0-9]{4})-([0-9]{2})-([0-9]{2}) ([0-9]{2}):([0-9]{2}):([0-9]{2})$/\r\n      const parseDate = (s: string) => {\r\n        const parts = s.match(re)\r\n        if (!parts) return null\r\n        return new Date(\r\n          parseInt(parts[1]),\r\n          parseInt(parts[2]) - 1,\r\n          parseInt(parts[3]),\r\n          parseInt(parts[4]),\r\n          parseInt(parts[5]),\r\n          parseInt(parts[6]),\r\n        ).getTime()\r\n      }\r\n\r\n      const value = e.val()\r\n      const vehicles = _.values(value)\r\n        .map((v): VehicleStatus  => ({\r\n          created: parseDate(v.created) || 0,\r\n          direction: parseInt(v.direction),\r\n          registrationNumber: v.registrationNumber as string,\r\n          speed: parseInt(v.speed),\r\n          lat: parseFloat(v.lat),\r\n          lng: parseFloat(v.lng),\r\n          location: v.location,\r\n          vehicleStatus: v.vehicleStatus,\r\n        }))\r\n\r\n      store.commit('vehicles/setVehicles', _.sortBy(vehicles, 'registrationNumber'))\r\n    })\r\n\r\n    db.ref('/persons')\r\n    .on('value', (e) => {\r\n      if (!e) return\r\n\r\n      const re = /^([0-9]{4})-([0-9]{2})-([0-9]{2}) ([0-9]{2}):([0-9]{2}):([0-9]{2})$/\r\n      const parseDate = (s: string) => {\r\n        const parts = s.match(re)\r\n        if (!parts) return null\r\n        return new Date(\r\n          parseInt(parts[1]),\r\n          parseInt(parts[2]) - 1,\r\n          parseInt(parts[3]),\r\n          parseInt(parts[4]),\r\n          parseInt(parts[5]),\r\n          parseInt(parts[6]),\r\n        ).getTime()\r\n      }\r\n\r\n      const value = e.val()\r\n      const persons: Person[] = Object.entries(value || {})\r\n        .map(([key, value]: [string, any]): Person => ({\r\n          name: key,\r\n          telephone: value.telephone || null,\r\n          updated: parseFloat(value.updated) || Date.now(),\r\n          created: parseFloat(value.created) || Date.now(),\r\n        }))\r\n\r\n      store.commit('vehicles/setPersons', persons)\r\n    })\r\n  },\r\n})\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VehiclesSync.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VehiclesSync.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./VehiclesSync.vue?vue&type=template&id=bdc2bd3c&\"\nimport script from \"./VehiclesSync.vue?vue&type=script&lang=ts&\"\nexport * from \"./VehiclesSync.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\"div\")}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\r\nimport Vue from 'vue'\r\nimport _ from 'lodash'\r\nimport {VehicleStatus, Person, PersonList} from '@/store/vehicles'\r\nimport {db} from '@/lib/firebase'\r\nimport store from '@/store'\r\nimport {Trip} from '@/lib/types'\r\nimport {AppMode, getRelPath, getPendingTripUpdates, parseTripsData, parseTeamsData, AutoUpdateTrips} from '@/store/trips'\r\n\r\nexport default Vue.extend({\r\n  computed: {\r\n    mode (): AppMode {\r\n      return this.$store.state.trips.mode as AppMode\r\n    },\r\n\r\n    relPath (): string {\r\n      return getRelPath(this.mode)\r\n    }\r\n  },\r\n\r\n  created () {\r\n    const $tripsCallback = (e: firebase.database.DataSnapshot | null) => {\r\n      if (!e) return\r\n\r\n      const updateWithBacklog = (trips: Trip[]): Trip[] =>\r\n        trips.map(trip => {\r\n          const pendingUpdates = getPendingTripUpdates(trip.id)\r\n          if (pendingUpdates) {\r\n            return {\r\n              ...trip,\r\n              ...pendingUpdates,\r\n            }\r\n          } else {\r\n            return trip\r\n          }\r\n        })\r\n\r\n      // Because we expect trips to be updated at much higher\r\n      // frequency, and with less tolerance for collisions,\r\n      // we merge with trip data that hasn't been submitted\r\n      this.autoUpdateTrips({\r\n        trips: updateWithBacklog(parseTripsData(e)),\r\n        tripsKey: e.key || '',\r\n      })\r\n    }\r\n\r\n    const $teamsCallback = (e: firebase.database.DataSnapshot | null) => {\r\n      if (!e) return\r\n\r\n      this.autoUpdateTrips({\r\n        teams: parseTeamsData(e),\r\n        teamsKey: e.key || '',\r\n      })\r\n    }\r\n\r\n    this.$watch('relPath', (newValue, oldValue) => {\r\n      // Turn off the previous callback\r\n      if (oldValue && newValue !== oldValue) {\r\n        db.ref(`/trips/${oldValue}`).off('value', $tripsCallback)\r\n        db.ref(`/teams/${oldValue}`).off('value', $teamsCallback)\r\n      }\r\n      db.ref(`/trips/${newValue}`).on('value', $tripsCallback)\r\n      db.ref(`/teams/${newValue}`).on('value', $teamsCallback)\r\n    }, {immediate: true})\r\n  },\r\n\r\n  methods: {\r\n    autoUpdateTrips(opts: AutoUpdateTrips) {\r\n      this.$store.dispatch('trips/autoUpdateTrips', opts)\r\n    },\r\n  }\r\n})\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TripsSync.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TripsSync.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TripsSync.vue?vue&type=template&id=10f34086&\"\nimport script from \"./TripsSync.vue?vue&type=script&lang=ts&\"\nexport * from \"./TripsSync.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { Job } from '@/lib/types';\r\nimport uniqueId from '@/lib/uniqueId';\r\n\r\nfunction makeTimeOffset(hours = 0, minutes = 0, seconds = 0) {\r\n  return hours * 3600e3 +\r\n    minutes * 60e3 +\r\n    seconds * 1e3\r\n}\r\n\r\n/*\r\n[\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"ch\",\r\n      \"medic\": \"kim\",\r\n      \"startTime\": 50400000,\r\n      \"endTime\": 41400000\r\n    },\r\n    \"secondTrip\": null,\r\n    \"type\": \"Event\",\r\n    \"price\": null,\r\n    \"description\": \"River Hongbao @ Floating Platform\",\r\n    \"cancelled\": false\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"bd\",\r\n      \"medic\": \"jamil\",\r\n      \"startTime\": 27000000,\r\n      \"endTime\": 39600000\r\n    },\r\n    \"secondTrip\": null,\r\n    \"type\": \"Event\",\r\n    \"price\": 262.15,\r\n    \"description\": \"Cross country @ Chinese Garden, Darshini\",\r\n    \"cancelled\": false\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"Yazid\",\r\n      \"medic\": \"Mee\",\r\n      \"startTime\": 37800000,\r\n      \"endTime\": 50400000\r\n    },\r\n    \"secondTrip\": null,\r\n    \"type\": \"Event\",\r\n    \"price\": 224.7,\r\n    \"description\": \"Luncheon Event @ Raffles City Convention Centre, Siti\",\r\n    \"cancelled\": false\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"Kt\",\r\n      \"medic\": \"No\",\r\n      \"startTime\": 28800000,\r\n      \"endTime\": 64800000\r\n    },\r\n    \"secondTrip\": null,\r\n    \"type\": \"Event\",\r\n    \"price\": null,\r\n    \"description\": \"Explomo Event @ Outside Track 13, Claraence 91728765\",\r\n    \"cancelled\": false\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"ch\",\r\n      \"medic\": \"kim\",\r\n      \"startTime\": 25200000,\r\n      \"endTime\": 43200000\r\n    },\r\n    \"secondTrip\": null,\r\n    \"type\": \"Event\",\r\n    \"price\": 347.75,\r\n    \"description\": \"Cross country @ Bedok Reservoir Park, Stephanie 67841234\",\r\n    \"cancelled\": false\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"Ir\",\r\n      \"medic\": \"Yati\",\r\n      \"startTime\": 46800000,\r\n      \"endTime\": 57600000\r\n    },\r\n    \"secondTrip\": null,\r\n    \"type\": \"Event\",\r\n    \"price\": null,\r\n    \"description\": \"Volleyball @ Delta Sport Hall\",\r\n    \"cancelled\": false\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"Sg\",\r\n      \"medic\": \"Sur\",\r\n      \"startTime\": 28800000,\r\n      \"endTime\": null\r\n    },\r\n    \"secondTrip\": {\r\n      \"driver\": \"Bd\",\r\n      \"medic\": \"Jm\",\r\n      \"startTime\": 49500000,\r\n      \"endTime\": null\r\n    },\r\n    \"type\": \"OV\",\r\n    \"price\": 110,\r\n    \"description\": \"OV Sims L1 --> TTSH \\\"2A\\\" Pt JohnAw OWC\",\r\n    \"cancelled\": false\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"Aug\",\r\n      \"medic\": \"Had\",\r\n      \"startTime\": 34200000,\r\n      \"endTime\": null\r\n    },\r\n    \"secondTrip\": {\r\n      \"driver\": \"Yas\",\r\n      \"medic\": \"At\",\r\n      \"startTime\": 48600000,\r\n      \"endTime\": null\r\n    },\r\n    \"type\": \"2W\",\r\n    \"price\": 90,\r\n    \"description\": \"106 Pasir Ris St 12 #XX-XXX -> CGH, Stretcher, Need 02, MOM Azizah 91271234\",\r\n    \"cancelled\": false\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"Por\",\r\n      \"medic\": \"Red\",\r\n      \"startTime\": 36900000,\r\n      \"endTime\": null\r\n    },\r\n    \"secondTrip\": {\r\n      \"driver\": \"Por\",\r\n      \"medic\": \"Red\",\r\n      \"startTime\": 45900000,\r\n      \"endTime\": null\r\n    },\r\n    \"type\": \"2W\",\r\n    \"price\": 90,\r\n    \"description\": \"686 Jurong West Ctrl #XX-XXX -> NCC, OWC, 96771234\",\r\n    \"cancelled\": false\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"Md\",\r\n      \"medic\": \"Ct\",\r\n      \"startTime\": 39600000,\r\n      \"endTime\": 46800000\r\n    },\r\n    \"secondTrip\": null,\r\n    \"type\": \"Event\",\r\n    \"price\": 171.2,\r\n    \"description\": \"Shooting @ Kampong Glam Café, Shaikh Ahmad 83721234\",\r\n    \"cancelled\": false\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"Por\",\r\n      \"medic\": \"Red\",\r\n      \"startTime\": 34200000,\r\n      \"endTime\": null\r\n    },\r\n    \"secondTrip\": null,\r\n    \"type\": \"Dis\",\r\n    \"price\": 50,\r\n    \"description\": \"SGH Wd 48-24-10 --> Assisi Hospice Pt Lee John SN Lante 63211234\",\r\n    \"cancelled\": true\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"Yazid\",\r\n      \"medic\": \"Mee\",\r\n      \"startTime\": 28800000,\r\n      \"endTime\": null\r\n    },\r\n    \"secondTrip\": null,\r\n    \"type\": \"LKH\",\r\n    \"price\": 80,\r\n    \"description\": \"LKH Main Blk L2 -> SGH, Pt Kim John, OWC, SN Jonathan 62871234\",\r\n    \"cancelled\": false\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"Hai\",\r\n      \"medic\": \"Amm\",\r\n      \"startTime\": 36900000,\r\n      \"endTime\": null\r\n    },\r\n    \"secondTrip\": {\r\n      \"driver\": \"Bd\",\r\n      \"medic\": \"Jm\",\r\n      \"startTime\": 43800000,\r\n      \"endTime\": null\r\n    },\r\n    \"type\": \"2W\",\r\n    \"price\": 90,\r\n    \"description\": \"NTUC NH @ Jurong West -> NTFH Tower A73, OWC, 96171234 Brother will bring down Pt from NH\",\r\n    \"cancelled\": false\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"Hai\",\r\n      \"medic\": \"Amm\",\r\n      \"startTime\": 32400000,\r\n      \"endTime\": null\r\n    },\r\n    \"secondTrip\": null,\r\n    \"type\": \"Dis\",\r\n    \"price\": 50,\r\n    \"description\": \"SGH W57-10-1 -> Pacific NH Seetoh John\",\r\n    \"cancelled\": true\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"BH\",\r\n      \"medic\": \"VL\",\r\n      \"startTime\": 36000000,\r\n      \"endTime\": null\r\n    },\r\n    \"secondTrip\": null,\r\n    \"type\": \"DC\",\r\n    \"price\": 60,\r\n    \"description\": \"263 Boon Lay Dr #XX-XXX --> SGH AE Mdm Loh 94228950\",\r\n    \"cancelled\": false\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": null,\r\n      \"medic\": null,\r\n      \"startTime\": 50400000,\r\n      \"endTime\": null\r\n    },\r\n    \"secondTrip\": null,\r\n    \"type\": \"OV\",\r\n    \"price\": 90,\r\n    \"description\": \"450 AMK Ave 10 #XX-XXX -> OV Balestier L5, Pt Tee John, OWC\",\r\n    \"cancelled\": true\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"BH\",\r\n      \"medic\": \"VL\",\r\n      \"startTime\": 49500000,\r\n      \"endTime\": null\r\n    },\r\n    \"secondTrip\": {\r\n      \"driver\": \"Huq\",\r\n      \"medic\": \"Haz\",\r\n      \"startTime\": 54000000,\r\n      \"endTime\": null\r\n    },\r\n    \"type\": \"2W\",\r\n    \"price\": 90,\r\n    \"description\": \"St Andrew @ Henderson L4-48 -> NUH Kent Ridge Wing, Pt Lau John, OWC, 97731234 / 96631234\",\r\n    \"cancelled\": false\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"Huq\",\r\n      \"medic\": \"Haz\",\r\n      \"startTime\": 51300000,\r\n      \"endTime\": null\r\n    },\r\n    \"secondTrip\": {\r\n      \"driver\": \"Huq\",\r\n      \"medic\": \"Haz\",\r\n      \"startTime\": 64800000,\r\n      \"endTime\": null\r\n    },\r\n    \"type\": \"OV\",\r\n    \"price\": 90,\r\n    \"description\": \"OV Simei L6 -> NUH L3 Main Bld Heart Ctr Pt Suan John, MRSA Pt, Stretcher\",\r\n    \"cancelled\": false\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"Yazid\",\r\n      \"medic\": \"At\",\r\n      \"startTime\": 55800000,\r\n      \"endTime\": null\r\n    },\r\n    \"secondTrip\": {\r\n      \"driver\": \"Bh\",\r\n      \"medic\": \"Vl\",\r\n      \"startTime\": 66600000,\r\n      \"endTime\": null\r\n    },\r\n    \"type\": \"Ov\",\r\n    \"price\": 110,\r\n    \"description\": \"Ov Simei L3 -> CGH L2, Pt Tau John, OWC\",\r\n    \"cancelled\": false\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"Sg\",\r\n      \"medic\": \"Sur\",\r\n      \"startTime\": 50400000,\r\n      \"endTime\": null\r\n    },\r\n    \"secondTrip\": {\r\n      \"driver\": \"Sg\",\r\n      \"medic\": \"Sur\",\r\n      \"startTime\": 54000000,\r\n      \"endTime\": null\r\n    },\r\n    \"type\": \"OV\",\r\n    \"price\": 90,\r\n    \"description\": \"OV Biggin Hill 52B -> Sata Tampines, Pt Anwar John, Sn Abel, Stretcher, Wait around 20 - 30 mins\",\r\n    \"cancelled\": false\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"Yaz\",\r\n      \"medic\": \"At\",\r\n      \"startTime\": 48600000,\r\n      \"endTime\": null\r\n    },\r\n    \"secondTrip\": {\r\n      \"driver\": \"Sg\",\r\n      \"medic\": \"Sur\",\r\n      \"startTime\": 57600000,\r\n      \"endTime\": null\r\n    },\r\n    \"type\": \"OV\",\r\n    \"price\": 90,\r\n    \"description\": \"OV Simei L2 -> CGH B Main Bld L2, Pt Rokiah Jane, Stretcher, 94691234\",\r\n    \"cancelled\": false\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"Por\",\r\n      \"medic\": \"Red\",\r\n      \"startTime\": 54000000,\r\n      \"endTime\": null\r\n    },\r\n    \"secondTrip\": null,\r\n    \"type\": \"Dis\",\r\n    \"price\": 50,\r\n    \"description\": \"AMK CH L2 Wd1 West Wing Bed 1315 -> 269A Yishun St 22 #XX-XXX, Pt Lee John, Motorized WC, Need Lifter, SN Robbie 64501234, Collect cash from Wd\",\r\n    \"cancelled\": false\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"St\",\r\n      \"medic\": \"Sh\",\r\n      \"startTime\": 10200000,\r\n      \"endTime\": null\r\n    },\r\n    \"secondTrip\": null,\r\n    \"type\": \"SGH\",\r\n    \"price\": 74.9,\r\n    \"description\": \"SGH Fever Ctr -> KKH A/E\",\r\n    \"cancelled\": false\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"St\",\r\n      \"medic\": \"Sh\",\r\n      \"startTime\": 24000000,\r\n      \"endTime\": null\r\n    },\r\n    \"secondTrip\": null,\r\n    \"type\": \"DC\",\r\n    \"price\": 150,\r\n    \"description\": \"718 Jurong West St 71 #XX-XXX -> NUH A/E, 97941234\",\r\n    \"cancelled\": false\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"Ir\",\r\n      \"medic\": \"Yati\",\r\n      \"startTime\": 33600000,\r\n      \"endTime\": null\r\n    },\r\n    \"secondTrip\": null,\r\n    \"type\": \"DC\",\r\n    \"price\": 100,\r\n    \"description\": \"113 AMK Ave 4 #XX-XXX -> TTSH A/E 92751234\",\r\n    \"cancelled\": false\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"Sg\",\r\n      \"medic\": \"Sur\",\r\n      \"startTime\": 35160000,\r\n      \"endTime\": null\r\n    },\r\n    \"secondTrip\": null,\r\n    \"type\": \"1777\",\r\n    \"price\": 150,\r\n    \"description\": \"304 Hougang Ave 5 #XX-XXX -> TTSH A/E 98461234\",\r\n    \"cancelled\": false\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"Sg \",\r\n      \"medic\": \"Sur\",\r\n      \"startTime\": 46800000,\r\n      \"endTime\": null\r\n    },\r\n    \"secondTrip\": null,\r\n    \"type\": \"OV\",\r\n    \"price\": 45,\r\n    \"description\": \"Raffles Hosp L9 B966 -> OV Sims L3 R2 B12, Pt Pua John SXX247E, MRSA\",\r\n    \"cancelled\": false\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"Huq\",\r\n      \"medic\": \"Has\",\r\n      \"startTime\": 46800000,\r\n      \"endTime\": null\r\n    },\r\n    \"secondTrip\": null,\r\n    \"type\": \"OV\",\r\n    \"price\": 60,\r\n    \"description\": \"OV Simei L6 -> SGH A/E Pt Tang Jane\",\r\n    \"cancelled\": false\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"Hai\",\r\n      \"medic\": \"Amm\",\r\n      \"startTime\": 46800000,\r\n      \"endTime\": null\r\n    },\r\n    \"secondTrip\": null,\r\n    \"type\": \"SGH\",\r\n    \"price\": 48.15,\r\n    \"description\": \"SGH Obs r 10-5 -> AH-10-4-12 Pt Pok John\",\r\n    \"cancelled\": false\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"Hai\",\r\n      \"medic\": \"Amm\",\r\n      \"startTime\": 54000000,\r\n      \"endTime\": null\r\n    },\r\n    \"secondTrip\": null,\r\n    \"type\": \"Dis\",\r\n    \"price\": 50,\r\n    \"description\": \"CGH Wd45-84 -> 165 Tampines St 12 #09-305, Pt Lim Jane 96651234\",\r\n    \"cancelled\": false\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"Bd\",\r\n      \"medic\": \"Jm\",\r\n      \"startTime\": 52200000,\r\n      \"endTime\": null\r\n    },\r\n    \"secondTrip\": null,\r\n    \"type\": \"OV\",\r\n    \"price\": 60,\r\n    \"description\": \"OV Sims L3 -> TTSH A/E Pt Lim John\",\r\n    \"cancelled\": false\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"BH\",\r\n      \"medic\": \"Vl\",\r\n      \"startTime\": 52200000,\r\n      \"endTime\": null\r\n    },\r\n    \"secondTrip\": null,\r\n    \"type\": \"DC\",\r\n    \"price\": 100,\r\n    \"description\": \"63 Circuit Road #10-281 -> SGH A/E 98621234\",\r\n    \"cancelled\": false\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"Gv\",\r\n      \"medic\": \"Ct\",\r\n      \"startTime\": 55500000,\r\n      \"endTime\": null\r\n    },\r\n    \"secondTrip\": null,\r\n    \"type\": \"1777\",\r\n    \"price\": 170,\r\n    \"description\": \"642A Punggol Drive #XX-XXX -> TTSH A/E 98271234\",\r\n    \"cancelled\": false\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"St\",\r\n      \"medic\": \"Sh\",\r\n      \"startTime\": 79200000,\r\n      \"endTime\": null\r\n    },\r\n    \"secondTrip\": null,\r\n    \"type\": \"DC\",\r\n    \"price\": 150,\r\n    \"description\": \"121 BB West Ave #XX-XXX -> NTFH A/E 96261234\",\r\n    \"cancelled\": false\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"St\",\r\n      \"medic\": \"Sh\",\r\n      \"startTime\": 83400000,\r\n      \"endTime\": null\r\n    },\r\n    \"secondTrip\": null,\r\n    \"type\": \"Ov\",\r\n    \"price\": 100,\r\n    \"description\": \"OV Marsiling L3 -> KTPH A/E\",\r\n    \"cancelled\": false\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"St\",\r\n      \"medic\": \"Sh\",\r\n      \"startTime\": 1200000,\r\n      \"endTime\": null\r\n    },\r\n    \"secondTrip\": null,\r\n    \"type\": \"SKH\",\r\n    \"price\": 160,\r\n    \"description\": \"SKH A/E -> SGH Wd 44\",\r\n    \"cancelled\": false\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"St\",\r\n      \"medic\": \"Sh\",\r\n      \"startTime\": 24000000,\r\n      \"endTime\": null\r\n    },\r\n    \"secondTrip\": null,\r\n    \"type\": \"SGH\",\r\n    \"price\": 150,\r\n    \"description\": \"718 Jurong West St 71 -> NUH A/E\",\r\n    \"cancelled\": false\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"St\",\r\n      \"medic\": \"Sh\",\r\n      \"startTime\": 10200000,\r\n      \"endTime\": null\r\n    },\r\n    \"secondTrip\": null,\r\n    \"type\": \"SGH\",\r\n    \"price\": 74.9,\r\n    \"description\": \"SGH -> KKH Pt Jan John\",\r\n    \"cancelled\": false\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"Zid\",\r\n      \"medic\": \"Mu\",\r\n      \"startTime\": 75600000,\r\n      \"endTime\": null\r\n    },\r\n    \"secondTrip\": null,\r\n    \"type\": \"St Luke\",\r\n    \"price\": 90,\r\n    \"description\": \"St Luke -> NUH A/E\",\r\n    \"cancelled\": false\r\n  },\r\n  {\r\n    \"trip\": {\r\n      \"driver\": \"Mid\",\r\n      \"medic\": \"Zim\",\r\n      \"startTime\": 72000000,\r\n      \"endTime\": null\r\n    },\r\n    \"secondTrip\": null,\r\n    \"type\": \"KTPH\",\r\n    \"price\": 85.6,\r\n    \"description\": \"KTPH A/E -> SGH A/E IPT ID 21000\",\r\n    \"cancelled\": false\r\n  }\r\n]\r\n*/\r\n\r\nconst JOBS = `\r\nch\tkim\t\t\t1400\t1130\t\t\tEvent\t\tRiver Hongbao @ Floating Platform\r\nbd\tjamil\t\t\t730\t1100\t\t\tEvent\t262.15\tCross country @ Chinese Garden, Darshini\r\nYazid\tMee\t\t\t1030\t1400\t\t\tEvent\t224.7\tLuncheon Event @ Raffles City Convention Centre, Siti\r\nKt\tNo\t\t\t800\t1800\t\t\tEvent\t\tExplomo Event @ Outside Track 13, Claraence 91728765\r\nch\tkim\t\t\t700\t1200\t\t\tEvent\t347.75\tCross country @ Bedok Reservoir Park, Stephanie 67841234\r\nIr\tYati\t\t\t1300\t1600\t\t\tEvent\t\tVolleyball @ Delta Sport Hall\r\nSg\tSur\tBd\tJm\t800\t\t1345\t\tOV\t110\tOV Sims L1 --> TTSH \"2A\" Pt JohnAw OWC\r\nAug\tHad\tYas\tAt\t930\t\t1330\t\t2W\t90\t106 Pasir Ris St 12 #XX-XXX -> CGH, Stretcher, Need 02, MOM Azizah 91271234\r\nPor\tRed\tPor\tRed\t1015\t\t1245\t\t2W\t90\t686 Jurong West Ctrl #XX-XXX -> NCC, OWC, 96771234\r\nMd\tCt\t\t\t1100\t1300\t\t\tEvent\t171.2\tShooting @ Kampong Glam Café, Shaikh Ahmad 83721234\r\nPor\tRed\t\t\t930\t\t\t\tDis\t50\tSGH Wd 48-24-10 --> Assisi Hospice Pt Lee John SN Lante 63211234\tCancelled\r\nYazid\tMee\t\t\t800\t\t\t\tLKH\t80\tLKH Main Blk L2 -> SGH, Pt Kim John, OWC, SN Jonathan 62871234\r\nHai\tAmm\tBd\tJm\t1015\t\t1210\t\t2W\t90\tNTUC NH @ Jurong West -> NTFH Tower A73, OWC, 96171234 Brother will bring down Pt from NH\r\nHai\tAmm\t\t\t900\t\t\t\tDis\t50\tSGH W57-10-1 -> Pacific NH Seetoh John\tCancelled\r\nBH\tVL\t\t\t1000\t\t\t\tDC\t60\t263 Boon Lay Dr #XX-XXX --> SGH AE Mdm Loh 94228950\r\n\t\t\t\t1400\t\t\t\tOV\t90\t450 AMK Ave 10 #XX-XXX -> OV Balestier L5, Pt Tee John, OWC\tCancelled\r\nBH\tVL\tHuq\tHaz\t1345\t\t1500\t\t2W\t90\tSt Andrew @ Henderson L4-48 -> NUH Kent Ridge Wing, Pt Lau John, OWC, 97731234 / 96631234\r\nHuq\tHaz\tHuq\tHaz\t1415\t\t1800\t\tOV\t90\tOV Simei L6 -> NUH L3 Main Bld Heart Ctr Pt Suan John, MRSA Pt, Stretcher\r\nYazid\tAt\tBh\tVl\t1530\t\t1830\t\tOv\t110\tOv Simei L3 -> CGH L2, Pt Tau John, OWC\r\nSg\tSur\tSg\tSur\t1400\t\t1500\t\tOV\t90\tOV Biggin Hill 52B -> Sata Tampines, Pt Anwar John, Sn Abel, Stretcher, Wait around 20 - 30 mins\r\nYaz\tAt\tSg\tSur\t1330\t\t1600\t\tOV\t90\tOV Simei L2 -> CGH B Main Bld L2, Pt Rokiah Jane, Stretcher, 94691234\r\nPor\tRed\t\t\t1500\t\t\t\tDis\t50\tAMK CH L2 Wd1 West Wing Bed 1315 -> 269A Yishun St 22 #XX-XXX, Pt Lee John, Motorized WC, Need Lifter, SN Robbie 64501234, Collect cash from Wd\r\nSt\tSh\t\t\t250\t\t\t\tSGH\t74.9\tSGH Fever Ctr -> KKH A/E\r\nSt\tSh\t\t\t640\t\t\t\tDC\t150\t718 Jurong West St 71 #XX-XXX -> NUH A/E, 97941234\r\nIr\tYati\t\t\t920\t\t\t\tDC\t100\t113 AMK Ave 4 #XX-XXX -> TTSH A/E 92751234\r\nSg\tSur\t\t\t946\t\t\t\t1777\t150\t304 Hougang Ave 5 #XX-XXX -> TTSH A/E 98461234\r\nSg \tSur\t\t\t1300\t\t\t\tOV\t45\tRaffles Hosp L9 B966 -> OV Sims L3 R2 B12, Pt Pua John SXX247E, MRSA\r\nHuq\tHas\t\t\t1300\t\t\t\tOV\t60\tOV Simei L6 -> SGH A/E Pt Tang Jane\r\nHai\tAmm\t\t\t1300\t\t\t\tSGH\t48.15\tSGH Obs r 10-5 -> AH-10-4-12 Pt Pok John\r\nHai\tAmm\t\t\t1500\t\t\t\tDis\t50\tCGH Wd45-84 -> 165 Tampines St 12 #09-305, Pt Lim Jane 96651234\r\nBd\tJm\t\t\t1430\t\t\t\tOV\t60\tOV Sims L3 -> TTSH A/E Pt Lim John\r\nBH\tVl\t\t\t1430\t\t\t\tDC\t100\t63 Circuit Road #10-281 -> SGH A/E 98621234\r\nGv\tCt\t\t\t1525\t\t\t\t1777\t170\t642A Punggol Drive #XX-XXX -> TTSH A/E 98271234\r\nSt\tSh\t\t\t2200\t\t\t\tDC\t150\t121 BB West Ave #XX-XXX -> NTFH A/E 96261234\r\nSt\tSh\t\t\t2310\t\t\t\tOv\t100\tOV Marsiling L3 -> KTPH A/E\r\nSt\tSh\t\t\t20\t\t\t\tSKH\t160\tSKH A/E -> SGH Wd 44\r\nSt\tSh\t\t\t640\t\t\t\tSGH\t150\t718 Jurong West St 71 -> NUH A/E\r\nSt\tSh\t\t\t250\t\t\t\tSGH\t74.9\tSGH -> KKH Pt Jan John\r\nZid\tMu\t\t\t2100\t\t\t\tSt Luke\t90\tSt Luke -> NUH A/E\r\nMid\tZim\t\t\t2000\t\t\t\tKTPH\t85.6\tKTPH A/E -> SGH A/E IPT ID 21000\r\n`\r\n\r\nfunction toTime(s: string) {\r\n  if (s === '') {\r\n    return null\r\n  }\r\n\r\n  const padded = s.padStart(4, '0')\r\n  const hour = parseInt(padded.substring(0, 2))\r\n  const minute = parseInt(padded.substring(2, 4))\r\n\r\n  return hour * 3600e3 + minute * 60e3\r\n}\r\n\r\nexport default function (): Job[] {\r\n  const now = new Date\r\n  const r = JOBS\r\n    .split('\\n')\r\n    .filter(Boolean)\r\n    .map(s => s.split('\\t'))\r\n    .map(s => ({\r\n      trip: {\r\n        id: uniqueId(),\r\n        driver: s[0] || null,\r\n        medic: s[1] || null,\r\n        startTime: toTime(s[4]) as number,\r\n        endTime: toTime(s[5]),\r\n        created: Date.now(),\r\n        updated: Date.now(),\r\n        startPostcode: null,\r\n        endPostcode: null,\r\n        startAddress: null,\r\n        endAddress: null,\r\n        startLocation: null,\r\n        endLocation: null,\r\n        startLatLng: null,\r\n        endLatLng: null,\r\n        description: 'test trip',\r\n        cancelled: false,\r\n        isTentative: false,\r\n        relatedTrip: null,\r\n        isReturnTrip: false,\r\n        templateTrip: null,\r\n        hideFromManifest: false,\r\n        lastSMSTimestamp: null,\r\n      },\r\n      secondTrip: (s[2] || s[3] || s[6]) ? {\r\n        id: uniqueId(),\r\n        driver: s[2] || null,\r\n        medic: s[3] || null,\r\n        startTime: toTime(s[6]) as number,\r\n        endTime: toTime(s[7]),\r\n        created: Date.now(),\r\n        updated: Date.now(),\r\n        startPostcode: null,\r\n        endPostcode: null,\r\n        startAddress: null,\r\n        endAddress: null,\r\n        startLocation: null,\r\n        endLocation: null,\r\n        startLatLng: null,\r\n        endLatLng: null,\r\n        description: 'test trip',\r\n        cancelled: false,\r\n        isTentative: false,\r\n        relatedTrip: null,\r\n        isReturnTrip: false,\r\n        templateTrip: null,\r\n        hideFromManifest: false,\r\n        lastSMSTimestamp: null,\r\n      } : null,\r\n      date: Date.UTC(now.getFullYear(), now.getMonth(), now.getDate()),\r\n      type: s[8],\r\n      price: s[9] ? parseFloat(s[9]) : null,\r\n      description: s[10],\r\n      cancelled: s[11] === 'Cancelled',\r\n      startPostcode: null,\r\n      endPostcode: null,\r\n      startAddress: null,\r\n      endAddress: null,\r\n      startLocation: null,\r\n      endLocation: null,\r\n      startLatLng: null,\r\n      endLatLng: null,\r\n      templateTrip: null,\r\n    }))\r\n  return r\r\n}","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport _ from 'lodash';\nimport querystring from 'querystring';\nimport Vue from 'vue';\nimport {Trip, KeyableTrip} from '@/lib/types.ts';\nimport {TripsState, AppMode} from '@/store/trips.ts';\nimport {ScreenState} from '@/store/screen.ts';\nimport {TemplateMetadata} from '@/store/templates.ts';\nimport {initializeHashWatch} from '@/store/modes'\nimport ChartArea from '@/components/chart/ChartArea.vue';\nimport TeamList from '@/components/chart/TeamList.vue';\nimport TimeUpdater from '@/components/util/TimeUpdater.vue';\nimport TripEditor from '@/components/TripEditor.vue';\nimport DatePicker from '@/components/DatePicker.vue';\nimport PrintableManifest from '@/components/PrintableManifest.vue';\nimport TeamsDialog from '@/dialogs/Teams.vue';\nimport PersonsDialog from '@/dialogs/Persons.vue';\nimport ManifestDialog from '@/dialogs/Manifest.vue';\nimport MessagesDialog from '@/dialogs/Messages.vue';\nimport DraftMessageDialog from '@/dialogs/DraftMessage.vue';\nimport TemplatesDialog from '@/dialogs/Templates.vue';\nimport ImportTeamsDialog from '@/dialogs/ImportTeams.vue';\nimport VehiclesSync from '@/sync/VehiclesSync.vue';\nimport TripsSync from '@/sync/TripsSync.vue';\nimport store from '@/store';\nimport defaultData from '@/assets/default-data';\nimport {auth} from '@/lib/firebase'\n\nexport default Vue.extend({\n  name: 'app',\n  data () {\n    return {\n      xAxisScale: 150,\n      yAxisScale: 25,\n    }\n  },\n  computed: {\n    _: () => _,\n\n    chartAreaWidth () {\n      return 24 * this.xAxisScale\n    },\n\n    chartAreaHeight () {\n      return store.getters['trips/rowCount'] * this.yAxisScale\n    },\n\n    trips (): Trip[] {\n      return store.getters['trips/trips']\n    },\n\n    teamSchedules () {\n      return (store.getters as any)['trips/teamSchedules']\n    },\n\n    templateName (): string | undefined {\n      const mode: AppMode = this.$store.state.trips.mode\n      if (mode.type !== 'template') return\n      const templateId = mode.template\n      const templateMetadata: TemplateMetadata | undefined =\n        (Object.values(this.$store.state.templates.templates) as TemplateMetadata[])\n          .find((t: TemplateMetadata) => t.id === templateId)\n      return templateMetadata ? templateMetadata.name : templateId\n    }\n  },\n  components: {\n    ChartArea,\n    DatePicker,\n    DraftMessageDialog,\n    ImportTeamsDialog,\n    ManifestDialog,\n    MessagesDialog,\n    PersonsDialog,\n    PrintableManifest,\n    TimeUpdater,\n    TeamList,\n    TeamsDialog,\n    TemplatesDialog,\n    TripEditor,\n    TripsSync,\n    VehiclesSync,\n  },\n  created () {\n    initializeHashWatch(this.$store)\n  },\n  mounted () {\n    this.scrollToCurrentTime()\n  },\n  methods: {\n    scrollToCurrentTime () {\n      (this.$refs['chart-area'] as any).scrollToCurrentTime()\n    },\n    showDialog (dialogName: string) {\n      store.commit('dialogs/showDialog', dialogName)\n    },\n\n    createNewTrip () {\n      const midnight = new Date\n      midnight.setHours(0, 0, 0, 0)\n      const delayedTime = (Date.now() - midnight.getTime()) + 10 * 60e3\n      const alignedTime = Math.ceil(delayedTime / 5 / 60e3) * 5 * 60e3\n      const currentMode = (store.state.trips as TripsState).mode\n\n      const sameDate = (d1n: number, d2: Date) => {\n        const d1 = new Date(d1n)\n        return d1.getFullYear() === d2.getFullYear() &&\n          d1.getMonth() === d2.getMonth() &&\n          d1.getDate() === d2.getDate()\n      }\n      // If it's today, create a new trip at around\n      // the current time\n      if (currentMode.type === 'date' && sameDate(currentMode.timestamp, midnight)) {\n        store.dispatch('tripEditing/createAndEditNewTripAtTime', {\n          time: Math.min(\n            23.75 * 3600e3,\n            alignedTime,\n          ),\n        })\n        this.scrollToCurrentTime()\n      } else {\n        store.dispatch('tripEditing/createAndEditNewTripAtTime', {\n          time: Math.min(\n            23.75 * 3600e3,\n            Math.ceil((this.$store.state.screen as ScreenState).scrollTime / 900e3) * 900e3\n          ),\n        })\n      }\n    },\n\n    importJobs () {\n      // initialize data\n      store.commit('trips/importJobs', defaultData())\n    },\n\n    goBack() {\n      const currentMode: AppMode = this.$store.state.trips.mode\n      const targetMode: AppMode = {\n        type: 'date',\n        timestamp: currentMode.type === 'date' ? currentMode.timestamp: currentMode.lastTimestamp\n      }\n      this.$store.dispatch('trips/setMode', targetMode)\n    },\n\n    signOut () {\n      this.$store.dispatch('login/signOut')\n    },\n  }\n});\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=07166cc9&scoped=true&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\nimport style1 from \"./App.vue?vue&type=style&index=1&id=07166cc9&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"07166cc9\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.isLoggedIn)?_c('div',[_vm._t(\"default\")],2):(_vm.errorReading === null)?_c('div',{staticClass:\"not-logged-in\"},[_c('div',[_vm._v(\"Loading...\")])]):_c('div',{staticClass:\"not-logged-in\"},[_c('div',[_c('h1',[_vm._v(\"Welcome to AMS Bookings Planner\")]),(_vm.loggedInUser && _vm.errorReading)?_c('v-alert',{attrs:{\"value\":true,\"type\":\"error\"}},[_vm._v(\" You are not authorized to access AMS Bookings Planner \")]):_vm._e(),_c('v-btn',{attrs:{\"color\":\"primary\"},on:{\"click\":_vm.signInGoogle}},[_vm._v(\" Sign In with Google \")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue';\nimport { readTrips } from './store/trips';\nimport {auth} from '@/lib/firebase'\nimport firebase from 'firebase/app'\n\nexport default Vue.extend({\n  data () {\n    return {\n      errorReading: null as boolean | null,\n    }\n  },\n\n  computed: {\n    loggedInUser(): string {\n      return this.$store.state.login.user\n    },\n    isLoggedIn(): Boolean {\n      return !!(!this.errorReading && this.loggedInUser)\n    }\n  },\n\n  watch: {\n    loggedInUser() {\n      this.testAuth()\n    }\n  },\n\n  mounted () {\n    const unsubscribe = auth.onAuthStateChanged((user: firebase.User | null) => {\n      this.$store.commit('login/updateUser', user && user.email)\n    })\n    this.$on('destroyed', () => unsubscribe())\n    this.testAuth()\n  },\n\n  methods: {\n    testAuth () {\n      // Try to read something -- if it succeeds, then we're\n      // logged in!\n      readTrips(this.$store.state.trips.mode)\n      .then(() => {\n        this.errorReading = false\n      })\n      .catch(() => {\n        this.errorReading = true\n      })\n    },\n\n    signInGoogle () {\n      const provider = new firebase.auth.GoogleAuthProvider()\n      provider.addScope('email')\n      this.$store.dispatch('login/signInWithPopup', provider)\n    }\n  }\n});\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./RequiresLogin.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./RequiresLogin.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./RequiresLogin.vue?vue&type=template&id=d36fc7c8&scoped=true&\"\nimport script from \"./RequiresLogin.vue?vue&type=script&lang=ts&\"\nexport * from \"./RequiresLogin.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./RequiresLogin.vue?vue&type=style&index=0&id=d36fc7c8&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d36fc7c8\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\nimport App from '@/App.vue'\nimport RequiresLogin from '@/RequiresLogin.vue'\nimport Vue from 'vue';\n\nexport default Vue.extend({\n  components: {\n    App, RequiresLogin\n  }\n});\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppRoot.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppRoot.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./AppRoot.vue?vue&type=template&id=52a5de1f&\"\nimport script from \"./AppRoot.vue?vue&type=script&lang=ts&\"\nexport * from \"./AppRoot.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export default {\r\n  googleMapsApiKey: 'AIzaSyDesj7zbyR3W906S_H3rq-y2Ao3_yh7qRI',\r\n}","import Vue from '@/vue-with-plugins'\nimport Vuetify from 'vuetify'\nimport AppRoot from './AppRoot.vue'\nimport store from './store'\nimport Vault from '@/vault'\nimport * as VueGoogleMaps from 'vue2-google-maps';\n\nVue.config.productionTip = false\n\n// Vuetify imports\nVue.use(Vuetify)\n;(Vue as any).use(VueGoogleMaps, {\n  load: {\n    key: Vault.googleMapsApiKey,\n    libraries: ['places'],\n  }\n})\n\n// draggable is not settable on the element, is it?\nVue.directive('draggable', {\n  bind (el: HTMLElement) {\n    el.draggable = true\n  }\n})\n\nimport 'vuetify/dist/vuetify.min.css'\nimport 'material-design-icons-iconfont/dist/material-design-icons.css'\n\nnew (Vue as any)({\n  store,\n  render: (h: any) => h(AppRoot)\n}).$mount('#app')\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Messages.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Messages.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PrintableManifest.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PrintableManifest.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Templates.vue?vue&type=style&index=0&id=3e514a42&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Templates.vue?vue&type=style&index=0&id=3e514a42&scoped=true&lang=scss&\""],"sourceRoot":""}